(self.webpackChunkangular_micro_frontend_chess_game=self.webpackChunkangular_micro_frontend_chess_game||[]).push([[158],{2158:(Lt,kt,J)=>{"use strict";J.r(kt),J.d(kt,{ChessBoardModule:()=>_s});var Ne=J(6680),l=J(5e3),Ue=J(9808),Se=J(925),he=J(3191),_e=J(8255),ne=J(7579),_t=J(727),kr=J(4986),ui=J(5963),wn=J(6406),vt=J(8306),mt=J(6451),Mt=J(2722),Ce=J(4004),lt=J(5698),Oi=J(8675),Ge=J(8505),Bt=J(3900),Re=J(6731),Ft=J(226);function Le(f,n,i){for(let s in n)if(n.hasOwnProperty(s)){const o=n[s];o?f.setProperty(s,o,(null==i?void 0:i.has(s))?"important":""):f.removeProperty(s)}return f}function ze(f,n){const i=n?"":"none";Le(f.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function di(f,n,i){Le(f.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},i)}function fi(f,n){return n&&"none"!=n?f+" "+n:f}function Cn(f){const n=f.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(f)*n}function Hi(f,n){return f.getPropertyValue(n).split(",").map(s=>s.trim())}function pi(f){const n=f.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function Wi(f,n,i){const{top:s,bottom:o,left:c,right:_}=f;return i>=s&&i<=o&&n>=c&&n<=_}function Jt(f,n,i){f.top+=n,f.bottom=f.top+f.height,f.left+=i,f.right=f.left+f.width}function ct(f,n,i,s){const{top:o,right:c,bottom:_,left:C,width:y,height:D}=f,M=y*n,ae=D*n;return s>o-ae&&s<_+ae&&i>C-M&&i<c+M}class it{constructor(n,i){this._document=n,this._viewportRuler=i,this.positions=new Map}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),n.forEach(i=>{this.positions.set(i,{scrollPosition:{top:i.scrollTop,left:i.scrollLeft},clientRect:pi(i)})})}handleScroll(n){const i=(0,Se.sA)(n),s=this.positions.get(i);if(!s)return null;const o=s.scrollPosition;let c,_;if(i===this._document){const D=this._viewportRuler.getViewportScrollPosition();c=D.top,_=D.left}else c=i.scrollTop,_=i.scrollLeft;const C=o.top-c,y=o.left-_;return this.positions.forEach((D,M)=>{D.clientRect&&i!==M&&i.contains(M)&&Jt(D.clientRect,C,y)}),o.top=c,o.left=_,{top:C,left:y}}}function Pn(f){const n=f.cloneNode(!0),i=n.querySelectorAll("[id]"),s=f.nodeName.toLowerCase();n.removeAttribute("id");for(let o=0;o<i.length;o++)i[o].removeAttribute("id");return"canvas"===s?yn(f,n):("input"===s||"select"===s||"textarea"===s)&&En(f,n),Xt("canvas",f,n,yn),Xt("input, textarea, select",f,n,En),n}function Xt(f,n,i,s){const o=n.querySelectorAll(f);if(o.length){const c=i.querySelectorAll(f);for(let _=0;_<o.length;_++)s(o[_],c[_])}}let Ze=0;function En(f,n){"file"!==n.type&&(n.value=f.value),"radio"===n.type&&n.name&&(n.name=`mat-clone-${n.name}-${Ze++}`)}function yn(f,n){const i=n.getContext("2d");if(i)try{i.drawImage(f,0,0)}catch(s){}}const xn=(0,Se.i$)({passive:!0}),bt=(0,Se.i$)({passive:!1}),Ki=new Set(["position"]);class Vt{constructor(n,i,s,o,c,_){this._config=i,this._document=s,this._ngZone=o,this._viewportRuler=c,this._dragDropRegistry=_,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ne.x,this._pointerMoveSubscription=_t.w0.EMPTY,this._pointerUpSubscription=_t.w0.EMPTY,this._scrollSubscription=_t.w0.EMPTY,this._resizeSubscription=_t.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ne.x,this.started=new ne.x,this.released=new ne.x,this.ended=new ne.x,this.entered=new ne.x,this.exited=new ne.x,this.dropped=new ne.x,this.moved=this._moveEvents,this._pointerDown=C=>{if(this.beforeStarted.next(),this._handles.length){const y=this._handles.find(D=>C.target&&(C.target===D||D.contains(C.target)));y&&!this._disabledHandles.has(y)&&!this.disabled&&this._initializeDragSequence(y,C)}else this.disabled||this._initializeDragSequence(this._rootElement,C)},this._pointerMove=C=>{const y=this._getPointerPositionOnPage(C);if(!this._hasStartedDragging){if(Math.abs(y.x-this._pickupPositionOnPage.x)+Math.abs(y.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const dt=Date.now()>=this._dragStartTime+this._getDragStartDelay(C),Me=this._dropContainer;if(!dt)return void this._endDragSequence(C);(!Me||!Me.isDragging()&&!Me.isReceiving())&&(C.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(C)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),C.preventDefault();const D=this._getConstrainedPointerPosition(y);if(this._hasMoved=!0,this._lastKnownPointerPosition=y,this._updatePointerDirectionDelta(D),this._dropContainer)this._updateActiveDropContainer(D,y);else{const M=this._activeTransform;M.x=D.x-this._pickupPositionOnPage.x+this._passiveTransform.x,M.y=D.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(M.x,M.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:D,event:C,distance:this._getDragDistance(D),delta:this._pointerDirectionDelta})})},this._pointerUp=C=>{this._endDragSequence(C)},this.withRootElement(n).withParent(i.parentDragRef||null),this._parentPositions=new it(s,c),_.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(n){const i=(0,he.Ig)(n);i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(s=>ze(s,i)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(s=>(0,he.fI)(s)),this._handles.forEach(s=>ze(s,this.disabled)),this._toggleNativeDragInteractions();const i=new Set;return this._disabledHandles.forEach(s=>{this._handles.indexOf(s)>-1&&i.add(s)}),this._disabledHandles=i,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){const i=(0,he.fI)(n);return i!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{i.addEventListener("mousedown",this._pointerDown,bt),i.addEventListener("touchstart",this._pointerDown,xn)}),this._initialTransform=void 0,this._rootElement=i),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?(0,he.fI)(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){var n,i;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(n=this._rootElement)||void 0===n||n.remove()),null===(i=this._anchor)||void 0===i||i.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),ze(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),ze(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){const n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){const n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var n,i;null===(n=this._preview)||void 0===n||n.remove(),null===(i=this._previewRef)||void 0===i||i.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var n,i;null===(n=this._placeholder)||void 0===n||n.remove(),null===(i=this._placeholderRef)||void 0===i||i.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const i=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(i),dropPoint:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){ut(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const i=this._dropContainer;if(i){const s=this._rootElement,o=s.parentNode,c=this._placeholder=this._createPlaceholderElement(),_=this._anchor=this._anchor||this._document.createComment(""),C=this._getShadowRoot();o.insertBefore(_,s),this._initialTransform=s.style.transform||"",this._preview=this._createPreviewElement(),di(s,!1,Ki),this._document.body.appendChild(o.replaceChild(c,s)),this._getPreviewInsertionPoint(o,C).appendChild(this._preview),this.started.next({source:this}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(n,i){this._parentDragRef&&i.stopPropagation();const s=this.isDragging(),o=ut(i),c=!o&&0!==i.button,_=this._rootElement,C=(0,Se.sA)(i),y=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),D=o?(0,_e.yG)(i):(0,_e.X6)(i);if(C&&C.draggable&&"mousedown"===i.type&&i.preventDefault(),s||c||y||D)return;if(this._handles.length){const $=_.style;this._rootElementTapHighlight=$.webkitTapHighlightColor||"",$.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe($=>this._updateOnScroll($)),this._boundaryElement&&(this._boundaryRect=pi(this._boundaryElement));const M=this._previewTemplate;this._pickupPositionInElement=M&&M.template&&!M.matchSize?{x:0,y:0}:this._getPointerPositionInElement(n,i);const ae=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:ae.x,y:ae.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}_cleanupDragArtifacts(n){di(this._rootElement,!0,Ki),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const i=this._dropContainer,s=i.getItemIndex(this),o=this._getPointerPositionOnPage(n),c=this._getDragDistance(o),_=i._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:c,dropPoint:o}),this.dropped.next({item:this,currentIndex:s,previousIndex:this._initialIndex,container:i,previousContainer:this._initialContainer,isPointerOverContainer:_,distance:c,dropPoint:o}),i.drop(this,s,this._initialIndex,this._initialContainer,_,c,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:i},{x:s,y:o}){let c=this._initialContainer._getSiblingContainerFromPosition(this,n,i);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,i)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=c,this._dropContainer.enter(this,n,i,c===this._initialContainer&&c.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:c,currentIndex:c.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(s,o),this._dropContainer._sortItem(this,n,i,this._pointerDirectionDelta),this._applyPreviewTransform(n-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}_createPreviewElement(){const n=this._previewTemplate,i=this.previewClass,s=n?n.template:null;let o;if(s&&n){const c=n.matchSize?this._rootElement.getBoundingClientRect():null,_=n.viewContainer.createEmbeddedView(s,n.context);_.detectChanges(),o=jt(_,this._document),this._previewRef=_,n.matchSize?Ni(o,c):o.style.transform=ht(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const c=this._rootElement;o=Pn(c),Ni(o,c.getBoundingClientRect()),this._initialTransform&&(o.style.transform=this._initialTransform)}return Le(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Ki),ze(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(c=>o.classList.add(c)):o.classList.add(i)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const n=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);const i=function Mr(f){const n=getComputedStyle(f),i=Hi(n,"transition-property"),s=i.find(C=>"transform"===C||"all"===C);if(!s)return 0;const o=i.indexOf(s),c=Hi(n,"transition-duration"),_=Hi(n,"transition-delay");return Cn(c[o])+Cn(_[o])}(this._preview);return 0===i?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(s=>{const o=_=>{var C;(!_||(0,Se.sA)(_)===this._preview&&"transform"===_.propertyName)&&(null===(C=this._preview)||void 0===C||C.removeEventListener("transitionend",o),s(),clearTimeout(c))},c=setTimeout(o,1.5*i);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const n=this._placeholderTemplate,i=n?n.template:null;let s;return i?(this._placeholderRef=n.viewContainer.createEmbeddedView(i,n.context),this._placeholderRef.detectChanges(),s=jt(this._placeholderRef,this._document)):s=Pn(this._rootElement),s.classList.add("cdk-drag-placeholder"),s}_getPointerPositionInElement(n,i){const s=this._rootElement.getBoundingClientRect(),o=n===this._rootElement?null:n,c=o?o.getBoundingClientRect():s,_=ut(i)?i.targetTouches[0]:i,C=this._getViewportScrollPosition();return{x:c.left-s.left+(_.pageX-c.left-C.left),y:c.top-s.top+(_.pageY-c.top-C.top)}}_getPointerPositionOnPage(n){const i=this._getViewportScrollPosition(),s=ut(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,o=s.pageX-i.left,c=s.pageY-i.top;if(this._ownerSVGElement){const _=this._ownerSVGElement.getScreenCTM();if(_){const C=this._ownerSVGElement.createSVGPoint();return C.x=o,C.y=c,C.matrixTransform(_.inverse())}}return{x:o,y:c}}_getConstrainedPointerPosition(n){const i=this._dropContainer?this._dropContainer.lockAxis:null;let{x:s,y:o}=this.constrainPosition?this.constrainPosition(n,this):n;if("x"===this.lockAxis||"x"===i?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===i)&&(s=this._pickupPositionOnPage.x),this._boundaryRect){const{x:c,y:_}=this._pickupPositionInElement,C=this._boundaryRect,y=this._previewRect,D=C.top+_,M=C.bottom-(y.height-_);s=In(s,C.left+c,C.right-(y.width-c)),o=In(o,D,M)}return{x:s,y:o}}_updatePointerDirectionDelta(n){const{x:i,y:s}=n,o=this._pointerDirectionDelta,c=this._pointerPositionAtLastDirectionChange,_=Math.abs(i-c.x),C=Math.abs(s-c.y);return _>this._config.pointerDirectionChangeThreshold&&(o.x=i>c.x?1:-1,c.x=i),C>this._config.pointerDirectionChangeThreshold&&(o.y=s>c.y?1:-1,c.y=s),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,ze(this._rootElement,n))}_removeRootElementListeners(n){n.removeEventListener("mousedown",this._pointerDown,bt),n.removeEventListener("touchstart",this._pointerDown,xn)}_applyRootElementTransform(n,i){const s=ht(n,i),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=fi(s,this._initialTransform)}_applyPreviewTransform(n,i){var s;const o=(null===(s=this._previewTemplate)||void 0===s?void 0:s.template)?void 0:this._initialTransform,c=ht(n,i);this._preview.style.transform=fi(c,o)}_getDragDistance(n){const i=this._pickupPositionOnPage;return i?{x:n.x-i.x,y:n.y-i.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:i}=this._passiveTransform;if(0===n&&0===i||this.isDragging()||!this._boundaryElement)return;const s=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===s.width&&0===s.height||0===o.width&&0===o.height)return;const c=s.left-o.left,_=o.right-s.right,C=s.top-o.top,y=o.bottom-s.bottom;s.width>o.width?(c>0&&(n+=c),_>0&&(n-=_)):n=0,s.height>o.height?(C>0&&(i+=C),y>0&&(i-=y)):i=0,(n!==this._passiveTransform.x||i!==this._passiveTransform.y)&&this.setFreeDragPosition({y:i,x:n})}_getDragStartDelay(n){const i=this.dragStartDelay;return"number"==typeof i?i:ut(n)?i.touch:i?i.mouse:0}_updateOnScroll(n){const i=this._parentPositions.handleScroll(n);if(i){const s=(0,Se.sA)(n);this._boundaryRect&&s!==this._boundaryElement&&s.contains(this._boundaryElement)&&Jt(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const n=this._parentPositions.positions.get(this._document);return n?n.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,Se.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,i){const s=this._previewContainer||"global";if("parent"===s)return n;if("global"===s){const o=this._document;return i||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return(0,he.fI)(s)}}function ht(f,n){return`translate3d(${Math.round(f)}px, ${Math.round(n)}px, 0)`}function In(f,n,i){return Math.max(n,Math.min(i,f))}function ut(f){return"t"===f.type[0]}function jt(f,n){const i=f.rootNodes;if(1===i.length&&i[0].nodeType===n.ELEMENT_NODE)return i[0];const s=n.createElement("div");return i.forEach(o=>s.appendChild(o)),s}function Ni(f,n){f.style.width=`${n.width}px`,f.style.height=`${n.height}px`,f.style.transform=ht(n.left,n.top)}function ve(f,n){return Math.max(0,Math.min(n,f))}class ei{constructor(n,i,s,o,c){this._dragDropRegistry=i,this._ngZone=o,this._viewportRuler=c,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ne.x,this.entered=new ne.x,this.exited=new ne.x,this.dropped=new ne.x,this.sorted=new ne.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=_t.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ne.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function at(f=0,n=kr.z){return f<0&&(f=0),(0,ui.H)(f,f,n)}(0,wn.Z).pipe((0,Mt.R)(this._stopScrollTimers)).subscribe(()=>{const _=this._scrollNode,C=this.autoScrollStep;1===this._verticalScrollDirection?_.scrollBy(0,-C):2===this._verticalScrollDirection&&_.scrollBy(0,C),1===this._horizontalScrollDirection?_.scrollBy(-C,0):2===this._horizontalScrollDirection&&_.scrollBy(C,0)})},this.element=(0,he.fI)(n),this._document=s,this.withScrollableParents([this.element]),i.registerDropContainer(this),this._parentPositions=new it(s,c)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,i,s,o){let c;this._draggingStarted(),null==o?(c=this.sortingDisabled?this._draggables.indexOf(n):-1,-1===c&&(c=this._getItemIndexFromPointerPosition(n,i,s))):c=o;const _=this._activeDraggables,C=_.indexOf(n),y=n.getPlaceholderElement();let D=_[c];if(D===n&&(D=_[c+1]),!D&&(null==c||-1===c||c<_.length-1)&&this._shouldEnterAsFirstChild(i,s)&&(D=_[0]),C>-1&&_.splice(C,1),D&&!this._dragDropRegistry.isDragging(D)){const M=D.getRootElement();M.parentElement.insertBefore(y,M),_.splice(c,0,n)}else(0,he.fI)(this.element).appendChild(y),_.push(n);y.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,i,s,o,c,_,C){this._reset(),this.dropped.next({item:n,currentIndex:i,previousIndex:s,container:this,previousContainer:o,isPointerOverContainer:c,distance:_,dropPoint:C})}withItems(n){const i=this._draggables;return this._draggables=n,n.forEach(s=>s._withDropContainer(this)),this.isDragging()&&(i.filter(o=>o.isDragging()).every(o=>-1===n.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(n){return this._direction=n,this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){return this._orientation=n,this}withScrollableParents(n){const i=(0,he.fI)(this.element);return this._scrollableElements=-1===n.indexOf(i)?[i,...n]:n.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(s=>s.drag===n):this._draggables.indexOf(n)}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,i,s,o){if(this.sortingDisabled||!this._clientRect||!ct(this._clientRect,.05,i,s))return;const c=this._itemPositions,_=this._getItemIndexFromPointerPosition(n,i,s,o);if(-1===_&&c.length>0)return;const C="horizontal"===this._orientation,y=c.findIndex(fe=>fe.drag===n),D=c[_],ae=D.clientRect,$=y>_?1:-1,dt=this._getItemOffsetPx(c[y].clientRect,ae,$),Me=this._getSiblingOffsetPx(y,c,$),Pt=c.slice();(function ke(f,n,i){const s=ve(n,f.length-1),o=ve(i,f.length-1);if(s===o)return;const c=f[s],_=o<s?-1:1;for(let C=s;C!==o;C+=_)f[C]=f[C+_];f[o]=c})(c,y,_),this.sorted.next({previousIndex:y,currentIndex:_,container:this,item:n}),c.forEach((fe,xe)=>{if(Pt[xe]===fe)return;const nn=fe.drag===n,yi=nn?dt:Me,rn=nn?n.getPlaceholderElement():fe.drag.getRootElement();fe.offset+=yi,C?(rn.style.transform=fi(`translate3d(${Math.round(fe.offset)}px, 0, 0)`,fe.initialTransform),Jt(fe.clientRect,0,yi)):(rn.style.transform=fi(`translate3d(0, ${Math.round(fe.offset)}px, 0)`,fe.initialTransform),Jt(fe.clientRect,yi,0))}),this._previousSwap.overlaps=Wi(ae,i,s),this._previousSwap.drag=D.drag,this._previousSwap.delta=C?o.x:o.y}_startScrollingIfNecessary(n,i){if(this.autoScrollDisabled)return;let s,o=0,c=0;if(this._parentPositions.positions.forEach((_,C)=>{C===this._document||!_.clientRect||s||ct(_.clientRect,.05,n,i)&&([o,c]=function vi(f,n,i,s){const o=Pe(n,s),c=Ot(n,i);let _=0,C=0;if(o){const y=f.scrollTop;1===o?y>0&&(_=1):f.scrollHeight-y>f.clientHeight&&(_=2)}if(c){const y=f.scrollLeft;1===c?y>0&&(C=1):f.scrollWidth-y>f.clientWidth&&(C=2)}return[_,C]}(C,_.clientRect,n,i),(o||c)&&(s=C))}),!o&&!c){const{width:_,height:C}=this._viewportRuler.getViewportSize(),y={width:_,height:C,top:0,right:_,bottom:C,left:0};o=Pe(y,i),c=Ot(y,n),s=window}s&&(o!==this._verticalScrollDirection||c!==this._horizontalScrollDirection||s!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=c,this._scrollNode=s,(o||c)&&s?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const n=(0,he.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const n=(0,he.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(n).clientRect}_cacheItemPositions(){const n="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(i=>{const s=i.getVisibleElement();return{drag:i,offset:0,initialTransform:s.style.transform||"",clientRect:pi(s)}}).sort((i,s)=>n?i.clientRect.left-s.clientRect.left:i.clientRect.top-s.clientRect.top)}_reset(){this._isDragging=!1;const n=(0,he.fI)(this.element).style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(i=>{var s;const o=i.getRootElement();if(o){const c=null===(s=this._itemPositions.find(_=>_.drag===i))||void 0===s?void 0:s.initialTransform;o.style.transform=c||""}}),this._siblings.forEach(i=>i._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(n,i,s){const o="horizontal"===this._orientation,c=i[n].clientRect,_=i[n+-1*s];let C=c[o?"width":"height"]*s;if(_){const y=o?"left":"top",D=o?"right":"bottom";-1===s?C-=_.clientRect[y]-c[D]:C+=c[y]-_.clientRect[D]}return C}_getItemOffsetPx(n,i,s){const o="horizontal"===this._orientation;let c=o?i.left-n.left:i.top-n.top;return-1===s&&(c+=o?i.width-n.width:i.height-n.height),c}_shouldEnterAsFirstChild(n,i){if(!this._activeDraggables.length)return!1;const s=this._itemPositions,o="horizontal"===this._orientation;if(s[0].drag!==this._activeDraggables[0]){const _=s[s.length-1].clientRect;return o?n>=_.right:i>=_.bottom}{const _=s[0].clientRect;return o?n<=_.left:i<=_.top}}_getItemIndexFromPointerPosition(n,i,s,o){const c="horizontal"===this._orientation,_=this._itemPositions.findIndex(({drag:C,clientRect:y})=>{if(C===n)return!1;if(o){const D=c?o.x:o.y;if(C===this._previousSwap.drag&&this._previousSwap.overlaps&&D===this._previousSwap.delta)return!1}return c?i>=Math.floor(y.left)&&i<Math.floor(y.right):s>=Math.floor(y.top)&&s<Math.floor(y.bottom)});return-1!==_&&this.sortPredicate(_,n,this)?_:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(n,i){return null!=this._clientRect&&Wi(this._clientRect,n,i)}_getSiblingContainerFromPosition(n,i,s){return this._siblings.find(o=>o._canReceive(n,i,s))}_canReceive(n,i,s){if(!this._clientRect||!Wi(this._clientRect,i,s)||!this.enterPredicate(n,this))return!1;const o=this._getShadowRoot().elementFromPoint(i,s);if(!o)return!1;const c=(0,he.fI)(this.element);return o===c||c.contains(o)}_startReceiving(n,i){const s=this._activeSiblings;!s.has(n)&&i.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(s.add(n),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){const i=this._parentPositions.handleScroll(n);i&&(this._itemPositions.forEach(({clientRect:s})=>{Jt(s,i.top,i.left)}),this._itemPositions.forEach(({drag:s})=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const n=(0,Se.kV)((0,he.fI)(this.element));this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const n=this._activeDraggables.filter(i=>i.isDragging());this._siblings.forEach(i=>i._startReceiving(this,n))}}function Pe(f,n){const{top:i,bottom:s,height:o}=f,c=.05*o;return n>=i-c&&n<=i+c?1:n>=s-c&&n<=s+c?2:0}function Ot(f,n){const{left:i,right:s,width:o}=f,c=.05*o;return n>=i-c&&n<=i+c?1:n>=s-c&&n<=s+c?2:0}const mi=(0,Se.i$)({passive:!1,capture:!0});let ti=(()=>{class f{constructor(i,s){this._ngZone=i,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new ne.x,this.pointerUp=new ne.x,this.scroll=new ne.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=s}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,mi)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,mi)}startDragging(i,s){if(!(this._activeDragInstances.indexOf(i)>-1)&&(this._activeDragInstances.push(i),1===this._activeDragInstances.length)){const o=s.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:c=>this.pointerUp.next(c),options:!0}).set("scroll",{handler:c=>this.scroll.next(c),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:mi}),o||this._globalListeners.set("mousemove",{handler:c=>this.pointerMove.next(c),options:mi}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((c,_)=>{this._document.addEventListener(_,c.handler,c.options)})})}}stopDragging(i){const s=this._activeDragInstances.indexOf(i);s>-1&&(this._activeDragInstances.splice(s,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(i){return this._activeDragInstances.indexOf(i)>-1}scrolled(i){const s=[this.scroll];return i&&i!==this._document&&s.push(new vt.y(o=>this._ngZone.runOutsideAngular(()=>{const _=C=>{this._activeDragInstances.length&&o.next(C)};return i.addEventListener("scroll",_,!0),()=>{i.removeEventListener("scroll",_,!0)}}))),(0,mt.T)(...s)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,s)=>{this._document.removeEventListener(s,i.handler,i.options)}),this._globalListeners.clear()}}return f.\u0275fac=function(i){return new(i||f)(l.LFG(l.R0b),l.LFG(Ue.K0))},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const Br={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ht=(()=>{class f{constructor(i,s,o,c){this._document=i,this._ngZone=s,this._viewportRuler=o,this._dragDropRegistry=c}createDrag(i,s=Br){return new Vt(i,s,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new ei(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return f.\u0275fac=function(i){return new(i||f)(l.LFG(Ue.K0),l.LFG(l.R0b),l.LFG(Re.rL),l.LFG(ti))},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const wt=new l.OlP("CDK_DRAG_PARENT"),Gi=new l.OlP("CDK_DRAG_CONFIG"),zi=new l.OlP("CdkDropList"),bi=new l.OlP("CdkDragHandle"),Fr=new l.OlP("CdkDragPlaceholder"),Or=new l.OlP("CdkDragPreview");let Wr=(()=>{class f{constructor(i,s,o,c,_,C,y,D,M,ae,$){this.element=i,this.dropContainer=s,this._ngZone=c,this._viewContainerRef=_,this._dir=y,this._changeDetectorRef=M,this._selfHandle=ae,this._parentDrag=$,this._destroyed=new ne.x,this.started=new l.vpe,this.released=new l.vpe,this.ended=new l.vpe,this.entered=new l.vpe,this.exited=new l.vpe,this.dropped=new l.vpe,this.moved=new vt.y(dt=>{const Me=this._dragRef.moved.pipe((0,Ce.U)(Pt=>({source:this,pointerPosition:Pt.pointerPosition,event:Pt.event,delta:Pt.delta,distance:Pt.distance}))).subscribe(dt);return()=>{Me.unsubscribe()}}),this._dragRef=D.createDrag(i,{dragStartThreshold:C&&null!=C.dragStartThreshold?C.dragStartThreshold:5,pointerDirectionChangeThreshold:C&&null!=C.pointerDirectionChangeThreshold?C.pointerDirectionChangeThreshold:5,zIndex:null==C?void 0:C.zIndex}),this._dragRef.data=this,f._dragInstances.push(this),C&&this._assignDefaults(C),s&&(this._dragRef._withDropContainer(s._dropListRef),s.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=(0,he.Ig)(i),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,lt.q)(1),(0,Mt.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(i){const s=i.rootElementSelector,o=i.freeDragPosition;s&&!s.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const i=f._dragInstances.indexOf(this);i>-1&&f._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var i;const s=this.element.nativeElement;let o=s;this.rootElementSelector&&(o=void 0!==s.closest?s.closest(this.rootElementSelector):null===(i=s.parentElement)||void 0===i?void 0:i.closest(this.rootElementSelector)),this._dragRef.withRootElement(o||s)}_getBoundaryElement(){const i=this.boundaryElement;return i?"string"==typeof i?this.element.nativeElement.closest(i):(0,he.fI)(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){const s=this._dir,o=this.dragStartDelay,c=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,_=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.dragStartDelay="object"==typeof o&&o?o:(0,he.su)(o),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(c).withPreviewTemplate(_).withPreviewContainer(this.previewContainer||"global"),s&&i.withDirection(s.value)}}),i.beforeStarted.pipe((0,lt.q)(1)).subscribe(()=>{var s;if(this._parentDrag)return void i.withParent(this._parentDrag._dragRef);let o=this.element.nativeElement.parentElement;for(;o;){if(o.classList.contains("cdk-drag")){i.withParent((null===(s=f._dragInstances.find(c=>c.element.nativeElement===o))||void 0===s?void 0:s._dragRef)||null);break}o=o.parentElement}})}_handleEvents(i){i.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(()=>{this.released.emit({source:this})}),i.ended.subscribe(s=>{this.ended.emit({source:this,distance:s.distance,dropPoint:s.dropPoint}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(s=>{this.entered.emit({container:s.container.data,item:this,currentIndex:s.currentIndex})}),i.exited.subscribe(s=>{this.exited.emit({container:s.container.data,item:this})}),i.dropped.subscribe(s=>{this.dropped.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,previousContainer:s.previousContainer.data,container:s.container.data,isPointerOverContainer:s.isPointerOverContainer,item:this,distance:s.distance,dropPoint:s.dropPoint})})}_assignDefaults(i){const{lockAxis:s,dragStartDelay:o,constrainPosition:c,previewClass:_,boundaryElement:C,draggingDisabled:y,rootElementSelector:D,previewContainer:M}=i;this.disabled=null!=y&&y,this.dragStartDelay=o||0,s&&(this.lockAxis=s),c&&(this.constrainPosition=c),_&&(this.previewClass=_),C&&(this.boundaryElement=C),D&&(this.rootElementSelector=D),M&&(this.previewContainer=M)}_setupHandlesListener(){this._handles.changes.pipe((0,Oi.O)(this._handles),(0,Ge.b)(i=>{const s=i.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&s.push(this.element),this._dragRef.withHandles(s)}),(0,Bt.w)(i=>(0,mt.T)(...i.map(s=>s._stateChanges.pipe((0,Oi.O)(s))))),(0,Mt.R)(this._destroyed)).subscribe(i=>{const s=this._dragRef,o=i.element.nativeElement;i.disabled?s.disableHandle(o):s.enableHandle(o)})}}return f._dragInstances=[],f.\u0275fac=function(i){return new(i||f)(l.Y36(l.SBq),l.Y36(zi,12),l.Y36(Ue.K0),l.Y36(l.R0b),l.Y36(l.s_b),l.Y36(Gi,8),l.Y36(Ft.Is,8),l.Y36(Ht),l.Y36(l.sBO),l.Y36(bi,10),l.Y36(wt,12))},f.\u0275dir=l.lG2({type:f,selectors:[["","cdkDrag",""]],contentQueries:function(i,s,o){if(1&i&&(l.Suo(o,Or,5),l.Suo(o,Fr,5),l.Suo(o,bi,5)),2&i){let c;l.iGM(c=l.CRH())&&(s._previewTemplate=c.first),l.iGM(c=l.CRH())&&(s._placeholderTemplate=c.first),l.iGM(c=l.CRH())&&(s._handles=c)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,s){2&i&&l.ekj("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[l._Bn([{provide:wt,useExisting:f}]),l.TTD]}),f})(),Kr=(()=>{class f{}return f.\u0275fac=function(i){return new(i||f)},f.\u0275mod=l.oAB({type:f}),f.\u0275inj=l.cJS({providers:[Ht],imports:[Re.ZD]}),f})();var wi=J(1135),Nr=J(7489);const Bn=["myModal"];function Ur(f,n){if(1&f){const i=l.EpF();l.TgZ(0,"div",5),l.TgZ(1,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(1)}),l._UZ(2,"img",7),l.qZA(),l.TgZ(3,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(2)}),l._UZ(4,"img",8),l.qZA(),l.TgZ(5,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(3)}),l._UZ(6,"img",9),l.qZA(),l.TgZ(7,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(4)}),l._UZ(8,"img",10),l.qZA(),l.qZA()}if(2&f){const i=l.oxw();l.xp6(2),l.Q6J("src",i.getPieceIcon("queen"),l.LSH),l.xp6(2),l.Q6J("src",i.getPieceIcon("rook"),l.LSH),l.xp6(2),l.Q6J("src",i.getPieceIcon("bishop"),l.LSH),l.xp6(2),l.Q6J("src",i.getPieceIcon("knight"),l.LSH)}}function Gr(f,n){if(1&f){const i=l.EpF();l.TgZ(0,"div",5),l.TgZ(1,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(1)}),l._uU(2,"\u265b"),l.qZA(),l.TgZ(3,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(2)}),l._uU(4,"\u265c"),l.qZA(),l.TgZ(5,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(3)}),l._uU(6,"\u265d"),l.qZA(),l.TgZ(7,"div",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().changeSelection(4)}),l._uU(8,"\u265e"),l.qZA(),l.qZA()}}const zr=["boardRef"],Zi=["modal"];function Zr(f,n){if(1&f){const i=l.EpF();l.TgZ(0,"div",11),l.NdJ("cdkDragEnded",function(o){return l.CHM(i),l.oxw().dragEnded(o)})("cdkDragMoved",function(o){return l.CHM(i),l.oxw().dragMoved(o)})("cdkDragStarted",function(o){return l.CHM(i),l.oxw().dragStart(o)}),l.qZA()}if(2&f){const i=n.$implicit,s=l.oxw();l.Udp("transform","translate3d("+i.point.col*s.pieceSize+"px, "+i.point.row*s.pieceSize+"px,0px)")("max-height",s.pieceSize+"px")("font-size",.8*s.pieceSize+"px")("width",s.pieceSize+"px")("height",s.pieceSize+"px"),l.Q6J("cdkDragDisabled",s.engineFacade.dragDisabled)("innerHTML",s.engineFacade.pieceIconManager.isDefaultIcons()?i.constant.icon:"",l.oJD)("ngStyle",s.engineFacade.pieceIconManager.isDefaultIcons()?"":s.getCustomPieceIcons(i))}}function qi(f,n){if(1&f&&(l.TgZ(0,"span",18),l._uU(1),l.qZA()),2&f){const i=l.oxw(2).index,s=l.oxw();l.Udp("color",i%2==0?s.lightTileColor:s.darkTileColor)("font-size",s.pieceSize/4,"px"),l.xp6(1),l.hij(" ",s.engineFacade.coords.yCoords[i]," ")}}function qr(f,n){if(1&f&&(l.TgZ(0,"span",19),l._uU(1),l.qZA()),2&f){const i=l.oxw().index,s=l.oxw(2);l.Udp("color",i%2==0?s.lightTileColor:s.darkTileColor)("font-size",s.pieceSize/4,"px"),l.xp6(1),l.hij(" ",s.engineFacade.coords.xCoords[i]," ")}}function $r(f,n){if(1&f&&(l.TgZ(0,"div",20),l._UZ(1,"div",21),l.qZA()),2&f){const i=l.oxw(3);l.xp6(1),l.Udp("font-size",i.pieceSize+"px"),l.Q6J("ngClass","piece")}}function Yr(f,n){if(1&f&&(l.TgZ(0,"div",14),l.YNc(1,qi,2,5,"span",15),l.YNc(2,qr,2,5,"span",16),l.YNc(3,$r,2,3,"div",17),l.qZA()),2&f){const i=n.index,s=l.oxw().index,o=l.oxw();l.Udp("background-color",o.getTileBackgroundColor(s,i)),l.ekj("current-selection",o.showActivePiece&&o.engineFacade.board.isXYInActiveMove(s,i))("king-check",o.engineFacade.board.isKingChecked(o.engineFacade.board.getPieceByPoint(s,i)))("point-circle",o.engineFacade.board.isXYInPointSelection(s,i))("possible-capture",o.showPossibleCaptures&&o.engineFacade.board.isXYInPossibleCaptures(s,i))("possible-point",o.engineFacade.board.isXYInPossibleMoves(s,i)&&o.showLegalMoves),l.xp6(1),l.Q6J("ngIf",o.showCoords&&7===i),l.xp6(1),l.Q6J("ngIf",o.showCoords&&7===s),l.xp6(1),l.Q6J("ngIf",o.engineFacade.board.getPieceByPoint(s,i))}}function Qr(f,n){if(1&f&&(l.TgZ(0,"div",12),l.YNc(1,Yr,4,15,"div",13),l.qZA()),2&f){const i=n.$implicit;l.xp6(1),l.Q6J("ngForOf",i)}}function Jr(f,n){if(1&f&&(l.O4$(),l.TgZ(0,"defs"),l.TgZ(1,"marker",22),l._UZ(2,"path",23),l.qZA(),l.qZA()),2&f){const i=n.$implicit;l.xp6(1),l.Q6J("id",i+"Arrow"),l.xp6(1),l.Udp("fill",i)}}function Xr(f,n){if(1&f&&(l.O4$(),l._UZ(0,"line",24)),2&f){const i=n.$implicit;l.uIk("marker-end","url(#"+i.end.color+"Arrow)")("stroke",i.end.color)("x1",i.start.x)("x2",i.end.x)("y1",i.start.y)("y2",i.end.y)}}function Vr(f,n){if(1&f&&(l.O4$(),l._UZ(0,"circle",25)),2&f){const i=n.$implicit,s=l.oxw();l.uIk("cx",i.drawPoint.x)("cy",i.drawPoint.y)("r",s.engineFacade.heightAndWidth/18)("stroke",i.drawPoint.color)}}const jr=function(){return["red","green","blue","orange"]};var p=(()=>{return(f=p||(p={}))[f.WHITE=0]="WHITE",f[f.BLACK=1]="BLACK",p;var f})();class Wt{constructor(n,i,s,o,c){this.checkPoints=[],this.color=i,this.constant=s,this.point=n,this.relValue=o,this.board=c}}class b{constructor(n,i){this.row=n,this.col=i}isEqual(n){return n&&this.row===n.row&&this.col===n.col}hasCoordsEqual(n,i){return n&&i&&this.row===n&&this.col===i}isInRange(){return this.row>=0&&this.row<=7&&this.col>=0&&this.col<=7}clone(){return new b(this.row,this.col)}}class oe extends Wt{constructor(n,i,s,o){super(n,i,s,5,o),this.isMovedAlready=!1}getPossibleMoves(){const n=[],i=this.point.row,s=this.point.col;for(let o=i+1;o<8&&this.board.isFieldEmpty(o,s);++o)n.push(new b(o,s));for(let o=i-1;o>=0&&this.board.isFieldEmpty(o,s);--o)n.push(new b(o,s));for(let o=s-1;o>=0&&this.board.isFieldEmpty(i,o);--o)n.push(new b(i,o));for(let o=s+1;o<8&&this.board.isFieldEmpty(i,o);++o)n.push(new b(i,o));return n}getPossibleCaptures(){const n=[],i=this.point.row,s=this.point.col;for(let o=i+1;o<8;++o){if(this.board.isFieldTakenByEnemy(o,s,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,s));break}if(!this.board.isFieldEmpty(o,s))break}for(let o=i-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(o,s,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,s));break}if(!this.board.isFieldEmpty(o,s))break}for(let o=s-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(i,o,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(i,o));break}if(!this.board.isFieldEmpty(i,o))break}for(let o=s+1;o<8;++o){if(this.board.isFieldTakenByEnemy(i,o,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(i,o));break}if(!this.board.isFieldEmpty(i,o))break}return n}getCoveredFields(){const n=[],i=this.point.row,s=this.point.col;for(let o=i+1;o<8;++o)if(this.board.isFieldEmpty(o,s))n.push(new b(o,s));else if(!(this.board.getPieceByField instanceof q)){n.push(new b(o,s));break}for(let o=i-1;o>=0;--o)if(this.board.isFieldEmpty(o,s))n.push(new b(o,s));else if(!(this.board.getPieceByField instanceof q)){n.push(new b(o,s));break}for(let o=s-1;o>=0;--o)if(this.board.isFieldEmpty(i,o))n.push(new b(i,o));else if(!(this.board.getPieceByField instanceof q)){n.push(new b(i,o));break}for(let o=s+1;o<8;++o)if(this.board.isFieldEmpty(i,o))n.push(new b(i,o));else if(!(this.board.getPieceByField instanceof q)){n.push(new b(i,o));break}return n}}class q extends Wt{constructor(n,i,s,o){super(n,i,s,0,o),this.castledAlready=!1,this.shortCastled=!1,this.longCastled=!1,this.isCastling=!1}getPossibleMoves(){const n=[],i=this.point.row,s=this.point.col;if(this.board.isFieldEmpty(i,s-1)&&!this.board.isFieldUnderAttack(i,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i,s-1)),this.board.isFieldEmpty(i,s+1)&&!this.board.isFieldUnderAttack(i,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i,s+1)),this.board.isFieldEmpty(i+1,s)&&!this.board.isFieldUnderAttack(i+1,s,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s)),this.board.isFieldEmpty(i-1,s)&&!this.board.isFieldUnderAttack(i-1,s,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s)),this.board.isFieldEmpty(i-1,s-1)&&!this.board.isFieldUnderAttack(i-1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s-1)),this.board.isFieldEmpty(i-1,s+1)&&!this.board.isFieldUnderAttack(i-1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s+1)),this.board.isFieldEmpty(i+1,s-1)&&!this.board.isFieldUnderAttack(i+1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s-1)),this.board.isFieldEmpty(i+1,s+1)&&!this.board.isFieldUnderAttack(i+1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s+1)),!this.isMovedAlready){let o=!0;for(let _=s-1;_>0;--_)if(!this.board.isFieldEmpty(i,_)||this.board.isFieldUnderAttack(i,_,this.color===p.WHITE?p.BLACK:p.WHITE)){o=!1;break}if(o&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(i,0)){const _=this.board.getPieceByField(i,0);_ instanceof oe&&(_.isMovedAlready||n.push(new b(i,s-2)))}let c=!0;for(let _=s+1;_<7;++_)if(!this.board.isFieldEmpty(i,_)||this.board.isFieldUnderAttack(i,_,this.color===p.WHITE?p.BLACK:p.WHITE)){c=!1;break}if(c&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(i,7)){const _=this.board.getPieceByField(i,7);_ instanceof oe&&(_.isMovedAlready||n.push(new b(i,s+2)))}}return n}getPossibleCaptures(){const n=[],i=this.point.row,s=this.point.col;return this.board.isFieldTakenByEnemy(i,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i,s-1)),this.board.isFieldTakenByEnemy(i,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i,s+1)),this.board.isFieldTakenByEnemy(i+1,s,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i+1,s,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s)),this.board.isFieldTakenByEnemy(i-1,s,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i-1,s,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s)),this.board.isFieldTakenByEnemy(i-1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i-1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s-1)),this.board.isFieldTakenByEnemy(i-1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i-1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s+1)),this.board.isFieldTakenByEnemy(i+1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i+1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s-1)),this.board.isFieldTakenByEnemy(i+1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&!this.board.isFieldUnderAttack(i+1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s+1)),n}getCoveredFields(){const n=[],i=this.point.row,s=this.point.col;return n.push(new b(i,s-1)),n.push(new b(i,s+1)),n.push(new b(i+1,s)),n.push(new b(i-1,s)),n.push(new b(i-1,s-1)),n.push(new b(i-1,s+1)),n.push(new b(i+1,s-1)),n.push(new b(i+1,s+1)),n}}class Ee extends Wt{constructor(n,i,s,o){super(n,i,s,3,o)}getPossibleMoves(){const n=[],i=this.point.row,s=this.point.col;for(let o=i-1,c=s-1;o>=0&&c>=0&&this.board.isFieldEmpty(o,c);--o,--c)n.push(new b(o,c));for(let o=i-1,c=s+1;o>=0&&c<8&&this.board.isFieldEmpty(o,c);--o,++c)n.push(new b(o,c));for(let o=i+1,c=s-1;o<8&&c>=0&&this.board.isFieldEmpty(o,c);++o,--c)n.push(new b(o,c));for(let o=i+1,c=s+1;o<8&&c<8&&this.board.isFieldEmpty(o,c);++o,++c)n.push(new b(o,c));return n}getPossibleCaptures(){const n=[],i=this.point.row,s=this.point.col;for(let o=i-1,c=s-1;o>=0&&c>=0;--o,--c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i-1,c=s+1;o>=0&&c<8;--o,++c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i+1,c=s-1;o<8&&c>=0;++o,--c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i+1,c=s+1;o<8&&c<8;++o,++c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}return n}getCoveredFields(){const n=[],i=this.point.row,s=this.point.col;for(let o=i-1,c=s-1;o>=0&&c>=0;--o,--c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}for(let o=i-1,c=s+1;o>=0&&c<8;--o,++c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}for(let o=i+1,c=s-1;o<8&&c>=0;++o,--c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}for(let o=i+1,c=s+1;o<8&&c<8;++o,++c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}return n}}class ye extends Wt{constructor(n,i,s,o){super(n,i,s,3,o),this.isMovedAlready=!1}getPossibleMoves(){const n=[],i=this.point.row,s=this.point.col;return this.board.isFieldEmpty(i-2,s-1)&&n.push(new b(i-2,s-1)),this.board.isFieldEmpty(i-2,s+1)&&n.push(new b(i-2,s+1)),this.board.isFieldEmpty(i-1,s-2)&&n.push(new b(i-1,s-2)),this.board.isFieldEmpty(i-1,s+2)&&n.push(new b(i-1,s+2)),this.board.isFieldEmpty(i+1,s-2)&&n.push(new b(i+1,s-2)),this.board.isFieldEmpty(i+1,s+2)&&n.push(new b(i+1,s+2)),this.board.isFieldEmpty(i+2,s-1)&&n.push(new b(i+2,s-1)),this.board.isFieldEmpty(i+2,s+1)&&n.push(new b(i+2,s+1)),n}getPossibleCaptures(){const n=[],i=this.point.row,s=this.point.col;return this.board.isFieldTakenByEnemy(i-2,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-2,s-1)),this.board.isFieldTakenByEnemy(i-2,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-2,s+1)),this.board.isFieldTakenByEnemy(i-1,s-2,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s-2)),this.board.isFieldTakenByEnemy(i-1,s+2,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s+2)),this.board.isFieldTakenByEnemy(i+1,s-2,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s-2)),this.board.isFieldTakenByEnemy(i+1,s+2,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s+2)),this.board.isFieldTakenByEnemy(i+2,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+2,s-1)),this.board.isFieldTakenByEnemy(i+2,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+2,s+1)),n}getCoveredFields(){const n=[],i=this.point.row,s=this.point.col;return n.push(new b(i-2,s-1)),n.push(new b(i-2,s+1)),n.push(new b(i-1,s-2)),n.push(new b(i-1,s+2)),n.push(new b(i+1,s-2)),n.push(new b(i+1,s+2)),n.push(new b(i+2,s-1)),n.push(new b(i+2,s+1)),n}}class ee extends Wt{constructor(n,i,s,o){super(n,i,s,1,o),this.isMovedAlready=!1}getPossibleMoves(){const n=[],i=this.point.row,s=this.point.col;return!this.board.reverted&&this.color===p.WHITE||this.board.reverted&&this.color===p.BLACK?this.board.isFieldEmpty(i-1,s)&&(n.push(new b(i-1,s)),!this.isMovedAlready&&this.board.isFieldEmpty(i-2,s)&&n.push(new b(i-2,s))):this.board.isFieldEmpty(i+1,s)&&(n.push(new b(i+1,s)),!this.isMovedAlready&&this.board.isFieldEmpty(i+2,s)&&n.push(new b(i+2,s))),n}getPossibleCaptures(){const n=[],i=this.point.row,s=this.point.col;return!this.board.reverted&&this.color===p.WHITE||this.board.reverted&&this.color===p.BLACK?(this.board.isFieldTakenByEnemy(i-1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s-1)),this.board.isFieldTakenByEnemy(i-1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i-1,s+1))):(this.board.isFieldTakenByEnemy(i+1,s-1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s-1)),this.board.isFieldTakenByEnemy(i+1,s+1,this.color===p.WHITE?p.BLACK:p.WHITE)&&n.push(new b(i+1,s+1))),this.board.enPassantPoint&&this.board.enPassantPiece.color===(this.color===p.WHITE?p.BLACK:p.WHITE)&&i===this.board.enPassantPiece.point.row&&1===Math.abs(this.board.enPassantPiece.point.col-s)&&n.push(this.board.enPassantPoint),n}getCoveredFields(){const n=[],i=this.point.row,s=this.point.col;return!this.board.reverted&&this.color===p.WHITE||this.board.reverted&&this.color===p.BLACK?(n.push(new b(i-1,s-1)),n.push(new b(i-1,s+1))):(n.push(new b(i+1,s-1)),n.push(new b(i+1,s+1))),n}}class qe extends Wt{constructor(n,i,s,o){super(n,i,s,9,o)}getPossibleMoves(){const n=[],i=this.point.row,s=this.point.col;for(let o=i-1,c=s-1;o>=0&&c>=0&&this.board.isFieldEmpty(o,c);--o,--c)n.push(new b(o,c));for(let o=i-1,c=s+1;o>=0&&c<8&&this.board.isFieldEmpty(o,c);--o,++c)n.push(new b(o,c));for(let o=i+1,c=s-1;o<8&&c>=0&&this.board.isFieldEmpty(o,c);++o,--c)n.push(new b(o,c));for(let o=i+1,c=s+1;o<8&&c<8&&this.board.isFieldEmpty(o,c);++o,++c)n.push(new b(o,c));for(let o=i+1;o<8&&this.board.isFieldEmpty(o,s);++o)n.push(new b(o,s));for(let o=i-1;o>=0&&this.board.isFieldEmpty(o,s);--o)n.push(new b(o,s));for(let o=s-1;o>=0&&this.board.isFieldEmpty(i,o);--o)n.push(new b(i,o));for(let o=s+1;o<8&&this.board.isFieldEmpty(i,o);++o)n.push(new b(i,o));return n}getPossibleCaptures(){const n=[],i=this.point.row,s=this.point.col;for(let o=i-1,c=s-1;o>=0&&c>=0;--o,--c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i-1,c=s+1;o>=0&&c<8;--o,++c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i+1,c=s-1;o<8&&c>=0;++o,--c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i+1,c=s+1;o<8&&c<8;++o,++c){if(this.board.isFieldTakenByEnemy(o,c,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,c));break}if(!this.board.isFieldEmpty(o,c))break}for(let o=i+1;o<8;++o){if(this.board.isFieldTakenByEnemy(o,s,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,s));break}if(!this.board.isFieldEmpty(o,s))break}for(let o=i-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(o,s,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(o,s));break}if(!this.board.isFieldEmpty(o,s))break}for(let o=s-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(i,o,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(i,o));break}if(!this.board.isFieldEmpty(i,o))break}for(let o=s+1;o<8;++o){if(this.board.isFieldTakenByEnemy(i,o,this.color===p.WHITE?p.BLACK:p.WHITE)){n.push(new b(i,o));break}if(!this.board.isFieldEmpty(i,o))break}return n}getCoveredFields(){const n=[],i=this.point.row,s=this.point.col;for(let o=i+1;o<8;++o){if(!this.board.isFieldEmpty(o,s)){this.board.getPieceByField(o,s)instanceof q||n.push(new b(o,s));break}n.push(new b(o,s))}for(let o=i-1;o>=0;--o){if(!this.board.isFieldEmpty(o,s)){this.board.getPieceByField(o,s)instanceof q||n.push(new b(o,s));break}n.push(new b(o,s))}for(let o=s-1;o>=0;--o){if(!this.board.isFieldEmpty(i,o)){this.board.getPieceByField(i,o)instanceof q||n.push(new b(i,o));break}n.push(new b(i,o))}for(let o=s+1;o<8;++o){if(!this.board.isFieldEmpty(i,o)){this.board.getPieceByField(i,o)instanceof q||n.push(new b(i,o));break}n.push(new b(i,o))}for(let o=i-1,c=s-1;o>=0&&c>=0;--o,--c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}for(let o=i-1,c=s+1;o>=0&&c<8;--o,++c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}for(let o=i+1,c=s-1;o<8&&c>=0;++o,--c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}for(let o=i+1,c=s+1;o<8&&c<8;++o,++c){if(!this.board.isFieldEmpty(o,c)){this.board.getPieceByField(o,c)instanceof q||n.push(new b(o,c));break}n.push(new b(o,c))}return n}}const k={WHITE_KING:{name:"King",icon:"&#x2654;"},WHITE_QUEEN:{name:"Queen",icon:"&#x2655;"},WHITE_KNIGHT:{name:"Knight",icon:"&#x2658"},WHITE_ROOK:{name:"Rook",icon:"&#x2656"},WHITE_PAWN:{name:"Pawn",icon:"&#x2659"},WHITE_BISHOP:{name:"Bishop",icon:"&#x2657"},BLACK_KING:{name:"King",icon:"&#x265A"},BLACK_QUEEN:{name:"Queen",icon:"&#x265B"},BLACK_KNIGHT:{name:"Knight",icon:"&#x265E"},BLACK_ROOK:{name:"Rook",icon:"&#x265C"},BLACK_PAWN:{name:"Pawn",icon:"&#x265F"},BLACK_BISHOP:{name:"Bishop",icon:"&#x265D"}};class Fn{process(n,i){let s=n;if(!n)throw Error("Incorrect FEN provided");{i.board.reverted=!1,i.board.pieces=[];const o=s.split("/");for(let c=0;c<8;++c){let _=0;for(let C=0;C<o[c].split(" ")[0].length;++C){const y=o[c].charAt(C);if(y.match(/[0-9]/))_+=Number(y);else{switch(y){case"r":i.board.pieces.push(new oe(new b(c,_),p.BLACK,k.BLACK_ROOK,i.board));break;case"n":i.board.pieces.push(new ye(new b(c,_),p.BLACK,k.BLACK_KNIGHT,i.board));break;case"b":i.board.pieces.push(new Ee(new b(c,_),p.BLACK,k.BLACK_BISHOP,i.board));break;case"q":i.board.pieces.push(new qe(new b(c,_),p.BLACK,k.BLACK_QUEEN,i.board));break;case"k":i.board.pieces.push(new q(new b(c,_),p.BLACK,k.BLACK_KING,i.board));break;case"p":{const D=new ee(new b(c,_),p.BLACK,k.BLACK_PAWN,i.board);(D.color===p.BLACK&&1!==D.point.row||D.color===p.WHITE&&6!==D.point.row)&&(D.isMovedAlready=!0),i.board.pieces.push(D);break}case"R":i.board.pieces.push(new oe(new b(c,_),p.WHITE,k.WHITE_ROOK,i.board));break;case"N":i.board.pieces.push(new ye(new b(c,_),p.WHITE,k.WHITE_KNIGHT,i.board));break;case"B":i.board.pieces.push(new Ee(new b(c,_),p.WHITE,k.WHITE_BISHOP,i.board));break;case"Q":i.board.pieces.push(new qe(new b(c,_),p.WHITE,k.WHITE_QUEEN,i.board));break;case"K":i.board.pieces.push(new q(new b(c,_),p.WHITE,k.WHITE_KING,i.board));break;case"P":{const D=new ee(new b(c,_),p.WHITE,k.WHITE_PAWN,i.board);(D.color===p.BLACK&&1!==D.point.row||D.color===p.WHITE&&6!==D.point.row)&&(D.isMovedAlready=!0),i.board.pieces.push(D);break}}++_}}}this.setCurrentPlayer(i.board,s),this.setCastles(i.board,s),this.setEnPassant(s),this.setFullMoveCount(s),i.board.fen=s}}setCurrentPlayer(n,i){if(i){const s=i.split(" ");n.currentWhitePlayer="w"===s[1]}}setCastles(n,i){if(i){const o=i.split(" ")[2];o.includes("K")||this.setRookAlreadyMoved(n,p.WHITE,7),o.includes("Q")||this.setRookAlreadyMoved(n,p.WHITE,0),o.includes("k")||this.setRookAlreadyMoved(n,p.BLACK,7),o.includes("q")||this.setRookAlreadyMoved(n,p.BLACK,0)}}setFullMoveCount(n){}setEnPassant(n){!n||n.split(" ")}setRookAlreadyMoved(n,i,s){const o=n.pieces.find(c=>c.color===i&&c instanceof oe&&c.point.col===s);o&&(o.isMovedAlready=!0)}}class es{constructor(n,i,s){this._xAxis=n,this._yAxis=i,this._reverted=s}get xAxis(){return this._xAxis}set xAxis(n){this._xAxis=n}get yAxis(){return this._yAxis}set yAxis(n){this._yAxis=n}get reverted(){return this._reverted}set reverted(n){this._reverted=n}}class R{static willMoveCauseCheck(n,i,s,o,c,_){const C=_.getPieceByField(i,s),y=_.getPieceByField(o,c);C&&(C.point.row=o,C.point.col=c),y&&(_.pieces=_.pieces.filter(M=>M!==y));const D=_.isKingInCheck(n,_.pieces);return C&&(C.point.col=s,C.point.row=i),y&&_.pieces.push(y),D}static format(n,i,s){if(s){const c=104-i.col;return String.fromCharCode(104-n.col)+(n.row+1)+String.fromCharCode(c)+(i.row+1)}{const o=97;return String.fromCharCode(n.col+o)+(Math.abs(n.row-7)+1)+String.fromCharCode(i.col+o)+(Math.abs(i.row-7)+1)}}static translateCoordsToIndex(n,i){let s,o;return i?(s=104-n.charCodeAt(0),o=+n.charAt(1)-1):(s=n.charCodeAt(0)-97,o=Math.abs(+n.charAt(1)-8)),new es(s,o,i)}static findPieceByPossibleMovesContaining(n,i,s){let o=this.translateCoordsToIndex(n,i.reverted),c=new b(o.yAxis,o.xAxis),_=[];for(let C of i.pieces.filter(y=>y.color===s))for(let y of C.getPossibleMoves())!R.willMoveCauseCheck(C.color,C.point.row,C.point.col,o.yAxis,o.xAxis,i)&&y.isEqual(c)&&_.push(C);return _}static findPieceByPossibleCapturesContaining(n,i,s){let o=this.translateCoordsToIndex(n,i.reverted),c=new b(o.yAxis,o.xAxis),_=[];for(let C of i.pieces.filter(y=>y.color===s))for(let y of C.getPossibleCaptures())!R.willMoveCauseCheck(C.color,C.point.row,C.point.col,o.yAxis,o.xAxis,i)&&y.isEqual(c)&&_.push(C);return _}static formatSingle(n,i){return i?String.fromCharCode(104-n.col)+(n.row+1):String.fromCharCode(n.col+97)+(Math.abs(n.row-7)+1)}static getFirstLetterPiece(n){return n instanceof ee?"P":n instanceof ye?"N":n instanceof Ee?"B":n instanceof oe?"R":n instanceof q?"K":n instanceof qe?"Q":""}static reverse(n,i){return n.reverted?i+1:Math.abs(i-7)+1}static formatCol(n,i){return String.fromCharCode(n.reverted?104-i:97+i)}}class $i{static loadDefaultPieces(n){n.pieces=[];for(let i=0;i<8;++i)n.pieces.push(new ee(new b(1,i),p.BLACK,k.BLACK_PAWN,n));n.pieces.push(new oe(new b(0,0),p.BLACK,k.BLACK_ROOK,n)),n.pieces.push(new ye(new b(0,1),p.BLACK,k.BLACK_KNIGHT,n)),n.pieces.push(new Ee(new b(0,2),p.BLACK,k.BLACK_BISHOP,n)),n.pieces.push(new qe(new b(0,3),p.BLACK,k.BLACK_QUEEN,n)),n.pieces.push(new q(new b(0,4),p.BLACK,k.BLACK_KING,n)),n.pieces.push(new Ee(new b(0,5),p.BLACK,k.BLACK_BISHOP,n)),n.pieces.push(new ye(new b(0,6),p.BLACK,k.BLACK_KNIGHT,n)),n.pieces.push(new oe(new b(0,7),p.BLACK,k.BLACK_ROOK,n));for(let i=0;i<8;++i)n.pieces.push(new ee(new b(6,i),p.WHITE,k.WHITE_PAWN,n));n.pieces.push(new oe(new b(7,0),p.WHITE,k.WHITE_ROOK,n)),n.pieces.push(new ye(new b(7,1),p.WHITE,k.WHITE_KNIGHT,n)),n.pieces.push(new Ee(new b(7,2),p.WHITE,k.WHITE_BISHOP,n)),n.pieces.push(new qe(new b(7,3),p.WHITE,k.WHITE_QUEEN,n)),n.pieces.push(new q(new b(7,4),p.WHITE,k.WHITE_KING,n)),n.pieces.push(new Ee(new b(7,5),p.WHITE,k.WHITE_BISHOP,n)),n.pieces.push(new ye(new b(7,6),p.WHITE,k.WHITE_KNIGHT,n)),n.pieces.push(new oe(new b(7,7),p.WHITE,k.WHITE_ROOK,n)),n.calculateFEN()}}class On{process(n,i){if(n){i.board.reverted=!1,i.board.pieces=[],i.reset(),$i.loadDefaultPieces(i.board);let s=this.extractMoves(n),o=-1;for(let c of s){++o,c=c.replace(/[+#]/g,"");let _="";c.includes("=")&&(_=this.resolvePromotion(c.substring(c.length-1)),c=c.substring(0,c.length-2));let C=0===o||o%2==0?p.WHITE:p.BLACK;if(/^[a-z]\d$/g.test(c)){let y=R.findPieceByPossibleMovesContaining(c,i.board,C).find(D=>D instanceof ee);y||(y=R.findPieceByPossibleCapturesContaining(c,i.board,C).find(D=>D instanceof ee)),y&&i.move(R.formatSingle(y.point,!1)+c+_)}else if(/^[A-Z][a-h]\d$/g.test(c)){let D=R.findPieceByPossibleMovesContaining(c.substring(1),i.board,C).find(M=>this.resolvePieceByFirstChar(c.charAt(0),M));D&&i.move(R.formatSingle(D.point,!1)+c.substring(1)+_)}else if("O-O"===c)i.move(C===p.WHITE?"e1g1":"e8g8");else if(/^[a-z]x[a-z]\d$/g.test(c)){let D,y=R.findPieceByPossibleCapturesContaining(c.substring(c.indexOf("x")+1),i.board,C).filter(M=>M instanceof ee);D=y.length>1?this.resolveByCol(y,c.substring(0,1)):y[0],D&&i.move(R.formatSingle(D.point,!1)+c.substring(c.indexOf("x")+1)+_)}else if(/^[A-Z]x[a-z]\d$/g.test(c)){let y=R.findPieceByPossibleCapturesContaining(c.substring(c.indexOf("x")+1),i.board,C).find(D=>this.resolvePieceByFirstChar(c.substring(0,1),D));y&&i.move(R.formatSingle(y.point,!1)+c.substring(c.indexOf("x")+1)+_)}else if("O-O-O"===c)i.move(C===p.WHITE?"e1c1":"e8c8");else if(/^[A-Z]\dx[a-z]\d$/g.test(c)){let y=R.findPieceByPossibleCapturesContaining(c.substring(c.indexOf("x")+1),i.board,C).filter(M=>this.resolvePieceByFirstChar(c.charAt(0),M)),D=this.resolveByRow(y,c.substring(1,2));D&&i.move(R.formatSingle(D.point,!1)+c.substring(c.indexOf("x")+1)+_)}else if(/^[A-Z][a-z][a-z]\d$/g.test(c)){let y=R.findPieceByPossibleMovesContaining(c.substring(2,4),i.board,C).filter(M=>this.resolvePieceByFirstChar(c.charAt(0),M)),D=this.resolveByCol(y,c.substring(1,2));D&&i.move(R.formatSingle(D.point,!1)+c.substring(2,4)+_)}else if(/^[A-Z][a-z]x[a-z]\d$/g.test(c)){let y=R.findPieceByPossibleCapturesContaining(c.substring(c.indexOf("x")+1),i.board,C).filter(M=>this.resolvePieceByFirstChar(c.charAt(0),M)),D=this.resolveByCol(y,c.substring(1,2));D&&i.move(R.formatSingle(D.point,!1)+c.substring(c.indexOf("x")+1)+_)}else this.processR1f2(c,i,C,_)}}}processR1f2(n,i,s,o){if(/^[A-Z]\d[a-z]\d$/g.test(n)){let c=R.findPieceByPossibleMovesContaining(n.substring(2,4),i.board,s).filter(C=>this.resolvePieceByFirstChar(n.charAt(0),C)),_=this.resolveByRow(c,n.substring(1,2));_&&i.move(R.formatSingle(_.point,!1)+n.substring(2,4)+o)}}extractMoves(n){return n.substring(n.lastIndexOf("]")+1).replace(/[0-9]+\./g,"").replace(/\s+/g," ").replace(/{[^}]*}/g,"").trim().split(" ").filter(i=>i)}movePiece(n,i,s){let o=R.translateCoordsToIndex(s,i.reverted);n.point.col=o.xAxis,n.point.row=o.yAxis}hasUpperCase(n){return/[A-Z]/.test(n)}resolvePieceByFirstChar(n,i){let s="";return i instanceof q?s="K":i instanceof qe?s="Q":i instanceof oe?s="R":i instanceof Ee?s="B":i instanceof ye?s="N":i instanceof ee&&(s="P"),n===s}isShortCastle(n){return"O-O"===n}removePiece(n,i){let s=R.translateCoordsToIndex(n,i.reverted);i.pieces=i.pieces.filter(o=>!o.point.isEqual(new b(s.yAxis,s.xAxis)))}isLongCastle(n){return"O-O-O"===n}resolveByCol(n,i){let s=R.formatSingle(n[0].point,!1);return R.formatSingle(n[1].point,!1),s.substring(0,1)===i?n[0]:n[1]}resolveByRow(n,i){let s=R.formatSingle(n[0].point,!1);return R.formatSingle(n[1].point,!1),s.substring(1,2)===i?n[0]:n[1]}replacePromotion(n){return n.replace("=Q","1").replace("=R","2").replace("=B","3").replace("=K","4")}resolvePromotion(n){switch(n){case"Q":return"1";case"R":return"2";case"B":return"3";case"N":return"4"}return""}}class Ci{static getProcessor(n){switch(n){case Ct.FEN:return new Fn;case Ct.PGN:return new On}}static getDefaultProcessor(){return new Fn}}var Ct=(()=>{return(f=Ct||(Ct={}))[f.FEN=1]="FEN",f[f.PGN=2]="PGN",Ct;var f})();class ts{constructor(n,i,s){this.x=n+.5,this.y=i+.5,this.color=s}isEqual(n){return n&&n.x===this.x&&this.y===n.y}}class Yi{static getClickPoint(n,i,s,o,c){return new b(Math.floor((n.y-i)/(s/8)),Math.floor((n.x-o)/(c/8)))}static getDrawingPoint(n,i,s,o,c,_,C,y,D){const M=n/8,ae=Math.floor((s-y)/M),$=Math.floor((o-D)/M);let dt=i.resolve(c,C,_);return new ts(Math.floor(ae*M+M/2),Math.floor($*M+M/2),dt)}}class is{constructor(n,i,s,o){this.move=n,this.piece=i,this.color=s,this.x=o}setGameStates(n,i,s){this.check=n,this.stalemate=i,this.mate=s}}class Hn{constructor(){this.historyMovesSubject$=new wi.X([])}get historyMoves(){return this.historyMovesSubject$.value}set historyMoves(n){this.historyMovesSubject$.next(n)}addMove(n){this.historyMoves=[...this.historyMoves,n]}pop(){const n=this.getLastMove();return this.historyMoves=this.historyMoves.filter(i=>i!==n),n}getAll(){return this.historyMoves}clear(){this.historyMoves=[]}getLastMove(){return this.historyMoves[this.getLastMoveIndex()]}getLastMoveIndex(){return this.historyMoves.length-1}}let $e=(()=>{class f{}return f.DEFAULT_DARK_TILE_COLOR="rgb(97, 84, 61)",f.DEFAULT_LIGHT_TILE_COLOR="#BAA378",f.DEFAULT_SIZE=500,f.MIN_BOARD_SIZE=100,f.MAX_BOARD_SIZE=4e3,f.DEFAULT_SOURCE_POINT_COLOR="rgba(146, 111, 26, 0.79)",f.DEFAULT_DESTINATION_POINT_COLOR="#b28e1a",f.DEFAULT_LEGAL_MOVE_POINT_COLOR="radial-gradient(#13262F 15%, transparent 20%);",f})();class Wn{constructor(){this._defaultIcons=!1}get pieceIconInput(){return this._pieceIconInput}set pieceIconInput(n){this._pieceIconInput=n}get defaultIcons(){return this._defaultIcons}set defaultIcons(n){this._defaultIcons=n}isDefaultIcons(){return null==this.pieceIconInput}getPieceIcon(n){let i=n.color===p.WHITE;switch(n.constructor){case q:return i?this.pieceIconInput.whiteKingUrl:this.pieceIconInput.blackKingUrl;case qe:return i?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;case oe:return i?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;case Ee:return i?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;case ye:return i?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl;case ee:return i?this.pieceIconInput.whitePawnUrl:this.pieceIconInput.blackPawnUrl}}loadDefaultData(){this.pieceIconInput={blackBishopUrl:"",blackKingUrl:"",blackKnightUrl:"",blackQueenUrl:"",blackRookUrl:"",whiteBishopUrl:"",whiteKingUrl:"",whiteKnightUrl:"",whitePawnUrl:"",whiteQueenUrl:"",whiteRookUrl:"",blackPawnUrl:"a"}}}class Qi{constructor(){this.defaultXCoords=["a","b","c","d","e","f","g","h"],this.defaultYCoords=[8,7,6,5,4,3,2,1],this.currentXCoords=[...this.defaultXCoords],this.currentYCoords=[...this.defaultYCoords]}get xCoords(){return this.currentXCoords}get yCoords(){return this.currentYCoords}reverse(){this.currentXCoords=this.currentXCoords.reverse(),this.currentYCoords=this.currentYCoords.reverse()}reset(){this.init()}init(){this.currentXCoords=[...this.defaultXCoords],this.currentYCoords=[...this.defaultYCoords]}}class ns{dragEnded(n,i,s){i||s&&(n.source._dragRef.getRootElement().style.transform=s)}}class Kn{constructor(){this.dragEndProcessor=new ns}process(n,i,s){this.dragEndProcessor.dragEnded(n,i,s)}setDragEndProcessor(n){this.dragEndProcessor=n}}class Pi{dragStarted(n){const i=n.source.getRootElement().style;i.zIndex="1000",i.position="absolute"}}class Nn{constructor(){this.dragStartProcessor=new Pi}process(n){this.dragStartProcessor.dragStarted(n)}setDragStartProcessor(n){this.dragStartProcessor=n}}class rs{resolve(n,i,s){let o="green";return(n||i)&&(o="red"),s&&(o="blue"),(i||n)&&s&&(o="orange"),o}}class Un{constructor(){this.colorProcessor=new rs}resolve(n,i,s){return this.colorProcessor.resolve(n,i,s)}setColorProcessor(n){this.colorProcessor=n}}class Gn{constructor(){this.arrowsSubject$=new wi.X([]),this.circlesSubject$=new wi.X([]),this.arrows$=this.arrowsSubject$.asObservable(),this.circles$=this.circlesSubject$.asObservable()}get circles(){return this.circlesSubject$.value}set circles(n){this.circlesSubject$.next(n)}get arrows(){return this.arrowsSubject$.value}set arrows(n){this.arrowsSubject$.next(n)}addCircle(n){this.circles=[...this.circles,n]}reomveCircle(n){this.circles=this.circles.filter(i=>!i.isEqual(n))}addArrow(n){this.arrows=[...this.arrows,n]}removeArrow(n){this.arrows=this.arrows.filter(i=>!i.isEqual(n))}containsCircle(n){return this.circles.some(i=>i.isEqual(n))}containsArrow(n){return this.arrows.some(i=>i.isEqual(n))}clear(){this.arrows=[],this.circles=[]}}class ss extends class Ji{constructor(){this.pgn="",this.currentIndex=.5}getPGN(){return this.pgn}processChecks(n,i,s){n?this.pgn+="#":i&&(this.pgn+="+")}reset(){this.pgn="",this.currentIndex=.5}addPromotionChoice(n){switch(n){case 1:this.pgn+="=Q";break;case 2:this.pgn+="=R";break;case 3:this.pgn+="=B";break;case 4:this.pgn+="=N"}}removeLast(){if(this.currentIndex>=.5){this.currentIndex-=.5;const n=new RegExp(/\d+\./g);n.test(this.pgn),this.pgn=this.pgn.substring(0,n.lastIndex).trim()}}}{process(n,i,s,o){this.currentIndex+=.5,this.pgn+=this.currentIndex%Math.floor(this.currentIndex)==0?" "+this.currentIndex+". ":" ";let c=[],_=[];o&&(c=R.findPieceByPossibleCapturesContaining(R.formatSingle(s,n.reverted),n,i.color).filter(C=>C.constructor.name===i.constructor.name)),_=R.findPieceByPossibleMovesContaining(R.formatSingle(s,n.reverted),n,i.color).filter(C=>C.constructor.name===i.constructor.name),i instanceof ee&&!o&&0===c.length?this.pgn+=R.formatSingle(s,n.reverted):i instanceof ee&&o?this.pgn+=R.formatSingle(i.point,n.reverted).substring(0,1)+"x"+R.formatSingle(s,n.reverted):i instanceof q&&2===Math.abs(i.point.col-s.col)?this.pgn+=n.reverted?s.col<2?"O-O":"O-O-O":s.col<3?"O-O-O":"O-O":!(i instanceof ee)&&0===c.length&&_.length<2?this.pgn+=R.getFirstLetterPiece(i)+R.formatSingle(s,n.reverted):_&&2===_.length&&0===c.length?this.isEqualByCol(_[0],_[1])?this.pgn+=R.getFirstLetterPiece(i)+R.reverse(n,i.point.row)+R.formatSingle(s,n.reverted):this.pgn+=R.getFirstLetterPiece(i)+R.formatCol(n,i.point.col)+R.formatSingle(s,n.reverted):c.length>1?this.isEqualByCol(c[0],c[1])?this.pgn+=R.getFirstLetterPiece(i)+R.reverse(n,i.point.row)+"x"+R.formatSingle(s,n.reverted):this.pgn+=R.getFirstLetterPiece(i)+R.formatCol(n,i.point.col)+"x"+R.formatSingle(s,n.reverted):this.pgn+=R.getFirstLetterPiece(i)+"x"+R.formatSingle(s,n.reverted),this.pgn=this.pgn.trim()}resolvePieceByFirstChar(n,i){return R.getFirstLetterPiece(i)===n}isEqualByCol(n,i){return n.point.col===i.point.col}}class Xi{constructor(n,i){this.engineFacade=n,this.notationProcessor=i||Ci.getDefaultProcessor()}addPieces(){$i.loadDefaultPieces(this.engineFacade.board)}loadFEN(n){this.notationProcessor.process(n,this.engineFacade)}loadPGN(n){this.notationProcessor.process(n,this.engineFacade)}setEngineFacade(n){this.engineFacade=n}setNotationProcessor(n){this.notationProcessor=n}}class Ei{constructor(n){this.board=n}}class Kt{constructor(){this.statesSubject$=new wi.X([])}get states(){return this.statesSubject$.value}set states(n){this.statesSubject$.next(n)}addMove(n){this.states=[...this.states,n]}getStates(){return this.states}pop(){const n=this.getLastState();return this.states=this.states.filter(i=>i!==n),n}isEmpty(){return 0===this.states.length}clear(){this.states=[]}getLastState(){return this.states[this.getLastStateIndex()]}getLastStateIndex(){return this.states.length-1}}class Zn{isEqual(n){return n&&this.start.isEqual(n.start)&&this.end.isEqual(n.end)}}class qn{isEqual(n){return n&&this.drawPoint.isEqual(n.drawPoint)}}class Vi extends class os{constructor(n){this.piece=n}}{constructor(n,i,s,o){super(n),this.pointClicked=i,this.color=s,this.board=o}getPossibleCaptures(){return this.piece.getPossibleCaptures().filter(n=>!R.willMoveCauseCheck(this.color,this.pointClicked.row,this.pointClicked.col,n.row,n.col,this.board))}getPossibleMoves(){return this.piece.getPossibleMoves().filter(n=>!R.willMoveCauseCheck(this.color,this.pointClicked.row,this.pointClicked.col,n.row,n.col,this.board))}}class ji{static resolvePromotionChoice(n,i,s){const o=i.color===p.WHITE;switch(s){case 1:n.pieces.push(new qe(i.point,i.color,o?k.WHITE_QUEEN:k.BLACK_QUEEN,n));break;case 2:n.pieces.push(new oe(i.point,i.color,o?k.WHITE_ROOK:k.BLACK_ROOK,n));break;case 3:n.pieces.push(new Ee(i.point,i.color,o?k.WHITE_BISHOP:k.BLACK_BISHOP,n));break;case 4:n.pieces.push(new ye(i.point,i.color,o?k.WHITE_KNIGHT:k.BLACK_KNIGHT,n))}}}var Ye=(()=>{return(f=Ye||(Ye={}))[f.KING=1]="KING",f[f.QUEEN=2]="QUEEN",f[f.BISHOP=3]="BISHOP",f[f.KNIGHT=4]="KNIGHT",f[f.ROOK=5]="ROOK",f[f.PAWN=6]="PAWN",Ye;var f})(),ii=(()=>{return(f=ii||(ii={}))[f.LIGHT=1]="LIGHT",f[f.DARK=2]="DARK",ii;var f})();class ls extends class zn{constructor(n){this.dragStartStrategy=new Nn,this.dragEndStrategy=new Kn,this.pgnProcessor=new ss,this.colorStrategy=new Un,this.coords=new Qi,this.heightAndWidth=$e.DEFAULT_SIZE,this.freeMode=!1,this.drawProvider=new Gn,this.pieceIconManager=new Wn,this.moveHistoryProvider=new Hn,this.disabling=!1,this.board=n}checkIfPawnFirstMove(n){n instanceof ee&&(n.isMovedAlready=!0)}checkIfRookMoved(n){n instanceof oe&&(n.isMovedAlready=!0)}checkIfKingMoved(n){n instanceof q&&(n.isMovedAlready=!0)}getMoveHistory(){return this.moveHistoryProvider.getAll()}}{constructor(n,i){super(n),this._selected=!1,this.moveChange=i,this.boardLoader=new Xi(this),this.boardLoader.addPieces(),this.boardStateProvider=new Kt}reset(){this.boardStateProvider.clear(),this.moveHistoryProvider.clear(),this.boardLoader.addPieces(),this.board.reset(),this.coords.reset(),this.drawProvider.clear(),this.pgnProcessor.reset()}undo(){if(!this.boardStateProvider.isEmpty()){const n=this.boardStateProvider.pop().board;this.board.reverted&&n.reverse(),this.board=n,this.board.possibleCaptures=[],this.board.possibleMoves=[],this.board.activePiece=null,this.moveHistoryProvider.pop(),this.board.calculateFEN(),this.pgnProcessor.removeLast()}}saveMoveClone(){const n=this.board.clone();this.board.reverted&&n.reverse(),this.moveStateProvider.addMove(new Ei(n))}move(n){if(n){const i=R.translateCoordsToIndex(n.substring(0,2),this.board.reverted),s=R.translateCoordsToIndex(n.substring(2,4),this.board.reverted),o=this.board.getPieceByPoint(i.yAxis,i.xAxis);if(o){if(this.board.currentWhitePlayer&&o.color===p.BLACK||!this.board.currentWhitePlayer&&o.color===p.WHITE)return;this.prepareActivePiece(o,o.point),this.board.isPointInPossibleMoves(new b(s.yAxis,s.xAxis))||this.board.isPointInPossibleCaptures(new b(s.yAxis,s.xAxis))?(this.saveClone(),this.movePiece(o,new b(s.yAxis,s.xAxis),5===n.length?+n.substring(4,5):0),this.board.lastMoveSrc=new b(i.yAxis,i.xAxis),this.board.lastMoveDest=new b(s.yAxis,s.xAxis),this.disableSelection()):this.disableSelection()}}}prepareActivePiece(n,i){this.board.activePiece=n,this._selected=!0,this.board.possibleCaptures=new Vi(n,i,this.board.currentWhitePlayer?p.WHITE:p.BLACK,this.board).getPossibleCaptures(),this.board.possibleMoves=new Vi(n,i,this.board.currentWhitePlayer?p.WHITE:p.BLACK,this.board).getPossibleMoves()}onPieceClicked(n,i){this.board.currentWhitePlayer&&n.color===p.BLACK||!this.board.currentWhitePlayer&&n.color===p.WHITE||this.prepareActivePiece(n,i)}handleClickEvent(n,i){let s=!1;(this.board.isPointInPossibleMoves(n)||this.board.isPointInPossibleCaptures(n)||this.freeMode)&&n.isInRange()&&(this.saveClone(),this.board.lastMoveSrc=new b(this.board.activePiece.point.row,this.board.activePiece.point.col),this.board.lastMoveDest=n.clone(),this.movePiece(this.board.activePiece,n),this.board.activePiece.point.isEqual(this.board.lastMoveSrc)||(s=!0)),(i||s)&&this.disableSelection(),this.disableSelection();const o=this.board.getPieceByPoint(n.row,n.col);o&&!s&&(this.onFreeMode(o),this.onPieceClicked(o,n))}onMouseDown(n,i,s,o){if(this.moveDone=!1,0!==n.button)return void(this.drawPoint=Yi.getDrawingPoint(this.heightAndWidth,this.colorStrategy,n.x,n.y,n.ctrlKey,n.altKey,n.shiftKey,s,o));if(this.drawProvider.clear(),this.board.activePiece&&i.isEqual(this.board.activePiece.point))return void(this.disabling=!0);const c=this.board.getPieceByPoint(i.row,i.col);if(this.freeMode&&c){if(n.ctrlKey)return void(this.board.pieces=this.board.pieces.filter(_=>_!==c));this.board.currentWhitePlayer=c.color===p.WHITE}this.isPieceDisabled(c)||(this._selected?this.handleClickEvent(i,!0):c&&(this.onFreeMode(c),this.onPieceClicked(c,i)))}onMouseUp(n,i,s,o){if(this.moveDone=!1,0!==n.button&&!this.drawDisabled)return void this.addDrawPoint(n.x,n.y,n.ctrlKey,n.altKey,n.shiftKey,s,o);if(this.drawProvider.clear(),this.dragDisabled)return;if(this.board.activePiece&&i.isEqual(this.board.activePiece.point)&&this.disabling)return this.disableSelection(),void(this.disabling=!1);const c=this.board.getPieceByPoint(i.row,i.col);this.isPieceDisabled(c)||this._selected&&this.handleClickEvent(i,!1)}saveClone(){const n=this.board.clone();this.board.reverted&&n.reverse(),this.boardStateProvider.addMove(new Ei(n))}movePiece(n,i,s){const o=this.board.pieces.find(c=>c.point.col===i.col&&c.point.row===i.row);if(this.pgnProcessor.process(this.board,n,i,o),o&&n.color!==o.color)this.board.pieces=this.board.pieces.filter(c=>c!==o);else if(o&&n.color===o.color)return;if(this.historyMoveCandidate=new is(R.format(n.point,i,this.board.reverted),n.constant.name,n.color===p.WHITE?"white":"black",!!o),this.moveHistoryProvider.addMove(this.historyMoveCandidate),n instanceof q&&Math.abs(i.col-n.point.col)>1)if(i.col<3){const _=this.board.getPieceByField(n.point.row,0);this.freeMode||(_.point.col=this.board.reverted?2:3)}else{const _=this.board.getPieceByField(n.point.row,7);this.freeMode||(_.point.col=this.board.reverted?4:5)}n instanceof ee?(this.board.checkIfPawnTakesEnPassant(i),this.board.checkIfPawnEnpassanted(n,i)):(this.board.enPassantPoint=null,this.board.enPassantPiece=null),n.point=i,this.increaseFullMoveCount(),this.board.currentWhitePlayer=!this.board.currentWhitePlayer,this.checkForPawnPromote(n,s)||this.afterMoveActions()}checkForPawnPromote(n,i){if(n instanceof ee&&(0===n.point.row||7===n.point.row))return this.board.pieces=this.board.pieces.filter(s=>s!==n),i?(ji.resolvePromotionChoice(this.board,n,i),this.afterMoveActions(i)):this.openPromoteDialog(n),!0}afterMoveActions(n){this.checkIfPawnFirstMove(this.board.activePiece),this.checkIfRookMoved(this.board.activePiece),this.checkIfKingMoved(this.board.activePiece),this.board.blackKingChecked=this.board.isKingInCheck(p.BLACK,this.board.pieces),this.board.whiteKingChecked=this.board.isKingInCheck(p.WHITE,this.board.pieces);const i=this.board.blackKingChecked||this.board.whiteKingChecked,s=this.checkForPossibleMoves(p.BLACK)||this.checkForPossibleMoves(p.WHITE),o=this.checkForPat(p.BLACK)||this.checkForPat(p.WHITE);this.historyMoveCandidate.setGameStates(i,o,s),this.pgnProcessor.processChecks(s,i,o),this.pgnProcessor.addPromotionChoice(n),this.disabling=!1,this.board.calculateFEN();const c=this.moveHistoryProvider.getLastMove();c&&n&&(c.move+=n),this.moveChange.emit(Object.assign(Object.assign({},c),{check:i,checkmate:s,stalemate:o,fen:this.board.fen,pgn:{pgn:this.pgnProcessor.getPGN()},freeMode:this.freeMode})),this.moveDone=!0}checkForPat(n){return n===p.WHITE&&!this.board.whiteKingChecked||n===p.BLACK&&!this.board.blackKingChecked?this.checkForPossibleMoves(n):void 0}openPromoteDialog(n){n.color===this.board.activePiece.color&&this.modal.open(i=>{ji.resolvePromotionChoice(this.board,n,i),this.afterMoveActions(i)})}checkForPossibleMoves(n){return!this.board.pieces.filter(i=>i.color===n).some(i=>i.getPossibleMoves().some(s=>!R.willMoveCauseCheck(n,i.point.row,i.point.col,s.row,s.col,this.board))||i.getPossibleCaptures().some(s=>!R.willMoveCauseCheck(n,i.point.row,i.point.col,s.row,s.col,this.board)))}disableSelection(){this._selected=!1,this.board.possibleCaptures=[],this.board.activePiece=null,this.board.possibleMoves=[]}onFreeMode(n){!this.freeMode||null==n||(this.board.currentWhitePlayer=n.color===p.WHITE)}isPieceDisabled(n){return!(n&&n.point&&this.board.possibleCaptures.find(s=>s.col===n.point.col&&s.row===n.point.row))&&n&&(this.lightDisabled&&n.color===p.WHITE||this.darkDisabled&&n.color===p.BLACK)}addDrawPoint(n,i,s,o,c,_,C){const y=Yi.getDrawingPoint(this.heightAndWidth,this.colorStrategy,n,i,s,o,c,_,C);if(this.drawPoint.isEqual(y)){const D=new qn;D.drawPoint=y,this.drawProvider.containsCircle(D)?this.drawProvider.reomveCircle(D):this.drawProvider.addCircle(D)}else{const D=new Zn;D.start=this.drawPoint,D.end=y,this.drawProvider.containsArrow(D)?this.drawProvider.removeArrow(D):this.drawProvider.addArrow(D)}}increaseFullMoveCount(){this.board.currentWhitePlayer||++this.board.fullMoveCount}addPiece(n,i,s){if(this.freeMode&&s&&n>0&&i>0){let o=R.translateCoordsToIndex(s,this.board.reverted),c=this.board.getPieceByPoint(o.yAxis,o.xAxis);c&&(this.board.pieces=this.board.pieces.filter(C=>C!==c));let _=class as{static create(n,i,s,o){let c,_=s===ii.LIGHT?p.WHITE:p.BLACK;switch(i){case Ye.QUEEN:c=new qe(new b(n.yAxis,n.xAxis),_,_===p.WHITE?k.WHITE_QUEEN:k.BLACK_QUEEN,o);break;case Ye.KING:c=new q(new b(n.yAxis,n.xAxis),_,_===p.WHITE?k.WHITE_KING:k.BLACK_KING,o);break;case Ye.KNIGHT:c=new ye(new b(n.yAxis,n.xAxis),_,_===p.WHITE?k.WHITE_KNIGHT:k.BLACK_KNIGHT,o);break;case Ye.BISHOP:c=new Ee(new b(n.yAxis,n.xAxis),_,_===p.WHITE?k.WHITE_BISHOP:k.BLACK_BISHOP,o);break;case Ye.ROOK:c=new oe(new b(n.yAxis,n.xAxis),_,_===p.WHITE?k.WHITE_ROOK:k.BLACK_ROOK,o);break;case Ye.PAWN:c=new ee(new b(n.yAxis,n.xAxis),_,_===p.WHITE?k.WHITE_PAWN:k.BLACK_PAWN,o)}return c}}.create(o,n,i,this.board);this.saveClone(),this.board.pieces.push(_),this.afterMoveActions()}}}class cs{constructor(){this.board=[],this.pieces=[],this.enPassantPoint=null,this.enPassantPiece=null,this.lastMoveSrc=null,this.lastMoveDest=null,this.possibleCaptures=[],this.possibleMoves=[],this.currentWhitePlayer=!0,this.reverted=!1,this.fullMoveCount=1;for(let n=0;n<8;++n){this.board[n]=[];for(let i=0;i<8;++i)this.board[n][i]=0}}isXYInPossibleMoves(n,i){return this.possibleMoves.some(s=>s.row===n&&s.col===i)}isXYInPossibleCaptures(n,i){return this.possibleCaptures.some(s=>s.row===n&&s.col===i)}isXYInSourceMove(n,i){return this.lastMoveSrc&&this.lastMoveSrc.row===n&&this.lastMoveSrc.col===i}isXYInDestMove(n,i){return this.lastMoveDest&&this.lastMoveDest.row===n&&this.lastMoveDest.col===i}isXYInActiveMove(n,i){return this.activePiece&&this.activePiece.point.row===n&&this.activePiece.point.col===i}isPointInPossibleMoves(n){return this.possibleMoves.some(i=>i.row===n.row&&i.col===n.col)}isPointInPossibleCaptures(n){return this.possibleCaptures.some(i=>i.row===n.row&&i.col===n.col)}reset(){this.lastMoveDest=null,this.lastMoveSrc=null,this.whiteKingChecked=!1,this.blackKingChecked=!1,this.possibleCaptures=[],this.possibleMoves=[],this.activePiece=null,this.reverted=!1,this.currentWhitePlayer=!0,this.enPassantPoint=null,this.enPassantPiece=null,this.fullMoveCount=1,this.calculateFEN()}reverse(){this.reverted=!this.reverted,this.activePiece=null,this.possibleMoves=[],this.possibleCaptures=[],this.pieces.forEach(n=>this.reversePoint(n.point)),this.reversePoint(this.lastMoveSrc),this.reversePoint(this.lastMoveDest),this.enPassantPoint&&this.enPassantPiece&&this.reversePoint(this.enPassantPoint)}clone(){return(0,Nr.cloneDeep)(this)}isFieldTakenByEnemy(n,i,s){return!(n>7||n<0||i>7||i<0)&&this.pieces.some(o=>o.point.col===i&&o.point.row===n&&o.color===s)}isFieldEmpty(n,i){return!(n>7||n<0||i>7||i<0||this.pieces.some(s=>s.point.col===i&&s.point.row===n))}isFieldUnderAttack(n,i,s){return this.pieces.filter(o=>o.color===s).some(o=>o.getCoveredFields().some(c=>c.col===i&&c.row===n))}getPieceByField(n,i){if(!this.isFieldEmpty(n,i))return this.pieces.find(s=>s.point.col===i&&s.point.row===n)}isKingInCheck(n,i){const s=i.find(o=>o.color===n&&o instanceof q);return!!s&&i.some(o=>o.getPossibleCaptures().some(c=>c.col===s.point.col&&c.row===s.point.row)&&o.color!==n)}getKingByColor(n){return this.pieces.find(i=>i instanceof q&&i.color===n)}getCastleFENString(n){const i=this.getKingByColor(n);if(!i||i.isMovedAlready)return"";let s="";const o=this.getPieceByField(i.point.row,0),c=this.getPieceByField(i.point.row,7);return c instanceof oe&&c.color===n&&(c.isMovedAlready||(s+=this.reverted?"q":"k")),o instanceof oe&&o.color===n&&(o.isMovedAlready||(s+=this.reverted?"k":"q")),s=s.split("").sort().join(""),n===p.BLACK?s:s.toUpperCase()}getEnPassantFENString(){return this.enPassantPoint?this.reverted?String.fromCharCode(104-this.enPassantPoint.col)+(this.enPassantPoint.row+1):String.fromCharCode(97+this.enPassantPoint.col)+(Math.abs(this.enPassantPoint.row-7)+1):"-"}calculateFEN(){let n="";for(let c=0;c<8;++c){let _=0;for(let C=0;C<8;++C){const y=this.pieces.find(D=>D.point.col===C&&D.point.row===c);y?(_>0&&(n+=_,_=0),y instanceof oe?n+=y.color===p.BLACK?"r":"R":y instanceof ye?n+=y.color===p.BLACK?"n":"N":y instanceof Ee?n+=y.color===p.BLACK?"b":"B":y instanceof qe?n+=y.color===p.BLACK?"q":"Q":y instanceof q?n+=y.color===p.BLACK?"k":"K":y instanceof ee&&(n+=y.color===p.BLACK?"p":"P")):++_}_>0&&(n+=_),n+="/"}n=n.substr(0,n.length-1),this.reverted&&(n=n.split("").reverse().join("")),n+=" "+(this.currentWhitePlayer?"w":"b");let o=this.getCastleFENString(p.WHITE)+this.getCastleFENString(p.BLACK);o||(o="-"),n+=" "+o,n+=" "+this.getEnPassantFENString(),n+=" 0",n+=" "+this.fullMoveCount,this.fen=n}isXYInPointSelection(n,i){return!1}reversePoint(n){n&&(n.row=Math.abs(n.row-7),n.col=Math.abs(n.col-7))}getPieceByPoint(n,i){return n=Math.floor(n),i=Math.floor(i),this.pieces.find(s=>s.point.col===i&&s.point.row===n)}checkIfPawnTakesEnPassant(n){n.isEqual(this.enPassantPoint)&&(this.pieces=this.pieces.filter(i=>i!==this.enPassantPiece),this.enPassantPoint=null,this.enPassantPiece=null)}checkIfPawnEnpassanted(n,i){Math.abs(n.point.row-i.row)>1?(this.enPassantPiece=n,this.enPassantPoint=new b((n.point.row+i.row)/2,n.point.col)):(this.enPassantPoint=null,this.enPassantPiece=null)}isKingChecked(n){if(n instanceof q)return n.color===p.WHITE?this.whiteKingChecked:this.blackKingChecked}getCurrentPlayerColor(){return this.currentWhitePlayer?p.WHITE:p.BLACK}}let en=(()=>{class f{constructor(){this.componentMethodCallSource=new ne.x,this.componentMethodCalled$=this.componentMethodCallSource.asObservable()}reset(){this.componentMethodCallSource.next()}}return f.\u0275fac=function(i){return new(i||f)},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})(),hs=(()=>{class f{constructor(){this.color="white",this.opened=!1}open(i){this.opened=!0,this.onCloseCallback=i,this.modal.nativeElement.style.display="block"}changeSelection(i){this.modal.nativeElement.style.display="none",this.opened=!1,this.onCloseCallback(i)}getPieceIcon(i){let s="";switch(i.toLowerCase()){case"queen":s="white"===this.color?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;break;case"rook":s="white"===this.color?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;break;case"bishop":s="white"===this.color?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;break;case"knight":s="white"===this.color?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl}return s}}return f.\u0275fac=function(i){return new(i||f)},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-piece-promotion-modal"]],viewQuery:function(i,s){if(1&i&&l.Gf(Bn,5),2&i){let o;l.iGM(o=l.CRH())&&(s.modal=o.first)}},inputs:{pieceIconInput:"pieceIconInput",color:"color"},decls:6,vars:2,consts:[[1,"container"],["myModal",""],[1,"wrapper"],[1,"content"],["class","piece-wrapper",4,"ngIf"],[1,"piece-wrapper"],[1,"piece",3,"click"],["alt","Queen",3,"src"],["alt","Rook",3,"src"],["alt","Bishop",3,"src"],["alt","Knight",3,"src"]],template:function(i,s){1&i&&(l.TgZ(0,"div",0,1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.YNc(4,Ur,9,4,"div",4),l.YNc(5,Gr,9,0,"div",4),l.qZA(),l.qZA(),l.qZA()),2&i&&(l.xp6(4),l.Q6J("ngIf",s.pieceIconInput),l.xp6(1),l.Q6J("ngIf",!s.pieceIconInput))},directives:[Ue.O5],styles:[".container[_ngcontent-%COMP%]{display:none;position:absolute;z-index:9999;top:0;color:#000;width:100%;height:100%;overflow:auto;background-color:#0006}.wrapper[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;position:relative;top:30%;font-size:100%;height:40%;padding:10px;border:1px solid #888;width:90%}.piece[_ngcontent-%COMP%]{font-size:5rem;height:100%;width:25%;cursor:pointer;display:inline-block;text-align:center}.piece[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.piece[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:5px}.piece-wrapper[_ngcontent-%COMP%]{height:80%;width:100%}#close-button[_ngcontent-%COMP%]{border-radius:4px;background-color:#4caf50;border:none;color:#fff;padding-left:5px;padding-right:5px;text-align:center;text-decoration:none;display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #00B919;border-radius:4px;box-sizing:border-box}"]}),f})(),us=(()=>{class f{constructor(i){this.ngxChessBoardService=i,this.darkTileColor=$e.DEFAULT_DARK_TILE_COLOR,this.lightTileColor=$e.DEFAULT_LIGHT_TILE_COLOR,this.showCoords=!0,this.sourcePointColor=$e.DEFAULT_SOURCE_POINT_COLOR,this.destinationPointColor=$e.DEFAULT_DESTINATION_POINT_COLOR,this.legalMovesPointColor=$e.DEFAULT_LEGAL_MOVE_POINT_COLOR,this.showLastMove=!0,this.showLegalMoves=!0,this.showActivePiece=!0,this.showPossibleCaptures=!0,this.moveChange=new l.vpe,this.checkmate=new l.vpe,this.stalemate=new l.vpe,this.selected=!1,this.isDragging=!1,this.startTransition="",this.engineFacade=new ls(new cs,this.moveChange)}set size(i){this.engineFacade.heightAndWidth=i&&i>=$e.MIN_BOARD_SIZE&&i<=$e.MAX_BOARD_SIZE?i:$e.DEFAULT_SIZE,this.engineFacade.drawProvider.clear(),this.calculatePieceSize()}set freeMode(i){this.engineFacade.freeMode=i}set dragDisabled(i){this.engineFacade.dragDisabled=i}set drawDisabled(i){this.engineFacade.drawDisabled=i}set pieceIcons(i){this.engineFacade.pieceIconManager.pieceIconInput=i}set lightDisabled(i){this.engineFacade.lightDisabled=i}set darkDisabled(i){this.engineFacade.darkDisabled=i}onRightClick(i){i.preventDefault()}ngOnChanges(i){(i.lightDisabled&&this.lightDisabled&&this.engineFacade.board.currentWhitePlayer||i.darkDisabled&&this.darkDisabled&&!this.engineFacade.board.currentWhitePlayer)&&(this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[])}ngOnInit(){this.ngxChessBoardService.componentMethodCalled$.subscribe(()=>{this.engineFacade.reset()})}ngAfterViewInit(){this.engineFacade.modal=this.modal,this.calculatePieceSize()}onMouseUp(i){this.engineFacade.onMouseUp(i,this.getClickPoint(i),this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().top)}reverse(){this.selected=!1,this.engineFacade.board.reverse(),this.engineFacade.coords.reverse()}updateBoard(i){this.engineFacade.board=i,this.boardLoader.setEngineFacade(this.engineFacade),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[]}setFEN(i){try{this.engineFacade.boardLoader.setNotationProcessor(Ci.getProcessor(Ct.FEN)),this.engineFacade.boardLoader.loadFEN(i),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[],this.engineFacade.coords.reset()}catch(s){this.engineFacade.boardLoader.addPieces()}}setPGN(i){try{this.engineFacade.pgnProcessor.reset(),this.engineFacade.boardLoader.setNotationProcessor(Ci.getProcessor(Ct.PGN)),this.engineFacade.boardLoader.loadPGN(i),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[],this.engineFacade.coords.reset()}catch(s){console.log(s),this.engineFacade.boardLoader.addPieces()}}getFEN(){return this.engineFacade.board.fen}dragEnded(i){this.isDragging=!1,this.engineFacade.dragEndStrategy.process(i,this.engineFacade.moveDone,this.startTransition)}dragStart(i){this.isDragging=!0;let s=i.source.getRootElement().style.transform.split(") ");this.startTransition=2===s.length?s[1]:s[0],this.engineFacade.dragStartStrategy.process(i)}onMouseDown(i){this.engineFacade.onMouseDown(i,this.getClickPoint(i),this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().top)}getClickPoint(i){return Yi.getClickPoint(i,this.boardRef.nativeElement.getBoundingClientRect().top,this.boardRef.nativeElement.getBoundingClientRect().height,this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().width)}calculatePieceSize(){this.pieceSize=this.engineFacade.heightAndWidth/8}getCustomPieceIcons(i){return JSON.parse(`{ "background-image": "url('${this.engineFacade.pieceIconManager.getPieceIcon(i)}')"}`)}move(i){this.engineFacade.move(i)}getMoveHistory(){return this.engineFacade.getMoveHistory()}reset(){this.engineFacade.reset()}undo(){this.engineFacade.undo()}addPiece(i,s,o){this.engineFacade.addPiece(i,s,o)}getPGN(){return this.engineFacade.pgnProcessor.getPGN()}dragMoved(i){let s=i.pointerPosition.x-i.source.getRootElement().parentElement.getBoundingClientRect().left-this.pieceSize/2,o=i.pointerPosition.y-i.source.getRootElement().parentElement.getBoundingClientRect().top-this.pieceSize/2;i.source.getRootElement().style.transform="translate3d("+s+"px, "+o+"px,0px)"}getTileBackgroundColor(i,s){let o=(i+s)%2==0?this.lightTileColor:this.darkTileColor;return this.showLastMove&&(this.engineFacade.board.isXYInSourceMove(i,s)&&(o=this.sourcePointColor),this.engineFacade.board.isXYInDestMove(i,s)&&(o=this.destinationPointColor)),o}}return f.\u0275fac=function(i){return new(i||f)(l.Y36(en))},f.\u0275cmp=l.Xpm({type:f,selectors:[["ngx-chess-board"]],viewQuery:function(i,s){if(1&i&&(l.Gf(zr,5),l.Gf(Zi,5)),2&i){let o;l.iGM(o=l.CRH())&&(s.boardRef=o.first),l.iGM(o=l.CRH())&&(s.modal=o.first)}},hostBindings:function(i,s){1&i&&l.NdJ("contextmenu",function(c){return s.onRightClick(c)})},inputs:{darkTileColor:"darkTileColor",lightTileColor:"lightTileColor",showCoords:"showCoords",sourcePointColor:"sourcePointColor",destinationPointColor:"destinationPointColor",legalMovesPointColor:"legalMovesPointColor",showLastMove:"showLastMove",showLegalMoves:"showLegalMoves",showActivePiece:"showActivePiece",showPossibleCaptures:"showPossibleCaptures",size:"size",freeMode:"freeMode",dragDisabled:"dragDisabled",drawDisabled:"drawDisabled",pieceIcons:"pieceIcons",lightDisabled:"lightDisabled",darkDisabled:"darkDisabled"},outputs:{moveChange:"moveChange",checkmate:"checkmate",stalemate:"stalemate"},features:[l.TTD],decls:13,vars:18,consts:[["id","board",3,"pointerdown","pointerup"],["boardRef",""],["id","drag"],["class","single-piece","cdkDrag","",3,"cdkDragDisabled","innerHTML","ngStyle","transform","max-height","font-size","width","height","cdkDragEnded","cdkDragMoved","cdkDragStarted",4,"ngFor","ngForOf"],["class","board-row",4,"ngFor","ngForOf"],[2,"position","absolute","top","0","pointer-events","none"],[4,"ngFor","ngForOf"],["class","arrow",4,"ngFor","ngForOf"],["fill-opacity","0.0","stroke-width","2",4,"ngFor","ngForOf"],[3,"pieceIconInput","color"],["modal",""],["cdkDrag","",1,"single-piece",3,"cdkDragDisabled","innerHTML","ngStyle","cdkDragEnded","cdkDragMoved","cdkDragStarted"],[1,"board-row"],["class","board-col",3,"current-selection","king-check","point-circle","possible-capture","possible-point","background-color",4,"ngFor","ngForOf"],[1,"board-col"],["class","yCoord",3,"color","font-size",4,"ngIf"],["class","xCoord",3,"color","font-size",4,"ngIf"],["style","height:100%; width:100%",4,"ngIf"],[1,"yCoord"],[1,"xCoord"],[2,"height","100%","width","100%"],[3,"ngClass"],["markerHeight","13","markerWidth","13","orient","auto","refX","9","refY","6",3,"id"],["d","M2,2 L2,11 L10,6 L2,2"],[1,"arrow"],["fill-opacity","0.0","stroke-width","2"]],template:function(i,s){if(1&i){const o=l.EpF();l.TgZ(0,"div",0,1),l.NdJ("pointerdown",function(_){return l.CHM(o),!l.MAs(12).opened&&s.onMouseDown(_)})("pointerup",function(_){return l.CHM(o),!l.MAs(12).opened&&s.onMouseUp(_)}),l.TgZ(2,"div",2),l.YNc(3,Zr,1,13,"div",3),l.YNc(4,Qr,2,1,"div",4),l.qZA(),l.O4$(),l.TgZ(5,"svg",5),l.YNc(6,Jr,3,3,"defs",6),l.YNc(7,Xr,1,6,"line",7),l.ALo(8,"async"),l.YNc(9,Vr,1,4,"circle",8),l.ALo(10,"async"),l.qZA(),l.kcU(),l._UZ(11,"app-piece-promotion-modal",9,10),l.qZA()}2&i&&(l.Udp("height",s.engineFacade.heightAndWidth,"px")("width",s.engineFacade.heightAndWidth,"px"),l.xp6(3),l.Q6J("ngForOf",s.engineFacade.board.pieces),l.xp6(1),l.Q6J("ngForOf",s.engineFacade.board.board),l.xp6(1),l.uIk("height",s.engineFacade.heightAndWidth)("width",s.engineFacade.heightAndWidth),l.xp6(1),l.Q6J("ngForOf",l.DdM(17,jr)),l.xp6(1),l.Q6J("ngForOf",l.lcZ(8,13,s.engineFacade.drawProvider.arrows$)),l.xp6(2),l.Q6J("ngForOf",l.lcZ(10,15,s.engineFacade.drawProvider.circles$)),l.xp6(2),l.Q6J("pieceIconInput",s.engineFacade.pieceIconManager.pieceIconInput)("color",s.engineFacade.board.getCurrentPlayerColor()?"white":"black"))},directives:[hs,Ue.sg,Wr,Ue.PC,Ue.O5,Ue.mk],pipes:[Ue.Ov],styles:['@charset "UTF-8";#board[_ngcontent-%COMP%]{font-family:Courier New,serif;position:relative}.board-row[_ngcontent-%COMP%]{display:block;width:100%;height:12.5%;position:relative}.board-col[_ngcontent-%COMP%]{position:relative;display:inline-block;width:12.5%;vertical-align:top;cursor:default;height:100%}.piece[_ngcontent-%COMP%]{height:100%;cursor:-webkit-grab;cursor:grab;width:100%;-moz-user-select:none;user-select:none;-webkit-user-select:none;background-size:cover;justify-content:center;text-align:center;color:#000!important;box-sizing:border-box}.piece[_ngcontent-%COMP%]:after{content:"\\200b";box-sizing:border-box}#drag[_ngcontent-%COMP%]{height:100%;width:100%}.possible-point[_ngcontent-%COMP%]{background:radial-gradient(#13262F 15%,transparent 20%)}.possible-point[_ngcontent-%COMP%]:hover, .possible-capture[_ngcontent-%COMP%]:hover{opacity:.4}.possible-capture[_ngcontent-%COMP%]{background:radial-gradient(transparent 0%,transparent 80%,#13262F 80%);opacity:.5;box-sizing:border-box;margin:0;padding:0}.king-check[_ngcontent-%COMP%]{background:radial-gradient(ellipse at center,red 0%,#e70000 25%,rgba(169,0,0,0) 89%,rgba(158,0,0,0) 100%)}.current-selection[_ngcontent-%COMP%]{background-color:#72620b!important}.yCoord[_ngcontent-%COMP%]{position:absolute;-moz-user-select:none;user-select:none;-webkit-user-select:none;cursor:pointer;right:.2em;font-family:Lucida Console,Courier,monospace;box-sizing:border-box}.xCoord[_ngcontent-%COMP%]{position:absolute;-moz-user-select:none;user-select:none;-webkit-user-select:none;cursor:pointer;left:.2em;bottom:0;font-family:Lucida Console,Courier,monospace;box-sizing:border-box}.hovering[_ngcontent-%COMP%]{background-color:red!important}.arrow[_ngcontent-%COMP%]{stroke-width:2}svg[_ngcontent-%COMP%]{filter:drop-shadow(1px 1px 0px #111) drop-shadow(-1px 1px 0px #111) drop-shadow(1px -1px 0px #111) drop-shadow(-1px -1px 0px #111)}[_nghost-%COMP%]{display:inline-block!important}.single-piece[_ngcontent-%COMP%]{position:absolute;z-index:999;justify-content:center;text-align:center;-moz-user-select:none;user-select:none;-webkit-user-select:none;color:#000!important;cursor:-webkit-grab;cursor:grab;background-size:cover}.single-piece[_ngcontent-%COMP%]:after{content:"\\200b";box-sizing:border-box}.cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-dragging){transition:transform .2s cubic-bezier(0,.3,.14,.49)}']}),f})(),ds=(()=>{class f{static forRoot(){return{ngModule:f,providers:[en]}}}return f.\u0275fac=function(i){return new(i||f)},f.\u0275mod=l.oAB({type:f}),f.\u0275inj=l.cJS({imports:[[Ue.ez,Kr]]}),f})();const fs=["board"];let tn=(()=>{class f{constructor(i){this.crossWindowCom=i,this.isDark=!1}onMessage(i){switch(i.data.event){case Ne.rE.reset:this.board.reset(),this.isDark&&this.board.reverse();break;case Ne.rE.configuration:this.id=i.data.data.id,this.isDark=i.data.data.isDark;const s=localStorage.getItem("moves");s&&this.board.setFEN(s),this.isDark&&this.board.reverse();break;case Ne.rE.move:return this.board.move(i.data.data.move)}}reset(){this.board.reset()}move(i){this.board.move(i)}moveChange(i){const s=i;this.lastMove=s.move,this.crossWindowCom.postMessage(window.parent,{data:{move:s.move},event:Ne.rE.move,srcId:this.id,targetId:Ne.i8.parent}),s.checkmate&&this.crossWindowCom.postMessage(window.parent,{data:{},event:Ne.rE.checkMate,srcId:this.id,targetId:Ne.i8.parent}),localStorage.setItem("moves",this.board.getFEN())}}return f.\u0275fac=function(i){return new(i||f)(l.Y36(Ne.vN))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-chess-board"]],viewQuery:function(i,s){if(1&i&&l.Gf(fs,5),2&i){let o;l.iGM(o=l.CRH())&&(s.board=o.first)}},hostBindings:function(i,s){1&i&&l.NdJ("message",function(c){return s.onMessage(c)},!1,l.Jf7)},decls:2,vars:4,consts:[[3,"showLastMove","lightDisabled","darkDisabled","size","moveChange"],["board",""]],template:function(i,s){1&i&&(l.TgZ(0,"ngx-chess-board",0,1),l.NdJ("moveChange",function(c){return s.moveChange(c)}),l.qZA()),2&i&&l.Q6J("showLastMove",!0)("lightDisabled",s.isDark)("darkDisabled",!s.isDark)("size",300)},directives:[us],styles:[""]}),f})();var ps=J(4259);const gs=[{path:"",component:tn}];let _s=(()=>{class f{}return f.\u0275fac=function(i){return new(i||f)},f.\u0275mod=l.oAB({type:f}),f.\u0275inj=l.cJS({imports:[[ps.Bz.forChild(gs),ds.forRoot()]]}),f})()},7489:function(Lt,kt,J){var Ne;Lt=J.nmd(Lt),function(){var l,_e="Expected a function",_t="__lodash_hash_undefined__",ui="__lodash_placeholder__",ct=1/0,it=9007199254740991,Ze=4294967295,xn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],bt="[object Arguments]",gi="[object Array]",Vt="[object Boolean]",ht="[object Date]",ut="[object Error]",jt="[object Function]",Ni="[object GeneratorFunction]",ke="[object Map]",_i="[object Number]",ve="[object Object]",Ui="[object Promise]",ei="[object RegExp]",Pe="[object Set]",Ot="[object String]",vi="[object Symbol]",ti="[object WeakMap]",Ht="[object ArrayBuffer]",wt="[object DataView]",Tn="[object Float32Array]",An="[object Float64Array]",Gi="[object Int8Array]",Sn="[object Int16Array]",Rn="[object Int32Array]",zi="[object Uint8Array]",Ln="[object Uint8ClampedArray]",bi="[object Uint16Array]",kn="[object Uint32Array]",Fr=/\b__p \+= '';/g,Po=/\b(__p \+=) '' \+/g,Or=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hr=/&(?:amp|lt|gt|quot|#39);/g,Mn=/[&<>"']/g,Wr=RegExp(Hr.source),Kr=RegExp(Mn.source),wi=/<%-([\s\S]+?)%>/g,Nr=/<%([\s\S]+?)%>/g,Bn=/<%=([\s\S]+?)%>/g,Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gr=/^\w*$/,zr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zi=/[\\^$.*+?()[\]{}|]/g,Zr=RegExp(Zi.source),qi=/^\s+/,qr=/\s/,$r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yr=/\{\n\/\* \[wrapped with (.+)\] \*/,Qr=/,? & /,Jr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xr=/[()=,{}\[\]\/\s]/,Vr=/\\(\\)?/g,jr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,p=/\w*$/,Wt=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,q=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ee=/($^)/,qe=/['\n\r\u2028\u2029\\]/g,k="\\ud800-\\udfff",$i="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",On="\\u2700-\\u27bf",Ci="a-z\\xdf-\\xf6\\xf8-\\xff",Hn="A-Z\\xc0-\\xd6\\xd8-\\xde",$e="\\ufe0e\\ufe0f",Wn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ns="["+k+"]",Kn="["+Wn+"]",Pi="["+$i+"]",Nn="\\d+",rs="["+On+"]",Un="["+Ci+"]",Gn="[^"+k+Wn+Nn+On+Ci+Hn+"]",Ji="\\ud83c[\\udffb-\\udfff]",zn="[^"+k+"]",Xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ei="[\\ud800-\\udbff][\\udc00-\\udfff]",Kt="["+Hn+"]",qn="(?:"+Un+"|"+Gn+")",os="(?:"+Kt+"|"+Gn+")",Vi="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ji="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Pi+"|"+Ji+")?",ii="["+$e+"]?",en=ii+Ye+"(?:\\u200d(?:"+[zn,Xi,Ei].join("|")+")"+ii+Ye+")*",hs="(?:"+[rs,Xi,Ei].join("|")+")"+en,us="(?:"+[zn+Pi+"?",Pi,Xi,Ei,ns].join("|")+")",ds=RegExp("['\u2019]","g"),fs=RegExp(Pi,"g"),tn=RegExp(Ji+"(?="+Ji+")|"+us+en,"g"),ps=RegExp([Kt+"?"+Un+"+"+Vi+"(?="+[Kn,Kt,"$"].join("|")+")",os+"+"+ji+"(?="+[Kn,Kt+qn,"$"].join("|")+")",Kt+"?"+qn+"+"+Vi,Kt+"+"+ji,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nn,hs].join("|"),"g"),gs=RegExp("[\\u200d"+k+$i+$e+"]"),_s=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,f=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],n=-1,i={};i[Tn]=i[An]=i[Gi]=i[Sn]=i[Rn]=i[zi]=i[Ln]=i[bi]=i[kn]=!0,i[bt]=i[gi]=i[Ht]=i[Vt]=i[wt]=i[ht]=i[ut]=i[jt]=i[ke]=i[_i]=i[ve]=i[ei]=i[Pe]=i[Ot]=i[ti]=!1;var s={};s[bt]=s[gi]=s[Ht]=s[wt]=s[Vt]=s[ht]=s[Tn]=s[An]=s[Gi]=s[Sn]=s[Rn]=s[ke]=s[_i]=s[ve]=s[ei]=s[Pe]=s[Ot]=s[vi]=s[zi]=s[Ln]=s[bi]=s[kn]=!0,s[ut]=s[jt]=s[ti]=!1;var C={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},y=parseFloat,D=parseInt,M="object"==typeof global&&global&&global.Object===Object&&global,ae="object"==typeof self&&self&&self.Object===Object&&self,$=M||ae||Function("return this")(),dt=kt&&!kt.nodeType&&kt,Me=dt&&Lt&&!Lt.nodeType&&Lt,Pt=Me&&Me.exports===dt,fe=Pt&&M.process,xe=function(){try{return Me&&Me.require&&Me.require("util").types||fe&&fe.binding&&fe.binding("util")}catch(E){}}(),nn=xe&&xe.isArrayBuffer,yi=xe&&xe.isDate,rn=xe&&xe.isMap,Eo=xe&&xe.isRegExp,yo=xe&&xe.isSet,xo=xe&&xe.isTypedArray;function Be(m,E,P){switch(P.length){case 0:return m.call(E);case 1:return m.call(E,P[0]);case 2:return m.call(E,P[0],P[1]);case 3:return m.call(E,P[0],P[1],P[2])}return m.apply(E,P)}function xl(m,E,P,S){for(var H=-1,Y=null==m?0:m.length;++H<Y;){var le=m[H];E(S,le,P(le),m)}return S}function Qe(m,E){for(var P=-1,S=null==m?0:m.length;++P<S&&!1!==E(m[P],P,m););return m}function Il(m,E){for(var P=null==m?0:m.length;P--&&!1!==E(m[P],P,m););return m}function Io(m,E){for(var P=-1,S=null==m?0:m.length;++P<S;)if(!E(m[P],P,m))return!1;return!0}function Nt(m,E){for(var P=-1,S=null==m?0:m.length,H=0,Y=[];++P<S;){var le=m[P];E(le,P,m)&&(Y[H++]=le)}return Y}function $n(m,E){return!(null==m||!m.length)&&xi(m,E,0)>-1}function vs(m,E,P){for(var S=-1,H=null==m?0:m.length;++S<H;)if(P(E,m[S]))return!0;return!1}function j(m,E){for(var P=-1,S=null==m?0:m.length,H=Array(S);++P<S;)H[P]=E(m[P],P,m);return H}function Ut(m,E){for(var P=-1,S=E.length,H=m.length;++P<S;)m[H+P]=E[P];return m}function ms(m,E,P,S){var H=-1,Y=null==m?0:m.length;for(S&&Y&&(P=m[++H]);++H<Y;)P=E(P,m[H],H,m);return P}function Dl(m,E,P,S){var H=null==m?0:m.length;for(S&&H&&(P=m[--H]);H--;)P=E(P,m[H],H,m);return P}function bs(m,E){for(var P=-1,S=null==m?0:m.length;++P<S;)if(E(m[P],P,m))return!0;return!1}var Tl=ws("length");function Do(m,E,P){var S;return P(m,function(H,Y,le){if(E(H,Y,le))return S=Y,!1}),S}function Yn(m,E,P,S){for(var H=m.length,Y=P+(S?1:-1);S?Y--:++Y<H;)if(E(m[Y],Y,m))return Y;return-1}function xi(m,E,P){return E==E?function Ul(m,E,P){for(var S=P-1,H=m.length;++S<H;)if(m[S]===E)return S;return-1}(m,E,P):Yn(m,To,P)}function Rl(m,E,P,S){for(var H=P-1,Y=m.length;++H<Y;)if(S(m[H],E))return H;return-1}function To(m){return m!=m}function Ao(m,E){var P=null==m?0:m.length;return P?Ps(m,E)/P:NaN}function ws(m){return function(E){return null==E?l:E[m]}}function Cs(m){return function(E){return null==m?l:m[E]}}function So(m,E,P,S,H){return H(m,function(Y,le,V){P=S?(S=!1,Y):E(P,Y,le,V)}),P}function Ps(m,E){for(var P,S=-1,H=m.length;++S<H;){var Y=E(m[S]);Y!==l&&(P=P===l?Y:P+Y)}return P}function Es(m,E){for(var P=-1,S=Array(m);++P<m;)S[P]=E(P);return S}function Ro(m){return m&&m.slice(0,Bo(m)+1).replace(qi,"")}function Fe(m){return function(E){return m(E)}}function ys(m,E){return j(E,function(P){return m[P]})}function sn(m,E){return m.has(E)}function Lo(m,E){for(var P=-1,S=m.length;++P<S&&xi(E,m[P],0)>-1;);return P}function ko(m,E){for(var P=m.length;P--&&xi(E,m[P],0)>-1;);return P}function Ml(m,E){for(var P=m.length,S=0;P--;)m[P]===E&&++S;return S}var Bl=Cs({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Fl=Cs({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ol(m){return"\\"+C[m]}function Ii(m){return gs.test(m)}function xs(m){var E=-1,P=Array(m.size);return m.forEach(function(S,H){P[++E]=[H,S]}),P}function Mo(m,E){return function(P){return m(E(P))}}function Gt(m,E){for(var P=-1,S=m.length,H=0,Y=[];++P<S;){var le=m[P];(le===E||le===ui)&&(m[P]=ui,Y[H++]=P)}return Y}function Qn(m){var E=-1,P=Array(m.size);return m.forEach(function(S){P[++E]=S}),P}function Di(m){return Ii(m)?function Zl(m){for(var E=tn.lastIndex=0;tn.test(m);)++E;return E}(m):Tl(m)}function nt(m){return Ii(m)?function ql(m){return m.match(tn)||[]}(m):function Al(m){return m.split("")}(m)}function Bo(m){for(var E=m.length;E--&&qr.test(m.charAt(E)););return E}var zl=Cs({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Jn=function m(E){var e,P=(E=null==E?$:Jn.defaults($.Object(),E,Jn.pick($,f))).Array,S=E.Date,H=E.Error,Y=E.Function,le=E.Math,V=E.Object,Is=E.RegExp,Ql=E.String,Je=E.TypeError,Xn=P.prototype,Ti=V.prototype,Vn=E["__core-js_shared__"],jn=Y.prototype.toString,X=Ti.hasOwnProperty,Xl=0,Fo=(e=/[^.]+$/.exec(Vn&&Vn.keys&&Vn.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",er=Ti.toString,Vl=jn.call(V),jl=$._,ec=Is("^"+jn.call(X).replace(Zi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=Pt?E.Buffer:l,zt=E.Symbol,ir=E.Uint8Array,Oo=tr?tr.allocUnsafe:l,nr=Mo(V.getPrototypeOf,V),Ho=V.create,Wo=Ti.propertyIsEnumerable,rr=Xn.splice,Ko=zt?zt.isConcatSpreadable:l,on=zt?zt.iterator:l,ni=zt?zt.toStringTag:l,sr=function(){try{var e=li(V,"defineProperty");return e({},"",{}),e}catch(t){}}(),tc=E.clearTimeout!==$.clearTimeout&&E.clearTimeout,ic=S&&S.now!==$.Date.now&&S.now,nc=E.setTimeout!==$.setTimeout&&E.setTimeout,or=le.ceil,ar=le.floor,Ds=V.getOwnPropertySymbols,rc=tr?tr.isBuffer:l,No=E.isFinite,sc=Xn.join,oc=Mo(V.keys,V),ce=le.max,pe=le.min,ac=S.now,lc=E.parseInt,Uo=le.random,cc=Xn.reverse,Ts=li(E,"DataView"),an=li(E,"Map"),As=li(E,"Promise"),Ai=li(E,"Set"),ln=li(E,"WeakMap"),cn=li(V,"create"),lr=ln&&new ln,Si={},hc=ci(Ts),uc=ci(an),dc=ci(As),fc=ci(Ai),pc=ci(ln),cr=zt?zt.prototype:l,hn=cr?cr.valueOf:l,Go=cr?cr.toString:l;function u(e){if(ie(e)&&!W(e)&&!(e instanceof z)){if(e instanceof Xe)return e;if(X.call(e,"__wrapped__"))return za(e)}return new Xe(e)}var Ri=function(){function e(){}return function(t){if(!te(t))return{};if(Ho)return Ho(t);e.prototype=t;var r=new e;return e.prototype=l,r}}();function hr(){}function Xe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=l}function z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ze,this.__views__=[]}function ri(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Et(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function yt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function si(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new yt;++t<r;)this.add(e[t])}function rt(e){var t=this.__data__=new Et(e);this.size=t.size}function zo(e,t){var r=W(e),a=!r&&hi(e),h=!r&&!a&&Qt(e),d=!r&&!a&&!h&&Bi(e),g=r||a||h||d,v=g?Es(e.length,Ql):[],w=v.length;for(var x in e)(t||X.call(e,x))&&(!g||!("length"==x||h&&("offset"==x||"parent"==x)||d&&("buffer"==x||"byteLength"==x||"byteOffset"==x)||Tt(x,w)))&&v.push(x);return v}function Zo(e){var t=e.length;return t?e[Ks(0,t-1)]:l}function Kc(e,t){return yr(Ie(e),oi(t,0,e.length))}function Nc(e){return yr(Ie(e))}function Ss(e,t,r){(r!==l&&!st(e[t],r)||r===l&&!(t in e))&&xt(e,t,r)}function un(e,t,r){var a=e[t];(!X.call(e,t)||!st(a,r)||r===l&&!(t in e))&&xt(e,t,r)}function ur(e,t){for(var r=e.length;r--;)if(st(e[r][0],t))return r;return-1}function Uc(e,t,r,a){return Zt(e,function(h,d,g){t(a,h,r(h),g)}),a}function qo(e,t){return e&&pt(t,ue(t),e)}function xt(e,t,r){"__proto__"==t&&sr?sr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Rs(e,t){for(var r=-1,a=t.length,h=P(a),d=null==e;++r<a;)h[r]=d?l:uo(e,t[r]);return h}function oi(e,t,r){return e==e&&(r!==l&&(e=e<=r?e:r),t!==l&&(e=e>=t?e:t)),e}function Ve(e,t,r,a,h,d){var g,v=1&t,w=2&t,x=4&t;if(r&&(g=h?r(e,a,h,d):r(e)),g!==l)return g;if(!te(e))return e;var I=W(e);if(I){if(g=function Rh(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&X.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!v)return Ie(e,g)}else{var T=ge(e),A=T==jt||T==Ni;if(Qt(e))return _a(e,v);if(T==ve||T==bt||A&&!h){if(g=w||A?{}:Ba(e),!v)return w?function wh(e,t){return pt(e,ka(e),t)}(e,function Gc(e,t){return e&&pt(t,Te(t),e)}(g,e)):function bh(e,t){return pt(e,eo(e),t)}(e,qo(g,e))}else{if(!s[T])return h?e:{};g=function Lh(e,t,r){var a=e.constructor;switch(t){case Ht:return $s(e);case Vt:case ht:return new a(+e);case wt:return function gh(e,t){var r=t?$s(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Tn:case An:case Gi:case Sn:case Rn:case zi:case Ln:case bi:case kn:return va(e,r);case ke:return new a;case _i:case Ot:return new a(e);case ei:return function _h(e){var t=new e.constructor(e.source,p.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Pe:return new a;case vi:return function vh(e){return hn?V(hn.call(e)):{}}(e)}}(e,T,v)}}d||(d=new rt);var L=d.get(e);if(L)return L;d.set(e,g),hl(e)?e.forEach(function(O){g.add(Ve(O,t,r,O,e,d))}):ll(e)&&e.forEach(function(O,G){g.set(G,Ve(O,t,r,G,e,d))});var N=I?l:(x?w?Xs:Js:w?Te:ue)(e);return Qe(N||e,function(O,G){N&&(O=e[G=O]),un(g,G,Ve(O,t,r,G,e,d))}),g}function $o(e,t,r){var a=r.length;if(null==e)return!a;for(e=V(e);a--;){var h=r[a],g=e[h];if(g===l&&!(h in e)||!(0,t[h])(g))return!1}return!0}function Yo(e,t,r){if("function"!=typeof e)throw new Je(_e);return mn(function(){e.apply(l,r)},t)}function dn(e,t,r,a){var h=-1,d=$n,g=!0,v=e.length,w=[],x=t.length;if(!v)return w;r&&(t=j(t,Fe(r))),a?(d=vs,g=!1):t.length>=200&&(d=sn,g=!1,t=new si(t));e:for(;++h<v;){var I=e[h],T=null==r?I:r(I);if(I=a||0!==I?I:0,g&&T==T){for(var A=x;A--;)if(t[A]===T)continue e;w.push(I)}else d(t,T,a)||w.push(I)}return w}u.templateSettings={escape:wi,evaluate:Nr,interpolate:Bn,variable:"",imports:{_:u}},(u.prototype=hr.prototype).constructor=u,(Xe.prototype=Ri(hr.prototype)).constructor=Xe,(z.prototype=Ri(hr.prototype)).constructor=z,ri.prototype.clear=function mc(){this.__data__=cn?cn(null):{},this.size=0},ri.prototype.delete=function bc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ri.prototype.get=function wc(e){var t=this.__data__;if(cn){var r=t[e];return r===_t?l:r}return X.call(t,e)?t[e]:l},ri.prototype.has=function Cc(e){var t=this.__data__;return cn?t[e]!==l:X.call(t,e)},ri.prototype.set=function Pc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=cn&&t===l?_t:t,this},Et.prototype.clear=function Ec(){this.__data__=[],this.size=0},Et.prototype.delete=function yc(e){var t=this.__data__,r=ur(t,e);return!(r<0||(r==t.length-1?t.pop():rr.call(t,r,1),--this.size,0))},Et.prototype.get=function xc(e){var t=this.__data__,r=ur(t,e);return r<0?l:t[r][1]},Et.prototype.has=function Ic(e){return ur(this.__data__,e)>-1},Et.prototype.set=function Dc(e,t){var r=this.__data__,a=ur(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this},yt.prototype.clear=function Tc(){this.size=0,this.__data__={hash:new ri,map:new(an||Et),string:new ri}},yt.prototype.delete=function Ac(e){var t=Er(this,e).delete(e);return this.size-=t?1:0,t},yt.prototype.get=function Sc(e){return Er(this,e).get(e)},yt.prototype.has=function Rc(e){return Er(this,e).has(e)},yt.prototype.set=function Lc(e,t){var r=Er(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this},si.prototype.add=si.prototype.push=function kc(e){return this.__data__.set(e,_t),this},si.prototype.has=function Mc(e){return this.__data__.has(e)},rt.prototype.clear=function Bc(){this.__data__=new Et,this.size=0},rt.prototype.delete=function Fc(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rt.prototype.get=function Oc(e){return this.__data__.get(e)},rt.prototype.has=function Hc(e){return this.__data__.has(e)},rt.prototype.set=function Wc(e,t){var r=this.__data__;if(r instanceof Et){var a=r.__data__;if(!an||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new yt(a)}return r.set(e,t),this.size=r.size,this};var Zt=Ca(ft),Qo=Ca(ks,!0);function Zc(e,t){var r=!0;return Zt(e,function(a,h,d){return r=!!t(a,h,d)}),r}function dr(e,t,r){for(var a=-1,h=e.length;++a<h;){var d=e[a],g=t(d);if(null!=g&&(v===l?g==g&&!He(g):r(g,v)))var v=g,w=d}return w}function Jo(e,t){var r=[];return Zt(e,function(a,h,d){t(a,h,d)&&r.push(a)}),r}function de(e,t,r,a,h){var d=-1,g=e.length;for(r||(r=Mh),h||(h=[]);++d<g;){var v=e[d];t>0&&r(v)?t>1?de(v,t-1,r,a,h):Ut(h,v):a||(h[h.length]=v)}return h}var Ls=Pa(),Xo=Pa(!0);function ft(e,t){return e&&Ls(e,t,ue)}function ks(e,t){return e&&Xo(e,t,ue)}function fr(e,t){return Nt(t,function(r){return At(e[r])})}function ai(e,t){for(var r=0,a=(t=$t(t,e)).length;null!=e&&r<a;)e=e[gt(t[r++])];return r&&r==a?e:l}function Vo(e,t,r){var a=t(e);return W(e)?a:Ut(a,r(e))}function me(e){return null==e?e===l?"[object Undefined]":"[object Null]":ni&&ni in V(e)?function Th(e){var t=X.call(e,ni),r=e[ni];try{e[ni]=l;var a=!0}catch(d){}var h=er.call(e);return a&&(t?e[ni]=r:delete e[ni]),h}(e):function Nh(e){return er.call(e)}(e)}function Ms(e,t){return e>t}function $c(e,t){return null!=e&&X.call(e,t)}function Yc(e,t){return null!=e&&t in V(e)}function Bs(e,t,r){for(var a=r?vs:$n,h=e[0].length,d=e.length,g=d,v=P(d),w=1/0,x=[];g--;){var I=e[g];g&&t&&(I=j(I,Fe(t))),w=pe(I.length,w),v[g]=!r&&(t||h>=120&&I.length>=120)?new si(g&&I):l}I=e[0];var T=-1,A=v[0];e:for(;++T<h&&x.length<w;){var L=I[T],F=t?t(L):L;if(L=r||0!==L?L:0,!(A?sn(A,F):a(x,F,r))){for(g=d;--g;){var N=v[g];if(!(N?sn(N,F):a(e[g],F,r)))continue e}A&&A.push(F),x.push(L)}}return x}function fn(e,t,r){var a=null==(e=Wa(e,t=$t(t,e)))?e:e[gt(et(t))];return null==a?l:Be(a,e,r)}function jo(e){return ie(e)&&me(e)==bt}function pn(e,t,r,a,h){return e===t||(null==e||null==t||!ie(e)&&!ie(t)?e!=e&&t!=t:function jc(e,t,r,a,h,d){var g=W(e),v=W(t),w=g?gi:ge(e),x=v?gi:ge(t),I=(w=w==bt?ve:w)==ve,T=(x=x==bt?ve:x)==ve,A=w==x;if(A&&Qt(e)){if(!Qt(t))return!1;g=!0,I=!1}if(A&&!I)return d||(d=new rt),g||Bi(e)?La(e,t,r,a,h,d):function Ih(e,t,r,a,h,d,g){switch(r){case wt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ht:return!(e.byteLength!=t.byteLength||!d(new ir(e),new ir(t)));case Vt:case ht:case _i:return st(+e,+t);case ut:return e.name==t.name&&e.message==t.message;case ei:case Ot:return e==t+"";case ke:var v=xs;case Pe:if(v||(v=Qn),e.size!=t.size&&!(1&a))return!1;var x=g.get(e);if(x)return x==t;a|=2,g.set(e,t);var I=La(v(e),v(t),a,h,d,g);return g.delete(e),I;case vi:if(hn)return hn.call(e)==hn.call(t)}return!1}(e,t,w,r,a,h,d);if(!(1&r)){var L=I&&X.call(e,"__wrapped__"),F=T&&X.call(t,"__wrapped__");if(L||F){var N=L?e.value():e,O=F?t.value():t;return d||(d=new rt),h(N,O,r,a,d)}}return!!A&&(d||(d=new rt),function Dh(e,t,r,a,h,d){var g=1&r,v=Js(e),w=v.length;if(w!=Js(t).length&&!g)return!1;for(var T=w;T--;){var A=v[T];if(!(g?A in t:X.call(t,A)))return!1}var L=d.get(e),F=d.get(t);if(L&&F)return L==t&&F==e;var N=!0;d.set(e,t),d.set(t,e);for(var O=g;++T<w;){var G=e[A=v[T]],Z=t[A];if(a)var We=g?a(Z,G,A,t,e,d):a(G,Z,A,e,t,d);if(!(We===l?G===Z||h(G,Z,r,a,d):We)){N=!1;break}O||(O="constructor"==A)}if(N&&!O){var we=e.constructor,Ke=t.constructor;we!=Ke&&"constructor"in e&&"constructor"in t&&!("function"==typeof we&&we instanceof we&&"function"==typeof Ke&&Ke instanceof Ke)&&(N=!1)}return d.delete(e),d.delete(t),N}(e,t,r,a,h,d))}(e,t,r,a,pn,h))}function Fs(e,t,r,a){var h=r.length,d=h,g=!a;if(null==e)return!d;for(e=V(e);h--;){var v=r[h];if(g&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++h<d;){var w=(v=r[h])[0],x=e[w],I=v[1];if(g&&v[2]){if(x===l&&!(w in e))return!1}else{var T=new rt;if(a)var A=a(x,I,w,e,t,T);if(!(A===l?pn(I,x,3,a,T):A))return!1}}return!0}function ea(e){return!(!te(e)||function Fh(e){return!!Fo&&Fo in e}(e))&&(At(e)?ec:oe).test(ci(e))}function ta(e){return"function"==typeof e?e:null==e?Ae:"object"==typeof e?W(e)?ra(e[0],e[1]):na(e):El(e)}function Os(e){if(!vn(e))return oc(e);var t=[];for(var r in V(e))X.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Hs(e,t){return e<t}function ia(e,t){var r=-1,a=De(e)?P(e.length):[];return Zt(e,function(h,d,g){a[++r]=t(h,d,g)}),a}function na(e){var t=js(e);return 1==t.length&&t[0][2]?Oa(t[0][0],t[0][1]):function(r){return r===e||Fs(r,e,t)}}function ra(e,t){return to(e)&&Fa(t)?Oa(gt(e),t):function(r){var a=uo(r,e);return a===l&&a===t?fo(r,e):pn(t,a,3)}}function pr(e,t,r,a,h){e!==t&&Ls(t,function(d,g){if(h||(h=new rt),te(d))!function sh(e,t,r,a,h,d,g){var v=no(e,r),w=no(t,r),x=g.get(w);if(x)Ss(e,r,x);else{var I=d?d(v,w,r+"",e,t,g):l,T=I===l;if(T){var A=W(w),L=!A&&Qt(w),F=!A&&!L&&Bi(w);I=w,A||L||F?W(v)?I=v:re(v)?I=Ie(v):L?(T=!1,I=_a(w,!0)):F?(T=!1,I=va(w,!0)):I=[]:bn(w)||hi(w)?(I=v,hi(v)?I=fl(v):(!te(v)||At(v))&&(I=Ba(w))):T=!1}T&&(g.set(w,I),h(I,w,a,d,g),g.delete(w)),Ss(e,r,I)}}(e,t,g,r,pr,a,h);else{var v=a?a(no(e,g),d,g+"",e,t,h):l;v===l&&(v=d),Ss(e,g,v)}},Te)}function sa(e,t){var r=e.length;if(r)return Tt(t+=t<0?r:0,r)?e[t]:l}function oa(e,t,r){t=t.length?j(t,function(d){return W(d)?function(g){return ai(g,1===d.length?d[0]:d)}:d}):[Ae];var a=-1;return t=j(t,Fe(B())),function Ll(m,E){var P=m.length;for(m.sort(E);P--;)m[P]=m[P].value;return m}(ia(e,function(d,g,v){return{criteria:j(t,function(x){return x(d)}),index:++a,value:d}}),function(d,g){return function mh(e,t,r){for(var a=-1,h=e.criteria,d=t.criteria,g=h.length,v=r.length;++a<g;){var w=ma(h[a],d[a]);if(w)return a>=v?w:w*("desc"==r[a]?-1:1)}return e.index-t.index}(d,g,r)})}function aa(e,t,r){for(var a=-1,h=t.length,d={};++a<h;){var g=t[a],v=ai(e,g);r(v,g)&&gn(d,$t(g,e),v)}return d}function Ws(e,t,r,a){var h=a?Rl:xi,d=-1,g=t.length,v=e;for(e===t&&(t=Ie(t)),r&&(v=j(e,Fe(r)));++d<g;)for(var w=0,x=t[d],I=r?r(x):x;(w=h(v,I,w,a))>-1;)v!==e&&rr.call(v,w,1),rr.call(e,w,1);return e}function la(e,t){for(var r=e?t.length:0,a=r-1;r--;){var h=t[r];if(r==a||h!==d){var d=h;Tt(h)?rr.call(e,h,1):Gs(e,h)}}return e}function Ks(e,t){return e+ar(Uo()*(t-e+1))}function Ns(e,t){var r="";if(!e||t<1||t>it)return r;do{t%2&&(r+=e),(t=ar(t/2))&&(e+=e)}while(t);return r}function U(e,t){return ro(Ha(e,t,Ae),e+"")}function ch(e){return Zo(Fi(e))}function hh(e,t){var r=Fi(e);return yr(r,oi(t,0,r.length))}function gn(e,t,r,a){if(!te(e))return e;for(var h=-1,d=(t=$t(t,e)).length,g=d-1,v=e;null!=v&&++h<d;){var w=gt(t[h]),x=r;if("__proto__"===w||"constructor"===w||"prototype"===w)return e;if(h!=g){var I=v[w];(x=a?a(I,w,v):l)===l&&(x=te(I)?I:Tt(t[h+1])?[]:{})}un(v,w,x),v=v[w]}return e}var ca=lr?function(e,t){return lr.set(e,t),e}:Ae,uh=sr?function(e,t){return sr(e,"toString",{configurable:!0,enumerable:!1,value:go(t),writable:!0})}:Ae;function dh(e){return yr(Fi(e))}function je(e,t,r){var a=-1,h=e.length;t<0&&(t=-t>h?0:h+t),(r=r>h?h:r)<0&&(r+=h),h=t>r?0:r-t>>>0,t>>>=0;for(var d=P(h);++a<h;)d[a]=e[a+t];return d}function fh(e,t){var r;return Zt(e,function(a,h,d){return!(r=t(a,h,d))}),!!r}function gr(e,t,r){var a=0,h=null==e?a:e.length;if("number"==typeof t&&t==t&&h<=2147483647){for(;a<h;){var d=a+h>>>1,g=e[d];null!==g&&!He(g)&&(r?g<=t:g<t)?a=d+1:h=d}return h}return Us(e,t,Ae,r)}function Us(e,t,r,a){var h=0,d=null==e?0:e.length;if(0===d)return 0;for(var g=(t=r(t))!=t,v=null===t,w=He(t),x=t===l;h<d;){var I=ar((h+d)/2),T=r(e[I]),A=T!==l,L=null===T,F=T==T,N=He(T);if(g)var O=a||F;else O=x?F&&(a||A):v?F&&A&&(a||!L):w?F&&A&&!L&&(a||!N):!L&&!N&&(a?T<=t:T<t);O?h=I+1:d=I}return pe(d,4294967294)}function ha(e,t){for(var r=-1,a=e.length,h=0,d=[];++r<a;){var g=e[r],v=t?t(g):g;if(!r||!st(v,w)){var w=v;d[h++]=0===g?0:g}}return d}function ua(e){return"number"==typeof e?e:He(e)?NaN:+e}function Oe(e){if("string"==typeof e)return e;if(W(e))return j(e,Oe)+"";if(He(e))return Go?Go.call(e):"";var t=e+"";return"0"==t&&1/e==-ct?"-0":t}function qt(e,t,r){var a=-1,h=$n,d=e.length,g=!0,v=[],w=v;if(r)g=!1,h=vs;else if(d>=200){var x=t?null:yh(e);if(x)return Qn(x);g=!1,h=sn,w=new si}else w=t?[]:v;e:for(;++a<d;){var I=e[a],T=t?t(I):I;if(I=r||0!==I?I:0,g&&T==T){for(var A=w.length;A--;)if(w[A]===T)continue e;t&&w.push(T),v.push(I)}else h(w,T,r)||(w!==v&&w.push(T),v.push(I))}return v}function Gs(e,t){return null==(e=Wa(e,t=$t(t,e)))||delete e[gt(et(t))]}function da(e,t,r,a){return gn(e,t,r(ai(e,t)),a)}function _r(e,t,r,a){for(var h=e.length,d=a?h:-1;(a?d--:++d<h)&&t(e[d],d,e););return r?je(e,a?0:d,a?d+1:h):je(e,a?d+1:0,a?h:d)}function fa(e,t){var r=e;return r instanceof z&&(r=r.value()),ms(t,function(a,h){return h.func.apply(h.thisArg,Ut([a],h.args))},r)}function zs(e,t,r){var a=e.length;if(a<2)return a?qt(e[0]):[];for(var h=-1,d=P(a);++h<a;)for(var g=e[h],v=-1;++v<a;)v!=h&&(d[h]=dn(d[h]||g,e[v],t,r));return qt(de(d,1),t,r)}function pa(e,t,r){for(var a=-1,h=e.length,d=t.length,g={};++a<h;)r(g,e[a],a<d?t[a]:l);return g}function Zs(e){return re(e)?e:[]}function qs(e){return"function"==typeof e?e:Ae}function $t(e,t){return W(e)?e:to(e,t)?[e]:Ga(Q(e))}var ph=U;function Yt(e,t,r){var a=e.length;return r=r===l?a:r,!t&&r>=a?e:je(e,t,r)}var ga=tc||function(e){return $.clearTimeout(e)};function _a(e,t){if(t)return e.slice();var r=e.length,a=Oo?Oo(r):new e.constructor(r);return e.copy(a),a}function $s(e){var t=new e.constructor(e.byteLength);return new ir(t).set(new ir(e)),t}function va(e,t){var r=t?$s(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ma(e,t){if(e!==t){var r=e!==l,a=null===e,h=e==e,d=He(e),g=t!==l,v=null===t,w=t==t,x=He(t);if(!v&&!x&&!d&&e>t||d&&g&&w&&!v&&!x||a&&g&&w||!r&&w||!h)return 1;if(!a&&!d&&!x&&e<t||x&&r&&h&&!a&&!d||v&&r&&h||!g&&h||!w)return-1}return 0}function ba(e,t,r,a){for(var h=-1,d=e.length,g=r.length,v=-1,w=t.length,x=ce(d-g,0),I=P(w+x),T=!a;++v<w;)I[v]=t[v];for(;++h<g;)(T||h<d)&&(I[r[h]]=e[h]);for(;x--;)I[v++]=e[h++];return I}function wa(e,t,r,a){for(var h=-1,d=e.length,g=-1,v=r.length,w=-1,x=t.length,I=ce(d-v,0),T=P(I+x),A=!a;++h<I;)T[h]=e[h];for(var L=h;++w<x;)T[L+w]=t[w];for(;++g<v;)(A||h<d)&&(T[L+r[g]]=e[h++]);return T}function Ie(e,t){var r=-1,a=e.length;for(t||(t=P(a));++r<a;)t[r]=e[r];return t}function pt(e,t,r,a){var h=!r;r||(r={});for(var d=-1,g=t.length;++d<g;){var v=t[d],w=a?a(r[v],e[v],v,r,e):l;w===l&&(w=e[v]),h?xt(r,v,w):un(r,v,w)}return r}function vr(e,t){return function(r,a){var h=W(r)?xl:Uc,d=t?t():{};return h(r,e,B(a,2),d)}}function Li(e){return U(function(t,r){var a=-1,h=r.length,d=h>1?r[h-1]:l,g=h>2?r[2]:l;for(d=e.length>3&&"function"==typeof d?(h--,d):l,g&&be(r[0],r[1],g)&&(d=h<3?l:d,h=1),t=V(t);++a<h;){var v=r[a];v&&e(t,v,a,d)}return t})}function Ca(e,t){return function(r,a){if(null==r)return r;if(!De(r))return e(r,a);for(var h=r.length,d=t?h:-1,g=V(r);(t?d--:++d<h)&&!1!==a(g[d],d,g););return r}}function Pa(e){return function(t,r,a){for(var h=-1,d=V(t),g=a(t),v=g.length;v--;){var w=g[e?v:++h];if(!1===r(d[w],w,d))break}return t}}function Ea(e){return function(t){var r=Ii(t=Q(t))?nt(t):l,a=r?r[0]:t.charAt(0),h=r?Yt(r,1).join(""):t.slice(1);return a[e]()+h}}function ki(e){return function(t){return ms(Cl(wl(t).replace(ds,"")),e,"")}}function _n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ri(e.prototype),a=e.apply(r,t);return te(a)?a:r}}function ya(e){return function(t,r,a){var h=V(t);if(!De(t)){var d=B(r,3);t=ue(t),r=function(v){return d(h[v],v,h)}}var g=e(t,r,a);return g>-1?h[d?t[g]:g]:l}}function xa(e){return Dt(function(t){var r=t.length,a=r,h=Xe.prototype.thru;for(e&&t.reverse();a--;){var d=t[a];if("function"!=typeof d)throw new Je(_e);if(h&&!g&&"wrapper"==Pr(d))var g=new Xe([],!0)}for(a=g?a:r;++a<r;){var v=Pr(d=t[a]),w="wrapper"==v?Vs(d):l;g=w&&io(w[0])&&424==w[1]&&!w[4].length&&1==w[9]?g[Pr(w[0])].apply(g,w[3]):1==d.length&&io(d)?g[v]():g.thru(d)}return function(){var x=arguments,I=x[0];if(g&&1==x.length&&W(I))return g.plant(I).value();for(var T=0,A=r?t[T].apply(this,x):I;++T<r;)A=t[T].call(this,A);return A}})}function mr(e,t,r,a,h,d,g,v,w,x){var I=128&t,T=1&t,A=2&t,L=24&t,F=512&t,N=A?l:_n(e);return function O(){for(var G=arguments.length,Z=P(G),We=G;We--;)Z[We]=arguments[We];if(L)var we=Mi(O),Ke=Ml(Z,we);if(a&&(Z=ba(Z,a,h,L)),d&&(Z=wa(Z,d,g,L)),G-=Ke,L&&G<x){var se=Gt(Z,we);return Ta(e,t,mr,O.placeholder,r,Z,se,v,w,x-G)}var ot=T?r:this,Rt=A?ot[e]:e;return G=Z.length,v?Z=Uh(Z,v):F&&G>1&&Z.reverse(),I&&w<G&&(Z.length=w),this&&this!==$&&this instanceof O&&(Rt=N||_n(Rt)),Rt.apply(ot,Z)}}function Ia(e,t){return function(r,a){return function Jc(e,t,r,a){return ft(e,function(h,d,g){t(a,r(h),d,g)}),a}(r,e,t(a),{})}}function br(e,t){return function(r,a){var h;if(r===l&&a===l)return t;if(r!==l&&(h=r),a!==l){if(h===l)return a;"string"==typeof r||"string"==typeof a?(r=Oe(r),a=Oe(a)):(r=ua(r),a=ua(a)),h=e(r,a)}return h}}function Ys(e){return Dt(function(t){return t=j(t,Fe(B())),U(function(r){var a=this;return e(t,function(h){return Be(h,a,r)})})})}function wr(e,t){var r=(t=t===l?" ":Oe(t)).length;if(r<2)return r?Ns(t,e):t;var a=Ns(t,or(e/Di(t)));return Ii(t)?Yt(nt(a),0,e).join(""):a.slice(0,e)}function Da(e){return function(t,r,a){return a&&"number"!=typeof a&&be(t,r,a)&&(r=a=l),t=St(t),r===l?(r=t,t=0):r=St(r),function lh(e,t,r,a){for(var h=-1,d=ce(or((t-e)/(r||1)),0),g=P(d);d--;)g[a?d:++h]=e,e+=r;return g}(t,r,a=a===l?t<r?1:-1:St(a),e)}}function Cr(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=tt(t),r=tt(r)),e(t,r)}}function Ta(e,t,r,a,h,d,g,v,w,x){var I=8&t;t|=I?32:64,4&(t&=~(I?64:32))||(t&=-4);var N=[e,t,h,I?d:l,I?g:l,I?l:d,I?l:g,v,w,x],O=r.apply(l,N);return io(e)&&Ka(O,N),O.placeholder=a,Na(O,e,t)}function Qs(e){var t=le[e];return function(r,a){if(r=tt(r),(a=null==a?0:pe(K(a),292))&&No(r)){var h=(Q(r)+"e").split("e");return+((h=(Q(t(h[0]+"e"+(+h[1]+a)))+"e").split("e"))[0]+"e"+(+h[1]-a))}return t(r)}}var yh=Ai&&1/Qn(new Ai([,-0]))[1]==ct?function(e){return new Ai(e)}:mo;function Aa(e){return function(t){var r=ge(t);return r==ke?xs(t):r==Pe?function Nl(m){var E=-1,P=Array(m.size);return m.forEach(function(S){P[++E]=[S,S]}),P}(t):function kl(m,E){return j(E,function(P){return[P,m[P]]})}(t,e(t))}}function It(e,t,r,a,h,d,g,v){var w=2&t;if(!w&&"function"!=typeof e)throw new Je(_e);var x=a?a.length:0;if(x||(t&=-97,a=h=l),g=g===l?g:ce(K(g),0),v=v===l?v:K(v),x-=h?h.length:0,64&t){var I=a,T=h;a=h=l}var A=w?l:Vs(e),L=[e,t,r,a,h,I,T,d,g,v];if(A&&function Wh(e,t){var r=e[1],a=t[1],h=r|a;if(!(h<131||(128==a&&8==r||128==a&&256==r&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==r)))return e;1&a&&(e[2]=t[2],h|=1&r?0:4);var v=t[3];if(v){var w=e[3];e[3]=w?ba(w,v,t[4]):v,e[4]=w?Gt(e[3],ui):t[4]}(v=t[5])&&(e[5]=(w=e[5])?wa(w,v,t[6]):v,e[6]=w?Gt(e[5],ui):t[6]),(v=t[7])&&(e[7]=v),128&a&&(e[8]=null==e[8]?t[8]:pe(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=h}(L,A),e=L[0],t=L[1],r=L[2],a=L[3],h=L[4],!(v=L[9]=L[9]===l?w?0:e.length:ce(L[9]-x,0))&&24&t&&(t&=-25),t&&1!=t)F=8==t||16==t?function Ph(e,t,r){var a=_n(e);return function h(){for(var d=arguments.length,g=P(d),v=d,w=Mi(h);v--;)g[v]=arguments[v];var x=d<3&&g[0]!==w&&g[d-1]!==w?[]:Gt(g,w);return(d-=x.length)<r?Ta(e,t,mr,h.placeholder,l,g,x,l,l,r-d):Be(this&&this!==$&&this instanceof h?a:e,this,g)}}(e,t,v):32!=t&&33!=t||h.length?mr.apply(l,L):function Eh(e,t,r,a){var h=1&t,d=_n(e);return function g(){for(var v=-1,w=arguments.length,x=-1,I=a.length,T=P(I+w),A=this&&this!==$&&this instanceof g?d:e;++x<I;)T[x]=a[x];for(;w--;)T[x++]=arguments[++v];return Be(A,h?r:this,T)}}(e,t,r,a);else var F=function Ch(e,t,r){var a=1&t,h=_n(e);return function d(){return(this&&this!==$&&this instanceof d?h:e).apply(a?r:this,arguments)}}(e,t,r);return Na((A?ca:Ka)(F,L),e,t)}function Sa(e,t,r,a){return e===l||st(e,Ti[r])&&!X.call(a,r)?t:e}function Ra(e,t,r,a,h,d){return te(e)&&te(t)&&(d.set(t,e),pr(e,t,l,Ra,d),d.delete(t)),e}function xh(e){return bn(e)?l:e}function La(e,t,r,a,h,d){var g=1&r,v=e.length,w=t.length;if(v!=w&&!(g&&w>v))return!1;var x=d.get(e),I=d.get(t);if(x&&I)return x==t&&I==e;var T=-1,A=!0,L=2&r?new si:l;for(d.set(e,t),d.set(t,e);++T<v;){var F=e[T],N=t[T];if(a)var O=g?a(N,F,T,t,e,d):a(F,N,T,e,t,d);if(O!==l){if(O)continue;A=!1;break}if(L){if(!bs(t,function(G,Z){if(!sn(L,Z)&&(F===G||h(F,G,r,a,d)))return L.push(Z)})){A=!1;break}}else if(F!==N&&!h(F,N,r,a,d)){A=!1;break}}return d.delete(e),d.delete(t),A}function Dt(e){return ro(Ha(e,l,$a),e+"")}function Js(e){return Vo(e,ue,eo)}function Xs(e){return Vo(e,Te,ka)}var Vs=lr?function(e){return lr.get(e)}:mo;function Pr(e){for(var t=e.name+"",r=Si[t],a=X.call(Si,t)?r.length:0;a--;){var h=r[a],d=h.func;if(null==d||d==e)return h.name}return t}function Mi(e){return(X.call(u,"placeholder")?u:e).placeholder}function B(){var e=u.iteratee||_o;return e=e===_o?ta:e,arguments.length?e(arguments[0],arguments[1]):e}function Er(e,t){var r=e.__data__;return function Bh(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function js(e){for(var t=ue(e),r=t.length;r--;){var a=t[r],h=e[a];t[r]=[a,h,Fa(h)]}return t}function li(e,t){var r=function Hl(m,E){return null==m?l:m[E]}(e,t);return ea(r)?r:l}var eo=Ds?function(e){return null==e?[]:(e=V(e),Nt(Ds(e),function(t){return Wo.call(e,t)}))}:bo,ka=Ds?function(e){for(var t=[];e;)Ut(t,eo(e)),e=nr(e);return t}:bo,ge=me;function Ma(e,t,r){for(var a=-1,h=(t=$t(t,e)).length,d=!1;++a<h;){var g=gt(t[a]);if(!(d=null!=e&&r(e,g)))break;e=e[g]}return d||++a!=h?d:!!(h=null==e?0:e.length)&&Sr(h)&&Tt(g,h)&&(W(e)||hi(e))}function Ba(e){return"function"!=typeof e.constructor||vn(e)?{}:Ri(nr(e))}function Mh(e){return W(e)||hi(e)||!!(Ko&&e&&e[Ko])}function Tt(e,t){var r=typeof e;return!!(t=null==t?it:t)&&("number"==r||"symbol"!=r&&Ee.test(e))&&e>-1&&e%1==0&&e<t}function be(e,t,r){if(!te(r))return!1;var a=typeof t;return!!("number"==a?De(r)&&Tt(t,r.length):"string"==a&&t in r)&&st(r[t],e)}function to(e,t){if(W(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!He(e))||Gr.test(e)||!Ur.test(e)||null!=t&&e in V(t)}function io(e){var t=Pr(e),r=u[t];if("function"!=typeof r||!(t in z.prototype))return!1;if(e===r)return!0;var a=Vs(r);return!!a&&e===a[0]}(Ts&&ge(new Ts(new ArrayBuffer(1)))!=wt||an&&ge(new an)!=ke||As&&ge(As.resolve())!=Ui||Ai&&ge(new Ai)!=Pe||ln&&ge(new ln)!=ti)&&(ge=function(e){var t=me(e),r=t==ve?e.constructor:l,a=r?ci(r):"";if(a)switch(a){case hc:return wt;case uc:return ke;case dc:return Ui;case fc:return Pe;case pc:return ti}return t});var Oh=Vn?At:wo;function vn(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ti)}function Fa(e){return e==e&&!te(e)}function Oa(e,t){return function(r){return null!=r&&r[e]===t&&(t!==l||e in V(r))}}function Ha(e,t,r){return t=ce(t===l?e.length-1:t,0),function(){for(var a=arguments,h=-1,d=ce(a.length-t,0),g=P(d);++h<d;)g[h]=a[t+h];h=-1;for(var v=P(t+1);++h<t;)v[h]=a[h];return v[t]=r(g),Be(e,this,v)}}function Wa(e,t){return t.length<2?e:ai(e,je(t,0,-1))}function Uh(e,t){for(var r=e.length,a=pe(t.length,r),h=Ie(e);a--;){var d=t[a];e[a]=Tt(d,r)?h[d]:l}return e}function no(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ka=Ua(ca),mn=nc||function(e,t){return $.setTimeout(e,t)},ro=Ua(uh);function Na(e,t,r){var a=t+"";return ro(e,function kh(e,t){var r=t.length;if(!r)return e;var a=r-1;return t[a]=(r>1?"& ":"")+t[a],t=t.join(r>2?", ":" "),e.replace($r,"{\n/* [wrapped with "+t+"] */\n")}(a,function Gh(e,t){return Qe(xn,function(r){var a="_."+r[0];t&r[1]&&!$n(e,a)&&e.push(a)}),e.sort()}(function Sh(e){var t=e.match(Yr);return t?t[1].split(Qr):[]}(a),r)))}function Ua(e){var t=0,r=0;return function(){var a=ac(),h=16-(a-r);if(r=a,h>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(l,arguments)}}function yr(e,t){var r=-1,a=e.length,h=a-1;for(t=t===l?a:t;++r<t;){var d=Ks(r,h),g=e[d];e[d]=e[r],e[r]=g}return e.length=t,e}var Ga=function Hh(e){var t=Tr(e,function(a){return 500===r.size&&r.clear(),a}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(zr,function(r,a,h,d){t.push(h?d.replace(Vr,"$1"):a||r)}),t});function gt(e){if("string"==typeof e||He(e))return e;var t=e+"";return"0"==t&&1/e==-ct?"-0":t}function ci(e){if(null!=e){try{return jn.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function za(e){if(e instanceof z)return e.clone();var t=new Xe(e.__wrapped__,e.__chain__);return t.__actions__=Ie(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var $h=U(function(e,t){return re(e)?dn(e,de(t,1,re,!0)):[]}),Yh=U(function(e,t){var r=et(t);return re(r)&&(r=l),re(e)?dn(e,de(t,1,re,!0),B(r,2)):[]}),Qh=U(function(e,t){var r=et(t);return re(r)&&(r=l),re(e)?dn(e,de(t,1,re,!0),l,r):[]});function Za(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var h=null==r?0:K(r);return h<0&&(h=ce(a+h,0)),Yn(e,B(t,3),h)}function qa(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var h=a-1;return r!==l&&(h=K(r),h=r<0?ce(a+h,0):pe(h,a-1)),Yn(e,B(t,3),h,!0)}function $a(e){return null!=e&&e.length?de(e,1):[]}function Ya(e){return e&&e.length?e[0]:l}var ou=U(function(e){var t=j(e,Zs);return t.length&&t[0]===e[0]?Bs(t):[]}),au=U(function(e){var t=et(e),r=j(e,Zs);return t===et(r)?t=l:r.pop(),r.length&&r[0]===e[0]?Bs(r,B(t,2)):[]}),lu=U(function(e){var t=et(e),r=j(e,Zs);return(t="function"==typeof t?t:l)&&r.pop(),r.length&&r[0]===e[0]?Bs(r,l,t):[]});function et(e){var t=null==e?0:e.length;return t?e[t-1]:l}var du=U(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?Ws(e,t):e}var gu=Dt(function(e,t){var r=null==e?0:e.length,a=Rs(e,t);return la(e,j(t,function(h){return Tt(h,r)?+h:h}).sort(ma)),a});function so(e){return null==e?e:cc.call(e)}var Ru=U(function(e){return qt(de(e,1,re,!0))}),Lu=U(function(e){var t=et(e);return re(t)&&(t=l),qt(de(e,1,re,!0),B(t,2))}),ku=U(function(e){var t=et(e);return t="function"==typeof t?t:l,qt(de(e,1,re,!0),l,t)});function oo(e){if(!e||!e.length)return[];var t=0;return e=Nt(e,function(r){if(re(r))return t=ce(r.length,t),!0}),Es(t,function(r){return j(e,ws(r))})}function Ja(e,t){if(!e||!e.length)return[];var r=oo(e);return null==t?r:j(r,function(a){return Be(t,l,a)})}var Ou=U(function(e,t){return re(e)?dn(e,t):[]}),Hu=U(function(e){return zs(Nt(e,re))}),Wu=U(function(e){var t=et(e);return re(t)&&(t=l),zs(Nt(e,re),B(t,2))}),Ku=U(function(e){var t=et(e);return t="function"==typeof t?t:l,zs(Nt(e,re),l,t)}),Nu=U(oo),zu=U(function(e){var t=e.length,r=t>1?e[t-1]:l;return r="function"==typeof r?(e.pop(),r):l,Ja(e,r)});function Xa(e){var t=u(e);return t.__chain__=!0,t}function xr(e,t){return t(e)}var qu=Dt(function(e){var t=e.length,r=t?e[0]:0,a=this.__wrapped__,h=function(d){return Rs(d,e)};return!(t>1||this.__actions__.length)&&a instanceof z&&Tt(r)?((a=a.slice(r,+r+(t?1:0))).__actions__.push({func:xr,args:[h],thisArg:l}),new Xe(a,this.__chain__).thru(function(d){return t&&!d.length&&d.push(l),d})):this.thru(h)}),ed=vr(function(e,t,r){X.call(e,r)?++e[r]:xt(e,r,1)}),nd=ya(Za),rd=ya(qa);function Va(e,t){return(W(e)?Qe:Zt)(e,B(t,3))}function ja(e,t){return(W(e)?Il:Qo)(e,B(t,3))}var ld=vr(function(e,t,r){X.call(e,r)?e[r].push(t):xt(e,r,[t])}),hd=U(function(e,t,r){var a=-1,h="function"==typeof t,d=De(e)?P(e.length):[];return Zt(e,function(g){d[++a]=h?Be(t,g,r):fn(g,t,r)}),d}),ud=vr(function(e,t,r){xt(e,r,t)});function Ir(e,t){return(W(e)?j:ia)(e,B(t,3))}var fd=vr(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),Pd=U(function(e,t){if(null==e)return[];var r=t.length;return r>1&&be(e,t[0],t[1])?t=[]:r>2&&be(t[0],t[1],t[2])&&(t=[t[0]]),oa(e,de(t,1),[])}),Dr=ic||function(){return $.Date.now()};function el(e,t,r){return t=r?l:t,It(e,128,l,l,l,l,t=e&&null==t?e.length:t)}function tl(e,t){var r;if("function"!=typeof t)throw new Je(_e);return e=K(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=l),r}}var ao=U(function(e,t,r){var a=1;if(r.length){var h=Gt(r,Mi(ao));a|=32}return It(e,a,t,r,h)}),il=U(function(e,t,r){var a=3;if(r.length){var h=Gt(r,Mi(il));a|=32}return It(t,a,e,r,h)});function sl(e,t,r){var a,h,d,g,v,w,x=0,I=!1,T=!1,A=!0;if("function"!=typeof e)throw new Je(_e);function L(se){var ot=a,Rt=h;return a=h=l,x=se,g=e.apply(Rt,ot)}function F(se){return x=se,v=mn(G,t),I?L(se):g}function O(se){var ot=se-w;return w===l||ot>=t||ot<0||T&&se-x>=d}function G(){var se=Dr();if(O(se))return Z(se);v=mn(G,function N(se){var yl=t-(se-w);return T?pe(yl,d-(se-x)):yl}(se))}function Z(se){return v=l,A&&a?L(se):(a=h=l,g)}function Ke(){var se=Dr(),ot=O(se);if(a=arguments,h=this,w=se,ot){if(v===l)return F(w);if(T)return ga(v),v=mn(G,t),L(w)}return v===l&&(v=mn(G,t)),g}return t=tt(t)||0,te(r)&&(I=!!r.leading,d=(T="maxWait"in r)?ce(tt(r.maxWait)||0,t):d,A="trailing"in r?!!r.trailing:A),Ke.cancel=function We(){v!==l&&ga(v),x=0,a=w=h=v=l},Ke.flush=function we(){return v===l?g:Z(Dr())},Ke}var yd=U(function(e,t){return Yo(e,1,t)}),xd=U(function(e,t,r){return Yo(e,tt(t)||0,r)});function Tr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Je(_e);var r=function(){var a=arguments,h=t?t.apply(this,a):a[0],d=r.cache;if(d.has(h))return d.get(h);var g=e.apply(this,a);return r.cache=d.set(h,g)||d,g};return r.cache=new(Tr.Cache||yt),r}function Ar(e){if("function"!=typeof e)throw new Je(_e);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Tr.Cache=yt;var Td=ph(function(e,t){var r=(t=1==t.length&&W(t[0])?j(t[0],Fe(B())):j(de(t,1),Fe(B()))).length;return U(function(a){for(var h=-1,d=pe(a.length,r);++h<d;)a[h]=t[h].call(this,a[h]);return Be(e,this,a)})}),lo=U(function(e,t){var r=Gt(t,Mi(lo));return It(e,32,l,t,r)}),ol=U(function(e,t){var r=Gt(t,Mi(ol));return It(e,64,l,t,r)}),Ad=Dt(function(e,t){return It(e,256,l,l,l,t)});function st(e,t){return e===t||e!=e&&t!=t}var Nd=Cr(Ms),Ud=Cr(function(e,t){return e>=t}),hi=jo(function(){return arguments}())?jo:function(e){return ie(e)&&X.call(e,"callee")&&!Wo.call(e,"callee")},W=P.isArray,Gd=nn?Fe(nn):function Xc(e){return ie(e)&&me(e)==Ht};function De(e){return null!=e&&Sr(e.length)&&!At(e)}function re(e){return ie(e)&&De(e)}var Qt=rc||wo,Zd=yi?Fe(yi):function Vc(e){return ie(e)&&me(e)==ht};function co(e){if(!ie(e))return!1;var t=me(e);return t==ut||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!bn(e)}function At(e){if(!te(e))return!1;var t=me(e);return t==jt||t==Ni||"[object AsyncFunction]"==t||"[object Proxy]"==t}function al(e){return"number"==typeof e&&e==K(e)}function Sr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=it}function te(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ie(e){return null!=e&&"object"==typeof e}var ll=rn?Fe(rn):function eh(e){return ie(e)&&ge(e)==ke};function cl(e){return"number"==typeof e||ie(e)&&me(e)==_i}function bn(e){if(!ie(e)||me(e)!=ve)return!1;var t=nr(e);if(null===t)return!0;var r=X.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&jn.call(r)==Vl}var ho=Eo?Fe(Eo):function th(e){return ie(e)&&me(e)==ei},hl=yo?Fe(yo):function ih(e){return ie(e)&&ge(e)==Pe};function Rr(e){return"string"==typeof e||!W(e)&&ie(e)&&me(e)==Ot}function He(e){return"symbol"==typeof e||ie(e)&&me(e)==vi}var Bi=xo?Fe(xo):function nh(e){return ie(e)&&Sr(e.length)&&!!i[me(e)]},lf=Cr(Hs),cf=Cr(function(e,t){return e<=t});function ul(e){if(!e)return[];if(De(e))return Rr(e)?nt(e):Ie(e);if(on&&e[on])return function Kl(m){for(var E,P=[];!(E=m.next()).done;)P.push(E.value);return P}(e[on]());var t=ge(e);return(t==ke?xs:t==Pe?Qn:Fi)(e)}function St(e){return e?(e=tt(e))===ct||e===-ct?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function K(e){var t=St(e),r=t%1;return t==t?r?t-r:t:0}function dl(e){return e?oi(K(e),0,Ze):0}function tt(e){if("number"==typeof e)return e;if(He(e))return NaN;if(te(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=te(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ro(e);var r=b.test(e);return r||q.test(e)?D(e.slice(2),r?2:8):Wt.test(e)?NaN:+e}function fl(e){return pt(e,Te(e))}function Q(e){return null==e?"":Oe(e)}var uf=Li(function(e,t){if(vn(t)||De(t))pt(t,ue(t),e);else for(var r in t)X.call(t,r)&&un(e,r,t[r])}),pl=Li(function(e,t){pt(t,Te(t),e)}),Lr=Li(function(e,t,r,a){pt(t,Te(t),e,a)}),df=Li(function(e,t,r,a){pt(t,ue(t),e,a)}),ff=Dt(Rs),gf=U(function(e,t){e=V(e);var r=-1,a=t.length,h=a>2?t[2]:l;for(h&&be(t[0],t[1],h)&&(a=1);++r<a;)for(var d=t[r],g=Te(d),v=-1,w=g.length;++v<w;){var x=g[v],I=e[x];(I===l||st(I,Ti[x])&&!X.call(e,x))&&(e[x]=d[x])}return e}),_f=U(function(e){return e.push(l,Ra),Be(gl,l,e)});function uo(e,t,r){var a=null==e?l:ai(e,t);return a===l?r:a}function fo(e,t){return null!=e&&Ma(e,t,Yc)}var If=Ia(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=er.call(t)),e[t]=r},go(Ae)),Df=Ia(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=er.call(t)),X.call(e,t)?e[t].push(r):e[t]=[r]},B),Tf=U(fn);function ue(e){return De(e)?zo(e):Os(e)}function Te(e){return De(e)?zo(e,!0):function rh(e){if(!te(e))return function Kh(e){var t=[];if(null!=e)for(var r in V(e))t.push(r);return t}(e);var t=vn(e),r=[];for(var a in e)"constructor"==a&&(t||!X.call(e,a))||r.push(a);return r}(e)}var Rf=Li(function(e,t,r){pr(e,t,r)}),gl=Li(function(e,t,r,a){pr(e,t,r,a)}),Lf=Dt(function(e,t){var r={};if(null==e)return r;var a=!1;t=j(t,function(d){return d=$t(d,e),a||(a=d.length>1),d}),pt(e,Xs(e),r),a&&(r=Ve(r,7,xh));for(var h=t.length;h--;)Gs(r,t[h]);return r}),Mf=Dt(function(e,t){return null==e?{}:function oh(e,t){return aa(e,t,function(r,a){return fo(e,a)})}(e,t)});function _l(e,t){if(null==e)return{};var r=j(Xs(e),function(a){return[a]});return t=B(t),aa(e,r,function(a,h){return t(a,h[0])})}var vl=Aa(ue),ml=Aa(Te);function Fi(e){return null==e?[]:ys(e,ue(e))}var qf=ki(function(e,t,r){return t=t.toLowerCase(),e+(r?bl(t):t)});function bl(e){return po(Q(e).toLowerCase())}function wl(e){return(e=Q(e))&&e.replace(ye,Bl).replace(fs,"")}var Jf=ki(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Xf=ki(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Vf=Ea("toLowerCase"),sp=ki(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),ap=ki(function(e,t,r){return e+(r?" ":"")+po(t)}),vp=ki(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),po=Ea("toUpperCase");function Cl(e,t,r){return e=Q(e),(t=r?l:t)===l?function Wl(m){return _s.test(m)}(e)?function $l(m){return m.match(ps)||[]}(e):function Sl(m){return m.match(Jr)||[]}(e):e.match(t)||[]}var Pl=U(function(e,t){try{return Be(e,l,t)}catch(r){return co(r)?r:new H(r)}}),mp=Dt(function(e,t){return Qe(t,function(r){r=gt(r),xt(e,r,ao(e[r],e))}),e});function go(e){return function(){return e}}var Pp=xa(),Ep=xa(!0);function Ae(e){return e}function _o(e){return ta("function"==typeof e?e:Ve(e,1))}var Ip=U(function(e,t){return function(r){return fn(r,e,t)}}),Dp=U(function(e,t){return function(r){return fn(e,r,t)}});function vo(e,t,r){var a=ue(t),h=fr(t,a);null==r&&(!te(t)||!h.length&&a.length)&&(r=t,t=e,e=this,h=fr(t,ue(t)));var d=!(te(r)&&"chain"in r&&!r.chain),g=At(e);return Qe(h,function(v){var w=t[v];e[v]=w,g&&(e.prototype[v]=function(){var x=this.__chain__;if(d||x){var I=e(this.__wrapped__),T=I.__actions__=Ie(this.__actions__);return T.push({func:w,args:arguments,thisArg:e}),I.__chain__=x,I}return w.apply(e,Ut([this.value()],arguments))})}),e}function mo(){}var Sp=Ys(j),Rp=Ys(Io),Lp=Ys(bs);function El(e){return to(e)?ws(gt(e)):function ah(e){return function(t){return ai(t,e)}}(e)}var Mp=Da(),Bp=Da(!0);function bo(){return[]}function wo(){return!1}var Up=br(function(e,t){return e+t},0),Gp=Qs("ceil"),zp=br(function(e,t){return e/t},1),Zp=Qs("floor"),Vp=br(function(e,t){return e*t},1),jp=Qs("round"),eg=br(function(e,t){return e-t},0);return u.after=function Ed(e,t){if("function"!=typeof t)throw new Je(_e);return e=K(e),function(){if(--e<1)return t.apply(this,arguments)}},u.ary=el,u.assign=uf,u.assignIn=pl,u.assignInWith=Lr,u.assignWith=df,u.at=ff,u.before=tl,u.bind=ao,u.bindAll=mp,u.bindKey=il,u.castArray=function Bd(){if(!arguments.length)return[];var e=arguments[0];return W(e)?e:[e]},u.chain=Xa,u.chunk=function zh(e,t,r){t=(r?be(e,t,r):t===l)?1:ce(K(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var h=0,d=0,g=P(or(a/t));h<a;)g[d++]=je(e,h,h+=t);return g},u.compact=function Zh(e){for(var t=-1,r=null==e?0:e.length,a=0,h=[];++t<r;){var d=e[t];d&&(h[a++]=d)}return h},u.concat=function qh(){var e=arguments.length;if(!e)return[];for(var t=P(e-1),r=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Ut(W(r)?Ie(r):[r],de(t,1))},u.cond=function bp(e){var t=null==e?0:e.length,r=B();return e=t?j(e,function(a){if("function"!=typeof a[1])throw new Je(_e);return[r(a[0]),a[1]]}):[],U(function(a){for(var h=-1;++h<t;){var d=e[h];if(Be(d[0],this,a))return Be(d[1],this,a)}})},u.conforms=function wp(e){return function zc(e){var t=ue(e);return function(r){return $o(r,e,t)}}(Ve(e,1))},u.constant=go,u.countBy=ed,u.create=function pf(e,t){var r=Ri(e);return null==t?r:qo(r,t)},u.curry=function nl(e,t,r){var a=It(e,8,l,l,l,l,l,t=r?l:t);return a.placeholder=nl.placeholder,a},u.curryRight=function rl(e,t,r){var a=It(e,16,l,l,l,l,l,t=r?l:t);return a.placeholder=rl.placeholder,a},u.debounce=sl,u.defaults=gf,u.defaultsDeep=_f,u.defer=yd,u.delay=xd,u.difference=$h,u.differenceBy=Yh,u.differenceWith=Qh,u.drop=function Jh(e,t,r){var a=null==e?0:e.length;return a?je(e,(t=r||t===l?1:K(t))<0?0:t,a):[]},u.dropRight=function Xh(e,t,r){var a=null==e?0:e.length;return a?je(e,0,(t=a-(t=r||t===l?1:K(t)))<0?0:t):[]},u.dropRightWhile=function Vh(e,t){return e&&e.length?_r(e,B(t,3),!0,!0):[]},u.dropWhile=function jh(e,t){return e&&e.length?_r(e,B(t,3),!0):[]},u.fill=function eu(e,t,r,a){var h=null==e?0:e.length;return h?(r&&"number"!=typeof r&&be(e,t,r)&&(r=0,a=h),function qc(e,t,r,a){var h=e.length;for((r=K(r))<0&&(r=-r>h?0:h+r),(a=a===l||a>h?h:K(a))<0&&(a+=h),a=r>a?0:dl(a);r<a;)e[r++]=t;return e}(e,t,r,a)):[]},u.filter=function id(e,t){return(W(e)?Nt:Jo)(e,B(t,3))},u.flatMap=function sd(e,t){return de(Ir(e,t),1)},u.flatMapDeep=function od(e,t){return de(Ir(e,t),ct)},u.flatMapDepth=function ad(e,t,r){return r=r===l?1:K(r),de(Ir(e,t),r)},u.flatten=$a,u.flattenDeep=function tu(e){return null!=e&&e.length?de(e,ct):[]},u.flattenDepth=function iu(e,t){return null!=e&&e.length?de(e,t=t===l?1:K(t)):[]},u.flip=function Id(e){return It(e,512)},u.flow=Pp,u.flowRight=Ep,u.fromPairs=function nu(e){for(var t=-1,r=null==e?0:e.length,a={};++t<r;){var h=e[t];a[h[0]]=h[1]}return a},u.functions=function Ef(e){return null==e?[]:fr(e,ue(e))},u.functionsIn=function yf(e){return null==e?[]:fr(e,Te(e))},u.groupBy=ld,u.initial=function su(e){return null!=e&&e.length?je(e,0,-1):[]},u.intersection=ou,u.intersectionBy=au,u.intersectionWith=lu,u.invert=If,u.invertBy=Df,u.invokeMap=hd,u.iteratee=_o,u.keyBy=ud,u.keys=ue,u.keysIn=Te,u.map=Ir,u.mapKeys=function Af(e,t){var r={};return t=B(t,3),ft(e,function(a,h,d){xt(r,t(a,h,d),a)}),r},u.mapValues=function Sf(e,t){var r={};return t=B(t,3),ft(e,function(a,h,d){xt(r,h,t(a,h,d))}),r},u.matches=function yp(e){return na(Ve(e,1))},u.matchesProperty=function xp(e,t){return ra(e,Ve(t,1))},u.memoize=Tr,u.merge=Rf,u.mergeWith=gl,u.method=Ip,u.methodOf=Dp,u.mixin=vo,u.negate=Ar,u.nthArg=function Ap(e){return e=K(e),U(function(t){return sa(t,e)})},u.omit=Lf,u.omitBy=function kf(e,t){return _l(e,Ar(B(t)))},u.once=function Dd(e){return tl(2,e)},u.orderBy=function dd(e,t,r,a){return null==e?[]:(W(t)||(t=null==t?[]:[t]),W(r=a?l:r)||(r=null==r?[]:[r]),oa(e,t,r))},u.over=Sp,u.overArgs=Td,u.overEvery=Rp,u.overSome=Lp,u.partial=lo,u.partialRight=ol,u.partition=fd,u.pick=Mf,u.pickBy=_l,u.property=El,u.propertyOf=function kp(e){return function(t){return null==e?l:ai(e,t)}},u.pull=du,u.pullAll=Qa,u.pullAllBy=function fu(e,t,r){return e&&e.length&&t&&t.length?Ws(e,t,B(r,2)):e},u.pullAllWith=function pu(e,t,r){return e&&e.length&&t&&t.length?Ws(e,t,l,r):e},u.pullAt=gu,u.range=Mp,u.rangeRight=Bp,u.rearg=Ad,u.reject=function _d(e,t){return(W(e)?Nt:Jo)(e,Ar(B(t,3)))},u.remove=function _u(e,t){var r=[];if(!e||!e.length)return r;var a=-1,h=[],d=e.length;for(t=B(t,3);++a<d;){var g=e[a];t(g,a,e)&&(r.push(g),h.push(a))}return la(e,h),r},u.rest=function Sd(e,t){if("function"!=typeof e)throw new Je(_e);return U(e,t=t===l?t:K(t))},u.reverse=so,u.sampleSize=function md(e,t,r){return t=(r?be(e,t,r):t===l)?1:K(t),(W(e)?Kc:hh)(e,t)},u.set=function Ff(e,t,r){return null==e?e:gn(e,t,r)},u.setWith=function Of(e,t,r,a){return a="function"==typeof a?a:l,null==e?e:gn(e,t,r,a)},u.shuffle=function bd(e){return(W(e)?Nc:dh)(e)},u.slice=function vu(e,t,r){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&be(e,t,r)?(t=0,r=a):(t=null==t?0:K(t),r=r===l?a:K(r)),je(e,t,r)):[]},u.sortBy=Pd,u.sortedUniq=function yu(e){return e&&e.length?ha(e):[]},u.sortedUniqBy=function xu(e,t){return e&&e.length?ha(e,B(t,2)):[]},u.split=function op(e,t,r){return r&&"number"!=typeof r&&be(e,t,r)&&(t=r=l),(r=r===l?Ze:r>>>0)?(e=Q(e))&&("string"==typeof t||null!=t&&!ho(t))&&!(t=Oe(t))&&Ii(e)?Yt(nt(e),0,r):e.split(t,r):[]},u.spread=function Rd(e,t){if("function"!=typeof e)throw new Je(_e);return t=null==t?0:ce(K(t),0),U(function(r){var a=r[t],h=Yt(r,0,t);return a&&Ut(h,a),Be(e,this,h)})},u.tail=function Iu(e){var t=null==e?0:e.length;return t?je(e,1,t):[]},u.take=function Du(e,t,r){return e&&e.length?je(e,0,(t=r||t===l?1:K(t))<0?0:t):[]},u.takeRight=function Tu(e,t,r){var a=null==e?0:e.length;return a?je(e,(t=a-(t=r||t===l?1:K(t)))<0?0:t,a):[]},u.takeRightWhile=function Au(e,t){return e&&e.length?_r(e,B(t,3),!1,!0):[]},u.takeWhile=function Su(e,t){return e&&e.length?_r(e,B(t,3)):[]},u.tap=function Zu(e,t){return t(e),e},u.throttle=function Ld(e,t,r){var a=!0,h=!0;if("function"!=typeof e)throw new Je(_e);return te(r)&&(a="leading"in r?!!r.leading:a,h="trailing"in r?!!r.trailing:h),sl(e,t,{leading:a,maxWait:t,trailing:h})},u.thru=xr,u.toArray=ul,u.toPairs=vl,u.toPairsIn=ml,u.toPath=function Kp(e){return W(e)?j(e,gt):He(e)?[e]:Ie(Ga(Q(e)))},u.toPlainObject=fl,u.transform=function Hf(e,t,r){var a=W(e),h=a||Qt(e)||Bi(e);if(t=B(t,4),null==r){var d=e&&e.constructor;r=h?a?new d:[]:te(e)&&At(d)?Ri(nr(e)):{}}return(h?Qe:ft)(e,function(g,v,w){return t(r,g,v,w)}),r},u.unary=function kd(e){return el(e,1)},u.union=Ru,u.unionBy=Lu,u.unionWith=ku,u.uniq=function Mu(e){return e&&e.length?qt(e):[]},u.uniqBy=function Bu(e,t){return e&&e.length?qt(e,B(t,2)):[]},u.uniqWith=function Fu(e,t){return t="function"==typeof t?t:l,e&&e.length?qt(e,l,t):[]},u.unset=function Wf(e,t){return null==e||Gs(e,t)},u.unzip=oo,u.unzipWith=Ja,u.update=function Kf(e,t,r){return null==e?e:da(e,t,qs(r))},u.updateWith=function Nf(e,t,r,a){return a="function"==typeof a?a:l,null==e?e:da(e,t,qs(r),a)},u.values=Fi,u.valuesIn=function Uf(e){return null==e?[]:ys(e,Te(e))},u.without=Ou,u.words=Cl,u.wrap=function Md(e,t){return lo(qs(t),e)},u.xor=Hu,u.xorBy=Wu,u.xorWith=Ku,u.zip=Nu,u.zipObject=function Uu(e,t){return pa(e||[],t||[],un)},u.zipObjectDeep=function Gu(e,t){return pa(e||[],t||[],gn)},u.zipWith=zu,u.entries=vl,u.entriesIn=ml,u.extend=pl,u.extendWith=Lr,vo(u,u),u.add=Up,u.attempt=Pl,u.camelCase=qf,u.capitalize=bl,u.ceil=Gp,u.clamp=function Gf(e,t,r){return r===l&&(r=t,t=l),r!==l&&(r=(r=tt(r))==r?r:0),t!==l&&(t=(t=tt(t))==t?t:0),oi(tt(e),t,r)},u.clone=function Fd(e){return Ve(e,4)},u.cloneDeep=function Hd(e){return Ve(e,5)},u.cloneDeepWith=function Wd(e,t){return Ve(e,5,t="function"==typeof t?t:l)},u.cloneWith=function Od(e,t){return Ve(e,4,t="function"==typeof t?t:l)},u.conformsTo=function Kd(e,t){return null==t||$o(e,t,ue(t))},u.deburr=wl,u.defaultTo=function Cp(e,t){return null==e||e!=e?t:e},u.divide=zp,u.endsWith=function $f(e,t,r){e=Q(e),t=Oe(t);var a=e.length,h=r=r===l?a:oi(K(r),0,a);return(r-=t.length)>=0&&e.slice(r,h)==t},u.eq=st,u.escape=function Yf(e){return(e=Q(e))&&Kr.test(e)?e.replace(Mn,Fl):e},u.escapeRegExp=function Qf(e){return(e=Q(e))&&Zr.test(e)?e.replace(Zi,"\\$&"):e},u.every=function td(e,t,r){var a=W(e)?Io:Zc;return r&&be(e,t,r)&&(t=l),a(e,B(t,3))},u.find=nd,u.findIndex=Za,u.findKey=function vf(e,t){return Do(e,B(t,3),ft)},u.findLast=rd,u.findLastIndex=qa,u.findLastKey=function mf(e,t){return Do(e,B(t,3),ks)},u.floor=Zp,u.forEach=Va,u.forEachRight=ja,u.forIn=function bf(e,t){return null==e?e:Ls(e,B(t,3),Te)},u.forInRight=function wf(e,t){return null==e?e:Xo(e,B(t,3),Te)},u.forOwn=function Cf(e,t){return e&&ft(e,B(t,3))},u.forOwnRight=function Pf(e,t){return e&&ks(e,B(t,3))},u.get=uo,u.gt=Nd,u.gte=Ud,u.has=function xf(e,t){return null!=e&&Ma(e,t,$c)},u.hasIn=fo,u.head=Ya,u.identity=Ae,u.includes=function cd(e,t,r,a){e=De(e)?e:Fi(e),r=r&&!a?K(r):0;var h=e.length;return r<0&&(r=ce(h+r,0)),Rr(e)?r<=h&&e.indexOf(t,r)>-1:!!h&&xi(e,t,r)>-1},u.indexOf=function ru(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var h=null==r?0:K(r);return h<0&&(h=ce(a+h,0)),xi(e,t,h)},u.inRange=function zf(e,t,r){return t=St(t),r===l?(r=t,t=0):r=St(r),function Qc(e,t,r){return e>=pe(t,r)&&e<ce(t,r)}(e=tt(e),t,r)},u.invoke=Tf,u.isArguments=hi,u.isArray=W,u.isArrayBuffer=Gd,u.isArrayLike=De,u.isArrayLikeObject=re,u.isBoolean=function zd(e){return!0===e||!1===e||ie(e)&&me(e)==Vt},u.isBuffer=Qt,u.isDate=Zd,u.isElement=function qd(e){return ie(e)&&1===e.nodeType&&!bn(e)},u.isEmpty=function $d(e){if(null==e)return!0;if(De(e)&&(W(e)||"string"==typeof e||"function"==typeof e.splice||Qt(e)||Bi(e)||hi(e)))return!e.length;var t=ge(e);if(t==ke||t==Pe)return!e.size;if(vn(e))return!Os(e).length;for(var r in e)if(X.call(e,r))return!1;return!0},u.isEqual=function Yd(e,t){return pn(e,t)},u.isEqualWith=function Qd(e,t,r){var a=(r="function"==typeof r?r:l)?r(e,t):l;return a===l?pn(e,t,l,r):!!a},u.isError=co,u.isFinite=function Jd(e){return"number"==typeof e&&No(e)},u.isFunction=At,u.isInteger=al,u.isLength=Sr,u.isMap=ll,u.isMatch=function Xd(e,t){return e===t||Fs(e,t,js(t))},u.isMatchWith=function Vd(e,t,r){return r="function"==typeof r?r:l,Fs(e,t,js(t),r)},u.isNaN=function jd(e){return cl(e)&&e!=+e},u.isNative=function ef(e){if(Oh(e))throw new H("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ea(e)},u.isNil=function nf(e){return null==e},u.isNull=function tf(e){return null===e},u.isNumber=cl,u.isObject=te,u.isObjectLike=ie,u.isPlainObject=bn,u.isRegExp=ho,u.isSafeInteger=function rf(e){return al(e)&&e>=-it&&e<=it},u.isSet=hl,u.isString=Rr,u.isSymbol=He,u.isTypedArray=Bi,u.isUndefined=function sf(e){return e===l},u.isWeakMap=function of(e){return ie(e)&&ge(e)==ti},u.isWeakSet=function af(e){return ie(e)&&"[object WeakSet]"==me(e)},u.join=function cu(e,t){return null==e?"":sc.call(e,t)},u.kebabCase=Jf,u.last=et,u.lastIndexOf=function hu(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var h=a;return r!==l&&(h=(h=K(r))<0?ce(a+h,0):pe(h,a-1)),t==t?function Gl(m,E,P){for(var S=P+1;S--;)if(m[S]===E)return S;return S}(e,t,h):Yn(e,To,h,!0)},u.lowerCase=Xf,u.lowerFirst=Vf,u.lt=lf,u.lte=cf,u.max=function qp(e){return e&&e.length?dr(e,Ae,Ms):l},u.maxBy=function $p(e,t){return e&&e.length?dr(e,B(t,2),Ms):l},u.mean=function Yp(e){return Ao(e,Ae)},u.meanBy=function Qp(e,t){return Ao(e,B(t,2))},u.min=function Jp(e){return e&&e.length?dr(e,Ae,Hs):l},u.minBy=function Xp(e,t){return e&&e.length?dr(e,B(t,2),Hs):l},u.stubArray=bo,u.stubFalse=wo,u.stubObject=function Fp(){return{}},u.stubString=function Op(){return""},u.stubTrue=function Hp(){return!0},u.multiply=Vp,u.nth=function uu(e,t){return e&&e.length?sa(e,K(t)):l},u.noConflict=function Tp(){return $._===this&&($._=jl),this},u.noop=mo,u.now=Dr,u.pad=function jf(e,t,r){e=Q(e);var a=(t=K(t))?Di(e):0;if(!t||a>=t)return e;var h=(t-a)/2;return wr(ar(h),r)+e+wr(or(h),r)},u.padEnd=function ep(e,t,r){e=Q(e);var a=(t=K(t))?Di(e):0;return t&&a<t?e+wr(t-a,r):e},u.padStart=function tp(e,t,r){e=Q(e);var a=(t=K(t))?Di(e):0;return t&&a<t?wr(t-a,r)+e:e},u.parseInt=function ip(e,t,r){return r||null==t?t=0:t&&(t=+t),lc(Q(e).replace(qi,""),t||0)},u.random=function Zf(e,t,r){if(r&&"boolean"!=typeof r&&be(e,t,r)&&(t=r=l),r===l&&("boolean"==typeof t?(r=t,t=l):"boolean"==typeof e&&(r=e,e=l)),e===l&&t===l?(e=0,t=1):(e=St(e),t===l?(t=e,e=0):t=St(t)),e>t){var a=e;e=t,t=a}if(r||e%1||t%1){var h=Uo();return pe(e+h*(t-e+y("1e-"+((h+"").length-1))),t)}return Ks(e,t)},u.reduce=function pd(e,t,r){var a=W(e)?ms:So,h=arguments.length<3;return a(e,B(t,4),r,h,Zt)},u.reduceRight=function gd(e,t,r){var a=W(e)?Dl:So,h=arguments.length<3;return a(e,B(t,4),r,h,Qo)},u.repeat=function np(e,t,r){return t=(r?be(e,t,r):t===l)?1:K(t),Ns(Q(e),t)},u.replace=function rp(){var e=arguments,t=Q(e[0]);return e.length<3?t:t.replace(e[1],e[2])},u.result=function Bf(e,t,r){var a=-1,h=(t=$t(t,e)).length;for(h||(h=1,e=l);++a<h;){var d=null==e?l:e[gt(t[a])];d===l&&(a=h,d=r),e=At(d)?d.call(e):d}return e},u.round=jp,u.runInContext=m,u.sample=function vd(e){return(W(e)?Zo:ch)(e)},u.size=function wd(e){if(null==e)return 0;if(De(e))return Rr(e)?Di(e):e.length;var t=ge(e);return t==ke||t==Pe?e.size:Os(e).length},u.snakeCase=sp,u.some=function Cd(e,t,r){var a=W(e)?bs:fh;return r&&be(e,t,r)&&(t=l),a(e,B(t,3))},u.sortedIndex=function mu(e,t){return gr(e,t)},u.sortedIndexBy=function bu(e,t,r){return Us(e,t,B(r,2))},u.sortedIndexOf=function wu(e,t){var r=null==e?0:e.length;if(r){var a=gr(e,t);if(a<r&&st(e[a],t))return a}return-1},u.sortedLastIndex=function Cu(e,t){return gr(e,t,!0)},u.sortedLastIndexBy=function Pu(e,t,r){return Us(e,t,B(r,2),!0)},u.sortedLastIndexOf=function Eu(e,t){if(null!=e&&e.length){var a=gr(e,t,!0)-1;if(st(e[a],t))return a}return-1},u.startCase=ap,u.startsWith=function lp(e,t,r){return e=Q(e),r=null==r?0:oi(K(r),0,e.length),t=Oe(t),e.slice(r,r+t.length)==t},u.subtract=eg,u.sum=function tg(e){return e&&e.length?Ps(e,Ae):0},u.sumBy=function ig(e,t){return e&&e.length?Ps(e,B(t,2)):0},u.template=function cp(e,t,r){var a=u.templateSettings;r&&be(e,t,r)&&(t=l),e=Q(e),t=Lr({},t,a,Sa);var v,w,h=Lr({},t.imports,a.imports,Sa),d=ue(h),g=ys(h,d),x=0,I=t.interpolate||ee,T="__p += '",A=Is((t.escape||ee).source+"|"+I.source+"|"+(I===Bn?jr:ee).source+"|"+(t.evaluate||ee).source+"|$","g"),L="//# sourceURL="+(X.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++n+"]")+"\n";e.replace(A,function(O,G,Z,We,we,Ke){return Z||(Z=We),T+=e.slice(x,Ke).replace(qe,Ol),G&&(v=!0,T+="' +\n__e("+G+") +\n'"),we&&(w=!0,T+="';\n"+we+";\n__p += '"),Z&&(T+="' +\n((__t = ("+Z+")) == null ? '' : __t) +\n'"),x=Ke+O.length,O}),T+="';\n";var F=X.call(t,"variable")&&t.variable;if(F){if(Xr.test(F))throw new H("Invalid `variable` option passed into `_.template`")}else T="with (obj) {\n"+T+"\n}\n";T=(w?T.replace(Fr,""):T).replace(Po,"$1").replace(Or,"$1;"),T="function("+(F||"obj")+") {\n"+(F?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(v?", __e = _.escape":"")+(w?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+T+"return __p\n}";var N=Pl(function(){return Y(d,L+"return "+T).apply(l,g)});if(N.source=T,co(N))throw N;return N},u.times=function Wp(e,t){if((e=K(e))<1||e>it)return[];var r=Ze,a=pe(e,Ze);t=B(t),e-=Ze;for(var h=Es(a,t);++r<e;)t(r);return h},u.toFinite=St,u.toInteger=K,u.toLength=dl,u.toLower=function hp(e){return Q(e).toLowerCase()},u.toNumber=tt,u.toSafeInteger=function hf(e){return e?oi(K(e),-it,it):0===e?e:0},u.toString=Q,u.toUpper=function up(e){return Q(e).toUpperCase()},u.trim=function dp(e,t,r){if((e=Q(e))&&(r||t===l))return Ro(e);if(!e||!(t=Oe(t)))return e;var a=nt(e),h=nt(t);return Yt(a,Lo(a,h),ko(a,h)+1).join("")},u.trimEnd=function fp(e,t,r){if((e=Q(e))&&(r||t===l))return e.slice(0,Bo(e)+1);if(!e||!(t=Oe(t)))return e;var a=nt(e);return Yt(a,0,ko(a,nt(t))+1).join("")},u.trimStart=function pp(e,t,r){if((e=Q(e))&&(r||t===l))return e.replace(qi,"");if(!e||!(t=Oe(t)))return e;var a=nt(e);return Yt(a,Lo(a,nt(t))).join("")},u.truncate=function gp(e,t){var r=30,a="...";if(te(t)){var h="separator"in t?t.separator:h;r="length"in t?K(t.length):r,a="omission"in t?Oe(t.omission):a}var d=(e=Q(e)).length;if(Ii(e)){var g=nt(e);d=g.length}if(r>=d)return e;var v=r-Di(a);if(v<1)return a;var w=g?Yt(g,0,v).join(""):e.slice(0,v);if(h===l)return w+a;if(g&&(v+=w.length-v),ho(h)){if(e.slice(v).search(h)){var x,I=w;for(h.global||(h=Is(h.source,Q(p.exec(h))+"g")),h.lastIndex=0;x=h.exec(I);)var T=x.index;w=w.slice(0,T===l?v:T)}}else if(e.indexOf(Oe(h),v)!=v){var A=w.lastIndexOf(h);A>-1&&(w=w.slice(0,A))}return w+a},u.unescape=function _p(e){return(e=Q(e))&&Wr.test(e)?e.replace(Hr,zl):e},u.uniqueId=function Np(e){var t=++Xl;return Q(e)+t},u.upperCase=vp,u.upperFirst=po,u.each=Va,u.eachRight=ja,u.first=Ya,vo(u,function(){var e={};return ft(u,function(t,r){X.call(u.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),u.VERSION="4.17.21",Qe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){u[e].placeholder=u}),Qe(["drop","take"],function(e,t){z.prototype[e]=function(r){r=r===l?1:ce(K(r),0);var a=this.__filtered__&&!t?new z(this):this.clone();return a.__filtered__?a.__takeCount__=pe(r,a.__takeCount__):a.__views__.push({size:pe(r,Ze),type:e+(a.__dir__<0?"Right":"")}),a},z.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),Qe(["filter","map","takeWhile"],function(e,t){var r=t+1,a=1==r||3==r;z.prototype[e]=function(h){var d=this.clone();return d.__iteratees__.push({iteratee:B(h,3),type:r}),d.__filtered__=d.__filtered__||a,d}}),Qe(["head","last"],function(e,t){var r="take"+(t?"Right":"");z.prototype[e]=function(){return this[r](1).value()[0]}}),Qe(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");z.prototype[e]=function(){return this.__filtered__?new z(this):this[r](1)}}),z.prototype.compact=function(){return this.filter(Ae)},z.prototype.find=function(e){return this.filter(e).head()},z.prototype.findLast=function(e){return this.reverse().find(e)},z.prototype.invokeMap=U(function(e,t){return"function"==typeof e?new z(this):this.map(function(r){return fn(r,e,t)})}),z.prototype.reject=function(e){return this.filter(Ar(B(e)))},z.prototype.slice=function(e,t){e=K(e);var r=this;return r.__filtered__&&(e>0||t<0)?new z(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==l&&(r=(t=K(t))<0?r.dropRight(-t):r.take(t-e)),r)},z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},z.prototype.toArray=function(){return this.take(Ze)},ft(z.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),h=u[a?"take"+("last"==t?"Right":""):t],d=a||/^find/.test(t);!h||(u.prototype[t]=function(){var g=this.__wrapped__,v=a?[1]:arguments,w=g instanceof z,x=v[0],I=w||W(g),T=function(G){var Z=h.apply(u,Ut([G],v));return a&&A?Z[0]:Z};I&&r&&"function"==typeof x&&1!=x.length&&(w=I=!1);var A=this.__chain__,L=!!this.__actions__.length,F=d&&!A,N=w&&!L;if(!d&&I){g=N?g:new z(this);var O=e.apply(g,v);return O.__actions__.push({func:xr,args:[T],thisArg:l}),new Xe(O,A)}return F&&N?e.apply(this,v):(O=this.thru(T),F?a?O.value()[0]:O.value():O)})}),Qe(["pop","push","shift","sort","splice","unshift"],function(e){var t=Xn[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);u.prototype[e]=function(){var h=arguments;if(a&&!this.__chain__){var d=this.value();return t.apply(W(d)?d:[],h)}return this[r](function(g){return t.apply(W(g)?g:[],h)})}}),ft(z.prototype,function(e,t){var r=u[t];if(r){var a=r.name+"";X.call(Si,a)||(Si[a]=[]),Si[a].push({name:t,func:r})}}),Si[mr(l,2).name]=[{name:"wrapper",func:l}],z.prototype.clone=function gc(){var e=new z(this.__wrapped__);return e.__actions__=Ie(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ie(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ie(this.__views__),e},z.prototype.reverse=function _c(){if(this.__filtered__){var e=new z(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},z.prototype.value=function vc(){var e=this.__wrapped__.value(),t=this.__dir__,r=W(e),a=t<0,h=r?e.length:0,d=function Ah(e,t,r){for(var a=-1,h=r.length;++a<h;){var d=r[a],g=d.size;switch(d.type){case"drop":e+=g;break;case"dropRight":t-=g;break;case"take":t=pe(t,e+g);break;case"takeRight":e=ce(e,t-g)}}return{start:e,end:t}}(0,h,this.__views__),g=d.start,v=d.end,w=v-g,x=a?v:g-1,I=this.__iteratees__,T=I.length,A=0,L=pe(w,this.__takeCount__);if(!r||!a&&h==w&&L==w)return fa(e,this.__actions__);var F=[];e:for(;w--&&A<L;){for(var N=-1,O=e[x+=t];++N<T;){var G=I[N],We=G.type,we=(0,G.iteratee)(O);if(2==We)O=we;else if(!we){if(1==We)continue e;break e}}F[A++]=O}return F},u.prototype.at=qu,u.prototype.chain=function $u(){return Xa(this)},u.prototype.commit=function Yu(){return new Xe(this.value(),this.__chain__)},u.prototype.next=function Qu(){this.__values__===l&&(this.__values__=ul(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?l:this.__values__[this.__index__++]}},u.prototype.plant=function Xu(e){for(var t,r=this;r instanceof hr;){var a=za(r);a.__index__=0,a.__values__=l,t?h.__wrapped__=a:t=a;var h=a;r=r.__wrapped__}return h.__wrapped__=e,t},u.prototype.reverse=function Vu(){var e=this.__wrapped__;if(e instanceof z){var t=e;return this.__actions__.length&&(t=new z(this)),(t=t.reverse()).__actions__.push({func:xr,args:[so],thisArg:l}),new Xe(t,this.__chain__)}return this.thru(so)},u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=function ju(){return fa(this.__wrapped__,this.__actions__)},u.prototype.first=u.prototype.head,on&&(u.prototype[on]=function Ju(){return this}),u}();$._=Jn,(Ne=function(){return Jn}.call(kt,J,kt,Lt))!==l&&(Lt.exports=Ne)}.call(this)}}]);